import{r as f,j as n}from"./jsx-runtime-f0a4e50a.js";import"./client-888b02c5.js";import{R as x}from"./index-f0e4c749.js";import{d as b,R as y,O as _}from"./session-103011d7.js";/* empty css              */import{T as j}from"./TransactionBlock-3fb0dd4a.js";import{E as k}from"./keypair-becfe882.js";import"./bn-a0a0c8e1.js";import"./legacy-registry-4fcefa09.js";import"./index-ea9ea726.js";import"./nacl-fast-855db264.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./index-54e210ce.js";import"./util-fc318f65.js";import"./hash-046412e8.js";import"./blake2b-0b963f07.js";import"./_md-5eb5ac83.js";import"./secp256k1-a06cb75b.js";import"./sha512-d6693c92.js";function w(){const c=b(),[m,h]=f.useState([]),g=async()=>{const i=[];$(".itemSessionDetailMint").each(function(e){const t=$(this).find(".name_session").val()??"name_session",o=$(this).find(".description_session").val()??"description_session",r=$(this).find(".image-file").attr("link-img")??"https://xc6fbqjny4wfkgukliockypoutzhcqwjmlw2gigombpp2ynufaxa.arweave.net/uLxQwS3HLFUailocJWHupPJxQsli7aMgzmBe_WG0KC4",p=$(this).find(".mintft_session").val(),s={nameSession:t,descriptionSession:o,fileSession:r,mintftSession:p};i.push(s)}),console.log("newSessionData",i),h(i)},u=async i=>{console.log("details",i);let e="";i.forEach(t=>{e+=`<div class="row mb-3">
`,e+=`    <div class="col-4">
`,e+=`        <label for="image-file">
`,e+='            <img class="img-preview img-preview-nft" src="'+t.fileSession+`">
`,e+=`        </label>
`,e+=`    </div>
`,e+=`    <div class="col-6">
`,e+=`        <div class="col-10 mt-25">
`,e+='            <p class="class-ticket">'+t.nameSession+`</p>
`,e+=`        </div>
`,e+=`        <div class="col-10 mt-20">
`,e+='            <p class="class-ticket">'+t.descriptionSession+`</p>
`,e+=`        </div>
`,e+=`    </div>
`,e+=`    <div class="col-2" style="margin-top: 50px">
`,e+='        <p class="class-ticket"><a target="_blank" href="https://suiscan.xyz/testnet/tx/'+t.txhash+`">txhash</a></p>
`,e+=`    </div>
`,e+="</div>"}),$(".append-nft-session-detail").empty().append(e)},S=async(i,e)=>{let t={nameSession:e.map(s=>s.nameSession),descriptionSession:e.map(s=>s.descriptionSession),fileSession:e.map(s=>s.fileSession)};console.log("newData",t),console.log("wallet",i);const o=new j;let r=$('meta[name="package_id"]').attr("content"),p=$('meta[name="collection_id"]').attr("content");o.moveCall({target:`${r}::client::mint_batch_sessions`,arguments:[o.pure(t.nameSession),o.pure(t.descriptionSession),o.pure(t.fileSession),o.object(p)],typeArguments:[`${r}::ticket_collection::NFTTicket`]}),$(".loading").show();try{const s=await i.signAndExecuteTransactionBlock({transactionBlock:o,options:{showObjectChanges:!0}});let v="genius exit shallow wealth boring layer rotate model calm behind immune maze";const D=k.deriveKeypair(v);if(!s.confirmedLocalExecution){alert("nft minted Session fails!");return}console.log(s);let d=s.objectChanges.filter(a=>a.type==="created"&&a.objectType.includes("::ticket_collection::NFTSession")).map(a=>a.objectId);console.log("sessionIds",d),e.forEach((a,l)=>{a.txhash=s.digest,$(".itemSessionDetailMint").eq(l).find(".nft_address_session").val(d[l]),$(".itemSessionDetailMint").eq(l).find(".nft_uri_session").val(`https://suiscan.xyz/testnet/tx/${s.digest}`),$(".itemSessionDetailMint").eq(l).find(".nft_res_session").val(s),$(".itemSessionDetailMint").eq(l).find(".image-file").val()}),u(e),$(".loading").hide(),alert("nft minted Session successfully!")}catch{$(".loading").hide(),alert("nft minted Session fails!")}};return f.useEffect(()=>{m.length>0&&S(c,m)},[m]),n.jsxs("div",{className:"App",children:[n.jsx(y,{label:"Connect Wallet"}),n.jsx("section",{children:c.status==="connected"&&n.jsx(n.Fragment,{children:(c==null?void 0:c.account)&&n.jsx(n.Fragment,{children:n.jsx("p",{children:n.jsx("button",{id:"btnGenItemSession",onClick:g,type:"button",className:"btn btn-primary btn-rounded waves-effect waves-light mb-2 mt-2 me-2",children:"Generate Session"})})})})})]})}x.createRoot(document.getElementById("GenItemSession")).render(n.jsx(_,{children:n.jsx(w,{})}));
