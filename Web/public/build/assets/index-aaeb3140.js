import{p as Xt,_ as Se}from"./bn-a0a0c8e1.js";var Ie=(e=>(e.MissingApiKey="MISSING_API_KEY",e.ModalNotReady="MODAL_NOT_READY",e.MalformedResponse="MALFORMED_RESPONSE",e.InvalidArgument="INVALID_ARGUMENT",e.ExtensionNotInitialized="EXTENSION_NOT_INITIALIZED",e.IncompatibleExtensions="INCOMPATIBLE_EXTENSIONS",e))(Ie||{}),We=(e=>(e.SyncWeb3Method="SYNC_WEB3_METHOD",e.DuplicateIframe="DUPLICATE_IFRAME",e.ReactNativeEndpointConfiguration="REACT_NATIVE_ENDPOINT_CONFIGURATION",e.DeprecationNotice="DEPRECATION_NOTICE",e))(We||{}),It=(e=>(e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.MagicLinkFailedVerification=-1e4]="MagicLinkFailedVerification",e[e.MagicLinkExpired=-10001]="MagicLinkExpired",e[e.MagicLinkRateLimited=-10002]="MagicLinkRateLimited",e[e.MagicLinkInvalidRedirectURL=-10006]="MagicLinkInvalidRedirectURL",e[e.UserAlreadyLoggedIn=-10003]="UserAlreadyLoggedIn",e[e.UpdateEmailFailed=-10004]="UpdateEmailFailed",e[e.UserRequestEditEmail=-10005]="UserRequestEditEmail",e[e.InactiveRecipient=-10010]="InactiveRecipient",e[e.AccessDeniedToUser=-10011]="AccessDeniedToUser",e[e.RedirectLoginComplete=-10015]="RedirectLoginComplete",e))(It||{}),he=(e=>(e.MetaMask="metamask",e.CoinbaseWallet="coinbase_wallet",e))(he||{}),Qe=(e=>(e.WalletSelected="wallet_selected",e.WalletConnected="wallet_connected",e.WalletRejected="wallet_rejected",e))(Qe||{}),$=(e=>(e.LoginWithSms="magic_auth_login_with_sms",e.LoginWithEmailOTP="magic_auth_login_with_email_otp",e.LoginWithMagicLink="magic_auth_login_with_magic_link",e.LoginWithCredential="magic_auth_login_with_credential",e.SetAuthorizationToken="magic_auth_set_authorization_token",e.GetIdToken="magic_auth_get_id_token",e.GenerateIdToken="magic_auth_generate_id_token",e.GetMetadata="magic_auth_get_metadata",e.IsLoggedIn="magic_is_logged_in",e.Logout="magic_auth_logout",e.UpdateEmail="magic_auth_update_email",e.UserSettings="magic_auth_settings",e.UserSettingsTestMode="magic_auth_settings_testing_mode",e.LoginWithSmsTestMode="magic_auth_login_with_sms_testing_mode",e.LoginWithEmailOTPTestMode="magic_auth_login_with_email_otp_testing_mode",e.LoginWithMagicLinkTestMode="magic_login_with_magic_link_testing_mode",e.LoginWithCredentialTestMode="magic_auth_login_with_credential_testing_mode",e.GetIdTokenTestMode="magic_auth_get_id_token_testing_mode",e.GenerateIdTokenTestMode="magic_auth_generate_id_token_testing_mode",e.GetMetadataTestMode="magic_auth_get_metadata_testing_mode",e.IsLoggedInTestMode="magic_auth_is_logged_in_testing_mode",e.LogoutTestMode="magic_auth_logout_testing_mode",e.UpdateEmailTestMode="magic_auth_update_email_testing_mode",e.IntermediaryEvent="magic_intermediary_event",e.RequestAccounts="eth_requestAccounts",e.GetInfo="magic_get_info",e.ShowUI="magic_wallet",e.NFTPurchase="magic_nft_purchase",e.NFTCheckout="magic_nft_checkout",e.NFTTransfer="magic_nft_transfer",e.RequestUserInfoWithUI="mc_request_user_info",e.Disconnect="mc_disconnect",e.UpdatePhoneNumber="magic_auth_update_phone_number",e.UpdatePhoneNumberTestMode="magic_auth_update_phone_number_testing_mode",e.RecoverAccount="magic_auth_recover_account",e.RecoverAccountTestMode="magic_auth_recover_account_testing_mode",e.MagicBoxHeartBeat="magic_box_heart_beat",e.AutoConnect="mc_auto_connect",e.Login="mc_login",e.EncryptV1="magic_auth_encrypt_v1",e.DecryptV1="magic_auth_decrypt_v1",e.ShowNFTs="magic_show_nfts",e.ShowOnRamp="magic_show_fiat_onramp",e.ShowSendTokensUI="magic_show_send_tokens_ui",e.ShowAddress="magic_show_address",e.ShowBalances="magic_show_balances",e.SendGaslessTransaction="eth_sendGaslessTransaction",e))($||{}),Me=(e=>(e.MAGIC_HANDLE_RESPONSE="MAGIC_HANDLE_RESPONSE",e.MAGIC_OVERLAY_READY="MAGIC_OVERLAY_READY",e.MAGIC_SHOW_OVERLAY="MAGIC_SHOW_OVERLAY",e.MAGIC_HIDE_OVERLAY="MAGIC_HIDE_OVERLAY",e.MAGIC_HANDLE_EVENT="MAGIC_HANDLE_EVENT",e.MAGIC_MG_BOX_SEND_RECEIPT="MAGIC_MG_BOX_SEND_RECEIPT",e))(Me||{}),tt=(e=>(e.MAGIC_HANDLE_REQUEST="MAGIC_HANDLE_REQUEST",e))(tt||{}),An=(e=>(e.UpdateEmail="update-email",e.MFA="mfa",e.Recovery="recovery",e))(An||{}),Sn=(e=>(e.Retry="retry",e))(Sn||{}),Rn=(e=>(e.EmailSent="email-sent",e.EmailNotDeliverable="email-not-deliverable",e))(Rn||{}),Ue=(e=>(e.VerifyEmailOtp="verify-email-otp",e.Cancel="cancel",e))(Ue||{}),Mn=(e=>(e.EmailOTPSent="email-otp-sent",e.InvalidEmailOtp="invalid-email-otp",e))(Mn||{}),yt=(e=>(e.Retry="device-retry",e))(yt||{}),Tn=(e=>(e.DeviceApproved="device-approved",e.DeviceNeedsApproval="device-needs-approval",e.DeviceVerificationLinkExpired="device-verification-link-expired",e.DeviceVerificationEmailSent="device-verification-email-sent",e))(Tn||{}),Ln=(e=>(e.Harmony="HARMONY",e))(Ln||{}),$n=(e=>(e.PhoneNumber="phone_number",e))($n||{}),kn=Object.create,it=Object.defineProperty,Pn=Object.defineProperties,Cn=Object.getOwnPropertyDescriptor,jn=Object.getOwnPropertyDescriptors,Dn=Object.getOwnPropertyNames,Ht=Object.getOwnPropertySymbols,xn=Object.getPrototypeOf,pr=Object.prototype.hasOwnProperty,Un=Object.prototype.propertyIsEnumerable,Kt=(e,t,r)=>t in e?it(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,bt=(e,t)=>{for(var r in t||(t={}))pr.call(t,r)&&Kt(e,r,t[r]);if(Ht)for(var r of Ht(t))Un.call(t,r)&&Kt(e,r,t[r]);return e},mr=(e,t)=>Pn(e,jn(t)),Fn=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Bn=(e,t)=>{for(var r in t)it(e,r,{get:t[r],enumerable:!0})},Wn=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of Dn(t))!pr.call(e,l)&&l!==r&&it(e,l,{get:()=>t[l],enumerable:!(a=Cn(t,l))||a.enumerable});return e},Gn=(e,t,r)=>(r=e!=null?kn(xn(e)):{},Wn(t||!e||!e.__esModule?it(r,"default",{value:e,enumerable:!0}):r,e)),ie=(e,t,r)=>new Promise((a,l)=>{var s=I=>{try{f(r.next(I))}catch(g){l(g)}},v=I=>{try{f(r.throw(I))}catch(g){l(g)}},f=I=>I.done?a(I.value):Promise.resolve(I.value).then(s,v);f((r=r.apply(e,t)).next())}),qn=Fn((e,t)=>{var r=Object.prototype.hasOwnProperty,a="~";function l(){}Object.create&&(l.prototype=Object.create(null),new l().__proto__||(a=!1));function s(g,E,h){this.fn=g,this.context=E,this.once=h||!1}function v(g,E,h,S,C){if(typeof h!="function")throw new TypeError("The listener must be a function");var P=new s(h,S||g,C),F=a?a+E:E;return g._events[F]?g._events[F].fn?g._events[F]=[g._events[F],P]:g._events[F].push(P):(g._events[F]=P,g._eventsCount++),g}function f(g,E){--g._eventsCount===0?g._events=new l:delete g._events[E]}function I(){this._events=new l,this._eventsCount=0}I.prototype.eventNames=function(){var g=[],E,h;if(this._eventsCount===0)return g;for(h in E=this._events)r.call(E,h)&&g.push(a?h.slice(1):h);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(E)):g},I.prototype.listeners=function(g){var E=a?a+g:g,h=this._events[E];if(!h)return[];if(h.fn)return[h.fn];for(var S=0,C=h.length,P=new Array(C);S<C;S++)P[S]=h[S].fn;return P},I.prototype.listenerCount=function(g){var E=a?a+g:g,h=this._events[E];return h?h.fn?1:h.length:0},I.prototype.emit=function(g,E,h,S,C,P){var F=a?a+g:g;if(!this._events[F])return!1;var R=this._events[F],Y=arguments.length,q,V;if(R.fn){switch(R.once&&this.removeListener(g,R.fn,void 0,!0),Y){case 1:return R.fn.call(R.context),!0;case 2:return R.fn.call(R.context,E),!0;case 3:return R.fn.call(R.context,E,h),!0;case 4:return R.fn.call(R.context,E,h,S),!0;case 5:return R.fn.call(R.context,E,h,S,C),!0;case 6:return R.fn.call(R.context,E,h,S,C,P),!0}for(V=1,q=new Array(Y-1);V<Y;V++)q[V-1]=arguments[V];R.fn.apply(R.context,q)}else{var de=R.length,O;for(V=0;V<de;V++)switch(R[V].once&&this.removeListener(g,R[V].fn,void 0,!0),Y){case 1:R[V].fn.call(R[V].context);break;case 2:R[V].fn.call(R[V].context,E);break;case 3:R[V].fn.call(R[V].context,E,h);break;case 4:R[V].fn.call(R[V].context,E,h,S);break;default:if(!q)for(O=1,q=new Array(Y-1);O<Y;O++)q[O-1]=arguments[O];R[V].fn.apply(R[V].context,q)}}return!0},I.prototype.on=function(g,E,h){return v(this,g,E,h,!1)},I.prototype.once=function(g,E,h){return v(this,g,E,h,!0)},I.prototype.removeListener=function(g,E,h,S){var C=a?a+g:g;if(!this._events[C])return this;if(!E)return f(this,C),this;var P=this._events[C];if(P.fn)P.fn===E&&(!S||P.once)&&(!h||P.context===h)&&f(this,C);else{for(var F=0,R=[],Y=P.length;F<Y;F++)(P[F].fn!==E||S&&!P[F].once||h&&P[F].context!==h)&&R.push(P[F]);R.length?this._events[C]=R.length===1?R[0]:R:f(this,C)}return this},I.prototype.removeAllListeners=function(g){var E;return g?(E=a?a+g:g,this._events[E]&&f(this,E)):(this._events=new l,this._eventsCount=0),this},I.prototype.off=I.prototype.removeListener,I.prototype.addListener=I.prototype.on,I.prefixed=a,I.EventEmitter=I,typeof t<"u"&&(t.exports=I)});function Vn(e){let t={exports:{}};return e(t,t.exports),t.exports}var zn=Number.MAX_SAFE_INTEGER||9007199254740991,wt={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:zn,MAX_SAFE_COMPONENT_LENGTH:16},Xn=typeof Xt=="object"&&Xt.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},G=Xn,Ge=Vn(function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:r}=wt,a=(t=e.exports={}).re=[],l=t.src=[],s=t.t={},v=0,f=(I,g,E)=>{let h=v++;G(h,g),s[I]=h,l[h]=g,a[h]=new RegExp(g,E?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","[0-9]+"),f("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),f("MAINVERSION",`(${l[s.NUMERICIDENTIFIER]})\\.(${l[s.NUMERICIDENTIFIER]})\\.(${l[s.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${l[s.NUMERICIDENTIFIERLOOSE]})\\.(${l[s.NUMERICIDENTIFIERLOOSE]})\\.(${l[s.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${l[s.NUMERICIDENTIFIER]}|${l[s.NONNUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${l[s.NUMERICIDENTIFIERLOOSE]}|${l[s.NONNUMERICIDENTIFIER]})`),f("PRERELEASE",`(?:-(${l[s.PRERELEASEIDENTIFIER]}(?:\\.${l[s.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${l[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[s.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER","[0-9A-Za-z-]+"),f("BUILD",`(?:\\+(${l[s.BUILDIDENTIFIER]}(?:\\.${l[s.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${l[s.MAINVERSION]}${l[s.PRERELEASE]}?${l[s.BUILD]}?`),f("FULL",`^${l[s.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${l[s.MAINVERSIONLOOSE]}${l[s.PRERELEASELOOSE]}?${l[s.BUILD]}?`),f("LOOSE",`^${l[s.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${l[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${l[s.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${l[s.XRANGEIDENTIFIER]})(?:\\.(${l[s.XRANGEIDENTIFIER]})(?:\\.(${l[s.XRANGEIDENTIFIER]})(?:${l[s.PRERELEASE]})?${l[s.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${l[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[s.XRANGEIDENTIFIERLOOSE]})(?:${l[s.PRERELEASELOOSE]})?${l[s.BUILD]}?)?)?`),f("XRANGE",`^${l[s.GTLT]}\\s*${l[s.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${l[s.GTLT]}\\s*${l[s.XRANGEPLAINLOOSE]}$`),f("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),f("COERCERTL",l[s.COERCE],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${l[s.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",f("TILDE",`^${l[s.LONETILDE]}${l[s.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${l[s.LONETILDE]}${l[s.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${l[s.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",f("CARET",`^${l[s.LONECARET]}${l[s.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${l[s.LONECARET]}${l[s.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${l[s.GTLT]}\\s*(${l[s.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${l[s.GTLT]}\\s*(${l[s.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${l[s.GTLT]}\\s*(${l[s.LOOSEPLAIN]}|${l[s.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${l[s.XRANGEPLAIN]})\\s+-\\s+(${l[s.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${l[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[s.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0.0.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}),Yt=/^[0-9]+$/,vr=(e,t)=>{let r=Yt.test(e),a=Yt.test(t);return r&&a&&(e=+e,t=+t),e===t?0:r&&!a?-1:a&&!r?1:e<t?-1:1},Hn=(e,t)=>vr(t,e),Kn={compareIdentifiers:vr,rcompareIdentifiers:Hn},{MAX_LENGTH:Jt,MAX_SAFE_INTEGER:ze}=wt,{re:Qt,t:Zt}=Ge,{compareIdentifiers:De}=Kn,Z=class{constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof Z){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>Jt)throw new TypeError(`version is longer than ${Jt} characters`);G("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?Qt[Zt.LOOSE]:Qt[Zt.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>ze||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ze||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ze||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(a=>{if(/^[0-9]+$/.test(a)){let l=+a;if(l>=0&&l<ze)return l}return a}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(G("SemVer.compare",this.version,this.options,e),!(e instanceof Z)){if(typeof e=="string"&&e===this.version)return 0;e=new Z(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Z||(e=new Z(e,this.options)),De(this.major,e.major)||De(this.minor,e.minor)||De(this.patch,e.patch)}comparePre(e){if(e instanceof Z||(e=new Z(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],a=e.prerelease[t];if(G("prerelease compare",t,r,a),r===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(r===void 0)return-1;if(r!==a)return De(r,a)}while(++t)}compareBuild(e){e instanceof Z||(e=new Z(e,this.options));let t=0;do{let r=this.build[t],a=e.build[t];if(G("prerelease compare",t,r,a),r===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(r===void 0)return-1;if(r!==a)return De(r,a)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let r=this.prerelease.length;for(;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}},Yn=(e,t,r)=>new Z(e,r).compare(new Z(t,r)),ke=Yn,Jn=(e,t,r)=>ke(e,t,r)===0,Qn=Jn,Zn=(e,t,r)=>ke(e,t,r)!==0,eo=Zn,to=(e,t,r)=>ke(e,t,r)>0,ro=to,no=(e,t,r)=>ke(e,t,r)>=0,oo=no,io=(e,t,r)=>ke(e,t,r)<0,ao=io,so=(e,t,r)=>ke(e,t,r)<=0,lo=so,co=(e,t,r,a)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return Qn(e,r,a);case"!=":return eo(e,r,a);case">":return ro(e,r,a);case">=":return oo(e,r,a);case"<":return ao(e,r,a);case"<=":return lo(e,r,a);default:throw new TypeError(`Invalid operator: ${t}`)}},vt=co,xe=Symbol("SemVer ANY"),Be=class{static get ANY(){return xe}constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof Be){if(e.loose===!!t.loose)return e;e=e.value}G("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===xe?this.value="":this.value=this.operator+this.semver.version,G("comp",this)}parse(e){let t=this.options.loose?er[tr.COMPARATORLOOSE]:er[tr.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new Z(r[2],this.options.loose):this.semver=xe}toString(){return this.value}test(e){if(G("Comparator.test",e,this.options.loose),this.semver===xe||e===xe)return!0;if(typeof e=="string")try{e=new Z(e,this.options)}catch{return!1}return vt(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof Be))throw new TypeError("a Comparator is required");if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),this.operator==="")return this.value===""||new Te(e.value,t).test(this.value);if(e.operator==="")return e.value===""||new Te(this.value,t).test(e.semver);let r=!(this.operator!==">="&&this.operator!==">"||e.operator!==">="&&e.operator!==">"),a=!(this.operator!=="<="&&this.operator!=="<"||e.operator!=="<="&&e.operator!=="<"),l=this.semver.version===e.semver.version,s=!(this.operator!==">="&&this.operator!=="<="||e.operator!==">="&&e.operator!=="<="),v=vt(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),f=vt(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return r||a||l&&s||v||f}},{re:er,t:tr}=Ge,Te=class{constructor(t,r){if(r&&typeof r=="object"||(r={loose:!!r,includePrerelease:!1}),t instanceof Te)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new Te(t.raw,r);if(t instanceof Be)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(a=>this.parseRange(a.trim())).filter(a=>a.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${t}`);this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){let{loose:r}=this.options;t=t.trim();let a=r?re[ee.HYPHENRANGELOOSE]:re[ee.HYPHENRANGE];t=t.replace(a,wo(this.options.includePrerelease)),G("hyphen replace",t),t=t.replace(re[ee.COMPARATORTRIM],uo),G("comparator trim",t,re[ee.COMPARATORTRIM]),t=(t=(t=t.replace(re[ee.TILDETRIM],fo)).replace(re[ee.CARETTRIM],ho)).split(/\s+/).join(" ");let l=r?re[ee.COMPARATORLOOSE]:re[ee.COMPARATOR];return t.split(" ").map(s=>po(s,this.options)).join(" ").split(/\s+/).map(s=>bo(s,this.options)).filter(this.options.loose?s=>!!s.match(l):()=>!0).map(s=>new Be(s,this.options))}intersects(t,r){if(!(t instanceof Te))throw new TypeError("a Range is required");return this.set.some(a=>rr(a,r)&&t.set.some(l=>rr(l,r)&&a.every(s=>l.every(v=>s.intersects(v,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new Z(t,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(No(this.set[r],t,this.options))return!0;return!1}},{re,t:ee,comparatorTrimReplace:uo,tildeTrimReplace:fo,caretTrimReplace:ho}=Ge,rr=(e,t)=>{let r=!0,a=e.slice(),l=a.pop();for(;r&&a.length;)r=a.every(s=>l.intersects(s,t)),l=a.pop();return r},po=(e,t)=>(G("comp",e,t),e=go(e,t),G("caret",e),e=mo(e,t),G("tildes",e),e=Eo(e,t),G("xrange",e),e=Io(e,t),G("stars",e),e),oe=e=>!e||e.toLowerCase()==="x"||e==="*",mo=(e,t)=>e.trim().split(/\s+/).map(r=>vo(r,t)).join(" "),vo=(e,t)=>{let r=t.loose?re[ee.TILDELOOSE]:re[ee.TILDE];return e.replace(r,(a,l,s,v,f)=>{let I;return G("tilde",e,a,l,s,v,f),oe(l)?I="":oe(s)?I=`>=${l}.0.0 <${+l+1}.0.0-0`:oe(v)?I=`>=${l}.${s}.0 <${l}.${+s+1}.0-0`:f?(G("replaceTilde pr",f),I=`>=${l}.${s}.${v}-${f} <${l}.${+s+1}.0-0`):I=`>=${l}.${s}.${v} <${l}.${+s+1}.0-0`,G("tilde return",I),I})},go=(e,t)=>e.trim().split(/\s+/).map(r=>yo(r,t)).join(" "),yo=(e,t)=>{G("caret",e,t);let r=t.loose?re[ee.CARETLOOSE]:re[ee.CARET],a=t.includePrerelease?"-0":"";return e.replace(r,(l,s,v,f,I)=>{let g;return G("caret",e,l,s,v,f,I),oe(s)?g="":oe(v)?g=`>=${s}.0.0${a} <${+s+1}.0.0-0`:oe(f)?g=s==="0"?`>=${s}.${v}.0${a} <${s}.${+v+1}.0-0`:`>=${s}.${v}.0${a} <${+s+1}.0.0-0`:I?(G("replaceCaret pr",I),g=s==="0"?v==="0"?`>=${s}.${v}.${f}-${I} <${s}.${v}.${+f+1}-0`:`>=${s}.${v}.${f}-${I} <${s}.${+v+1}.0-0`:`>=${s}.${v}.${f}-${I} <${+s+1}.0.0-0`):(G("no pr"),g=s==="0"?v==="0"?`>=${s}.${v}.${f}${a} <${s}.${v}.${+f+1}-0`:`>=${s}.${v}.${f}${a} <${s}.${+v+1}.0-0`:`>=${s}.${v}.${f} <${+s+1}.0.0-0`),G("caret return",g),g})},Eo=(e,t)=>(G("replaceXRanges",e,t),e.split(/\s+/).map(r=>_o(r,t)).join(" ")),_o=(e,t)=>{e=e.trim();let r=t.loose?re[ee.XRANGELOOSE]:re[ee.XRANGE];return e.replace(r,(a,l,s,v,f,I)=>{G("xRange",e,a,l,s,v,f,I);let g=oe(s),E=g||oe(v),h=E||oe(f),S=h;return l==="="&&S&&(l=""),I=t.includePrerelease?"-0":"",g?a=l===">"||l==="<"?"<0.0.0-0":"*":l&&S?(E&&(v=0),f=0,l===">"?(l=">=",E?(s=+s+1,v=0,f=0):(v=+v+1,f=0)):l==="<="&&(l="<",E?s=+s+1:v=+v+1),l==="<"&&(I="-0"),a=`${l+s}.${v}.${f}${I}`):E?a=`>=${s}.0.0${I} <${+s+1}.0.0-0`:h&&(a=`>=${s}.${v}.0${I} <${s}.${+v+1}.0-0`),G("xRange return",a),a})},Io=(e,t)=>(G("replaceStars",e,t),e.trim().replace(re[ee.STAR],"")),bo=(e,t)=>(G("replaceGTE0",e,t),e.trim().replace(re[t.includePrerelease?ee.GTE0PRE:ee.GTE0],"")),wo=e=>(t,r,a,l,s,v,f,I,g,E,h,S,C)=>`${r=oe(a)?"":oe(l)?`>=${a}.0.0${e?"-0":""}`:oe(s)?`>=${a}.${l}.0${e?"-0":""}`:v?`>=${r}`:`>=${r}${e?"-0":""}`} ${I=oe(g)?"":oe(E)?`<${+g+1}.0.0-0`:oe(h)?`<${g}.${+E+1}.0-0`:S?`<=${g}.${E}.${h}-${S}`:e?`<${g}.${E}.${+h+1}-0`:`<=${I}`}`.trim(),No=(e,t,r)=>{for(let a=0;a<e.length;a++)if(!e[a].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let a=0;a<e.length;a++)if(G(e[a].semver),e[a].semver!==Be.ANY&&e[a].semver.prerelease.length>0){let l=e[a].semver;if(l.major===t.major&&l.minor===t.minor&&l.patch===t.patch)return!0}return!1}return!0},Oo=(e,t,r)=>{try{t=new Te(t,r)}catch{return!1}return t.test(e)},{MAX_LENGTH:Ao}=wt,{re:nr,t:or}=Ge,So=(e,t)=>{if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof Z)return e;if(typeof e!="string"||e.length>Ao||!(t.loose?nr[or.LOOSE]:nr[or.FULL]).test(e))return null;try{return new Z(e,t)}catch{return null}},Ro=So,{re:Xe,t:He}=Ge,Mo=(e,t)=>{if(e instanceof Z)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;let r=null;if((t=t||{}).rtl){let a;for(;(a=Xe[He.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&a.index+a[0].length===r.index+r[0].length||(r=a),Xe[He.COERCERTL].lastIndex=a.index+a[1].length+a[2].length;Xe[He.COERCERTL].lastIndex=-1}else r=e.match(Xe[He.COERCE]);return r===null?null:Ro(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};function To(e){return String.fromCharCode(parseInt(e.slice(1),16))}function Lo(e){return`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`}function $o(e){return btoa(encodeURIComponent(e).replace(/%[0-9A-F]{2}/g,To))}function ko(e){return decodeURIComponent(Array.from(atob(e),Lo).join(""))}function gr(e){return $o(JSON.stringify(e))}function Po(e){return JSON.parse(ko(e))}function Fe(e){return typeof e>"u"}function Co(e){return e===null}function yr(e){return Co(e)||Fe(e)}function jo(e){return yr(e)?!1:!Fe(e.jsonrpc)&&!Fe(e.id)&&(!Fe(e.result)||!Fe(e.error))}function Do(e){return yr(e)?!1:typeof e=="number"&&Object.values(It).includes(e)}function Et(e){if(!e)return!0;for(let t in e)if(Object.hasOwnProperty.call(e,t))return!1;return!0}var X={};function xo(e,t){return Object.assign(X,t),e}var Uo={"magic-sdk":"magic-sdk","@magic-sdk/react-native":"magic-sdk-rn","@magic-sdk/react-native-bare":"magic-sdk-rn-bare","@magic-sdk/react-native-expo":"magic-sdk-rn-expo"},be=class extends Error{constructor(e,t){super(`Magic SDK Error: [${e}] ${t}`),this.code=e,this.rawMessage=t,this.__proto__=Error,Object.setPrototypeOf(this,be.prototype)}},rt=class extends Error{constructor(e){super(),this.__proto__=Error;let t=Number(e==null?void 0:e.code);this.rawMessage=(e==null?void 0:e.message)||"Internal error",this.code=Do(t)?t:It.InternalError,this.message=`Magic RPC Error: [${this.code}] ${this.rawMessage}`,this.data=(e==null?void 0:e.data)||void 0,Object.setPrototypeOf(this,rt.prototype)}},at=class{constructor(e,t){this.code=e,this.rawMessage=t,this.message=`Magic SDK Warning: [${e}] ${t}`}log(){console.warn(this.message)}},Er=class extends Error{constructor(e,t,r,a){super(`Magic Extension Error (${e.name}): [${t}] ${r}`),this.code=t,this.rawMessage=r,this.data=a,this.__proto__=Error,Object.setPrototypeOf(this,Er.prototype)}},ir=class{constructor(e,t,r){this.code=t,this.rawMessage=r,this.message=`Magic Extension Warning (${e.name}): [${t}] ${r}`}log(){console.warn(this.message)}};function Fo(){return new be(Ie.MissingApiKey,"Please provide an API key that you acquired from the Magic developer dashboard.")}function Bo(){return new be(Ie.ModalNotReady,"Modal is not ready.")}function Wo(){return new be(Ie.MalformedResponse,"Response from the Magic iframe is malformed.")}function Go(e){return new be(Ie.ExtensionNotInitialized,`Extensions must be initialized with a Magic SDK instance before \`Extension.${e}\` can be accessed. Do not invoke \`Extension.${e}\` inside an extension constructor.`)}function qo(e){let t=`Some extensions are incompatible with \`${X.sdkName}@${X.version}\`:`;return e.filter(r=>typeof r.compat<"u"&&r.compat!==null).forEach(r=>{let a=r.compat[X.sdkName];typeof a=="string"?t+=`
  - Extension \`${r.name}\` supports version(s) \`${a}\``:a||(t+=`
  - Extension \`${r.name}\` does not support ${X.platform} environments.`)}),new be(Ie.IncompatibleExtensions,t)}function Vo(e){let t=r=>{let a=r+1,l=a%10,s=a%100;return l===1&&s!==11?`${a}st`:l===2&&s!==12?`${a}nd`:l===3&&s!==13?`${a}rd`:`${a}th`};return new be(Ie.InvalidArgument,`Invalid ${t(e.argument)} argument given to \`${e.procedure}\`.
  Expected: \`${e.expected}\`
  Received: \`${e.received}\``)}function zo(){return new at(We.DuplicateIframe,"Duplicate iframes found.")}function Xo(){return new at(We.SyncWeb3Method,"Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.")}function Ho(){return new at(We.ReactNativeEndpointConfiguration,`CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${X.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`)}function ce(e){let{method:t,removalVersions:r,useInstead:a}=e,l=r[X.sdkName],s=a?` Use \`${a}\` instead.`:"",v=`\`${t}\` will be removed from \`${X.sdkName}\` in version \`${l}\`.${s}`;return new at(We.DeprecationNotice,v)}function*Ko(){let e=0;for(;;)e<Number.MAX_SAFE_INTEGER?yield++e:e=0}var Yo=Ko();function _r(){return Yo.next().value}var Ir=Symbol("Payload pre-processed by Magic SDK");function br(e){return Object.defineProperty(e,Ir,{value:!0,enumerable:!1}),e}function Jo(e){return!!e[Ir]}function nt(e){var t,r,a;return Jo(e)||(e.jsonrpc=(t=e.jsonrpc)!=null?t:"2.0",e.id=_r(),e.method=(r=e.method)!=null?r:"noop",e.params=(a=e.params)!=null?a:[],br(e)),e}function D(e,t=[]){return br({params:t,method:e,jsonrpc:"2.0",id:_r()})}var Nt=class{constructor(e){e instanceof Nt?(this._jsonrpc=e.payload.jsonrpc,this._id=e.payload.id,this._result=e.payload.result,this._error=e.payload.error):jo(e)?(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=e.result,this._error=e.error):(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=void 0,this._error=void 0)}applyError(e){return this._error=e,this}applyResult(e){return this._result=e,this}get hasError(){return typeof this._error<"u"&&this._error!==null}get hasResult(){return typeof this._result<"u"}get payload(){return{jsonrpc:this._jsonrpc,id:this._id,result:this._result,error:this._error}}},Qo=Gn(qn()),Zo=class extends Qo.default{};function wr(){let e=new Zo;return{emitter:e,createChainingEmitterMethod:(t,r)=>(...a)=>(e[t].apply(e,a),r),createBoundEmitterMethod:t=>(...r)=>e[t].apply(e,r)}}var Nr=Symbol("isPromiEvent");function ei(e){return!!e[Nr]}function Ot(e){let t=Or(e),{createBoundEmitterMethod:r,createChainingEmitterMethod:a}=wr(),l=Symbol("Promise.then"),s=Symbol("Promise.catch"),v=Symbol("Promise.finally"),f=(E,h)=>(...S)=>{let C=h[E].apply(h,S);return I(C)},I=E=>Object.assign(E,{[Nr]:!0,[l]:E[l]||E.then,[s]:E[s]||E.catch,[v]:E[v]||E.finally,then:f(l,E),catch:f(s,E),finally:f(v,E),on:a("on",E),once:a("once",E),addListener:a("addListener",E),off:a("off",E),removeListener:a("removeListener",E),removeAllListeners:a("removeAllListeners",E),emit:r("emit"),eventNames:r("eventNames"),listeners:r("listeners"),listenerCount:r("listenerCount")}),g=I(t.then(E=>(g.emit("done",E),g.emit("settled"),E),E=>{throw g.emit("error",E),g.emit("settled"),E}));return g}function Or(e){return new Promise((t,r)=>{let a=e(t,r);Promise.resolve(a).catch(r)})}var we=class{constructor(e){this.sdk=e}get overlay(){return this.sdk.overlay}request(e){let t=this.overlay.post(tt.MAGIC_HANDLE_REQUEST,nt(e)),r=Ot((l,s)=>{t.then(v=>{if(a(),v.hasError)s(new rt(v.payload.error));else if(v.hasResult)l(v.payload.result);else throw Wo()}).catch(v=>{a(),s(v)})}),a=this.overlay.on(Me.MAGIC_HANDLE_EVENT,l=>{var s;let{response:v}=l.data;if(v.id===e.id&&((s=v.result)!=null&&s.event)){let{event:f,params:I=[]}=v.result;r.emit(f,...I)}});return r}createIntermediaryEvent(e,t){return r=>{let a=D($.IntermediaryEvent,[{payloadId:t,eventType:e,args:r}]);this.request(a)}}};function ti(e,t){let[r]=e.split(".").map(Number);return r>=t}var ue={"magic-sdk":"v18.0.0","@magic-sdk/react-native":"v14.0.0","@magic-sdk/react-native-bare":"v19.0.0","@magic-sdk/react-native-expo":"v19.0.0"},ri=class extends we{loginWithMagicLink(e){let t=X.sdkName==="@magic-sdk/react-native"||X.sdkName==="@magic-sdk/react-native-bare"||X.sdkName==="@magic-sdk/react-native-expo";if(t&&ti(X.version,19))throw new Error("loginWithMagicLink() is deprecated for this package, please utlize a passcode method like loginWithSMS or loginWithEmailOTP instead.");ce({method:"auth.loginWithMagicLink()",removalVersions:ue,useInstead:t?"@magic-ext/auth auth.loginWithEmailOTP()":"@magic-ext/auth auth.loginWithMagicLink()"}).log();let{email:r,showUI:a=!0,redirectURI:l}=e,s=D(this.sdk.testMode?$.LoginWithMagicLinkTestMode:$.LoginWithMagicLink,[{email:r,showUI:a,redirectURI:l}]);return this.request(s)}loginWithSMS(e){ce({method:"auth.loginWithSMS()",removalVersions:ue,useInstead:"@magic-ext/auth auth.loginWithSMS()"}).log();let{phoneNumber:t}=e,r=D(this.sdk.testMode?$.LoginWithSmsTestMode:$.LoginWithSms,[{phoneNumber:t,showUI:!0}]);return this.request(r)}loginWithEmailOTP(e){let{email:t,showUI:r,deviceCheckUI:a}=e,l=D(this.sdk.testMode?$.LoginWithEmailOTPTestMode:$.LoginWithEmailOTP,[{email:t,showUI:r,deviceCheckUI:a}]),s=this.request(l);return!a&&s&&s.on(yt.Retry,()=>{this.createIntermediaryEvent(yt.Retry,l.id)()}),!r&&s&&(s.on(Ue.VerifyEmailOtp,v=>{this.createIntermediaryEvent(Ue.VerifyEmailOtp,l.id)(v)}),s.on(Ue.Cancel,()=>{this.createIntermediaryEvent(Ue.Cancel,l.id)()})),s}loginWithCredential(e){ce({method:"auth.loginWithCredential()",removalVersions:ue,useInstead:"@magic-ext/auth auth.loginWithCredential()"}).log();let t=e??"";if(!e&&X.platform==="web"){t=window.location.search;let a=window.location.origin+window.location.pathname;window.history.replaceState(null,"",a)}let r=D(this.sdk.testMode?$.LoginWithCredentialTestMode:$.LoginWithCredential,[t]);return this.request(r)}setAuthorizationToken(e){ce({method:"auth.setAuthorizationToken()",removalVersions:ue,useInstead:"@magic-ext/auth auth.setAuthorizationToken()"}).log();let t=D($.SetAuthorizationToken,[{jwt:e}]);return this.request(t)}updateEmailWithUI(e){ce({method:"auth.updateEmailWithUI()",removalVersions:ue,useInstead:"@magic-ext/auth auth.updateEmailWithUI()"}).log();let{email:t,showUI:r=!0}=e,a=D(this.sdk.testMode?$.UpdateEmailTestMode:$.UpdateEmail,[{email:t,showUI:r}]);return this.request(a)}updatePhoneNumberWithUI(){ce({method:"auth.updatePhoneNumberWithUI()",removalVersions:ue,useInstead:"@magic-ext/auth auth.updatePhoneNumberWithUI()"}).log();let e=D(this.sdk.testMode?$.UpdatePhoneNumberTestMode:$.UpdatePhoneNumber);return this.request(e)}},Ar={};Bn(Ar,{clear:()=>ni,getItem:()=>ge,iterate:()=>si,key:()=>ii,keys:()=>ai,length:()=>oi,removeItem:()=>At,setItem:()=>$e});var Ke;function ye(e){return(...t)=>ie(this,null,function*(){return Ke||(Ke=yield X.configureStorage()),yield Ke.ready(),Ke[e](...t)})}var ge=ye("getItem"),$e=ye("setItem"),At=ye("removeItem"),ni=ye("clear"),oi=ye("length"),ii=ye("key"),ai=ye("keys"),si=ye("iterate"),li=class extends we{constructor(){super(...arguments),this.localForageKey="mc_active_wallet"}getIdToken(t){let r=D(this.sdk.testMode?$.GetIdTokenTestMode:$.GetIdToken,[t]);return this.request(r)}generateIdToken(t){let r=D(this.sdk.testMode?$.GenerateIdTokenTestMode:$.GenerateIdToken,[t]);return this.request(r)}getInfo(){return ie(this,null,function*(){let t=yield ge(this.localForageKey),r=D($.GetInfo,[{walletType:t}]);return this.request(r)})}isLoggedIn(){let t=D(this.sdk.testMode?$.IsLoggedInTestMode:$.IsLoggedIn);return this.request(t)}logout(){At(this.localForageKey);let t=D(this.sdk.testMode?$.LogoutTestMode:$.Logout);return this.request(t)}requestInfoWithUI(t){let r=D($.RequestUserInfoWithUI,t?[t]:[]);return this.request(r)}showSettings(t){let r=D(this.sdk.testMode?$.UserSettingsTestMode:$.UserSettings,[t]);return this.request(r)}recoverAccount(t){let r=D(this.sdk.testMode?$.RecoverAccountTestMode:$.RecoverAccount,[t]);return this.request(r)}getMetadata(){ce({method:"user.getMetadata()",removalVersions:ue,useInstead:"user.getInfo()"}).log();let t=D(this.sdk.testMode?$.GetMetadataTestMode:$.GetMetadata);return this.request(t)}updateEmail(t){ce({method:"user.updateEmail()",removalVersions:ue,useInstead:"auth.updateEmailWithUI()"}).log();let{email:r,showUI:a=!0}=t,l=D(this.sdk.testMode?$.UpdateEmailTestMode:$.UpdateEmail,[{email:r,showUI:a}]);return this.request(l)}updatePhoneNumber(){ce({method:"user.updatePhoneNumber()",removalVersions:ue,useInstead:"auth.updatePhoneNumberWithUI()"}).log();let t=D(this.sdk.testMode?$.UpdatePhoneNumberTestMode:$.UpdatePhoneNumber);return this.request(t)}};function ot(e,t){return t?new URL(e,t):new URL(e)}function ci(){let e=window.crypto.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&191|128;let t="";return t+=e[0].toString(16),t+=e[1].toString(16),t+=e[2].toString(16),t+=e[3].toString(16),t+="-",t+=e[4].toString(16),t+=e[5].toString(16),t+="-",t+=e[6].toString(16),t+=e[7].toString(16),t+="-",t+=e[8].toString(16),t+=e[9].toString(16),t+="-",t+=e[10].toString(16),t+=e[11].toString(16),t+=e[12].toString(16),t+=e[13].toString(16),t+=e[14].toString(16),t+=e[15].toString(16),t}var Sr="STORE_KEY_PRIVATE_KEY",_t="STORE_KEY_PUBLIC_JWK",St="ECDSA",Rr="P-256",ui={name:St,namedCurve:Rr},di={name:St,namedCurve:Rr};function fi(){return ie(this,null,function*(){let e=yield hi();if(!e){console.info("unable to create public key or webcrypto is unsupported");return}let{subtle:t}=window.crypto,r=yield ge(Sr);if(!r||!t){console.info("unable to find private key or webcrypto unsupported");return}let a={iat:Math.floor(new Date().getTime()/1e3),jti:ci()},l={typ:"dpop+jwt",alg:"ES256",jwk:e},s={protected:ar(JSON.stringify(l)),claims:ar(JSON.stringify(a))},v=vi(`${s.protected}.${s.claims}`),f={name:St,hash:{name:"SHA-256"}},I=yi(new Uint8Array(yield t.sign(f,r,v)));return`${s.protected}.${s.claims}.${I}`})}function hi(){return ie(this,null,function*(){if(!mi()){console.info("webcrypto is not supported");return}return(yield ge(_t))||(yield pi()),ge(_t)})}function pi(){return ie(this,null,function*(){let e=null,{subtle:t}=window.crypto,r=yield t.generateKey(ui,!0,["sign"]),a=yield t.exportKey("jwk",r.privateKey);e=yield t.exportKey("jwk",r.publicKey);let l=yield t.importKey("jwk",a,di,!1,["sign"]);yield $e(Sr,l),yield $e(_t,e)})}function mi(){let e=typeof window<"u"&&!!window.crypto,t=e&&!!window.crypto.subtle;return e&&t}function ar(e){return Mr(gi(e))}function vi(e){return new TextEncoder().encode(e)}function Mr(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+/g,"")}function gi(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(t,r)=>String.fromCharCode(parseInt(r,16)))}function yi(e){let t="";return e.forEach(r=>{t+=String.fromCharCode(r)}),Mr(t)}var Ei=class extends we{constructor(){super(...arguments),this.localForageKey="mc_active_wallet"}connectWithUI(){let e=Ot((t,r)=>ie(this,null,function*(){try{if(this.isMetaMaskBrowser()&&(yield this.isWalletEnabled(he.MetaMask))){let f=yield this.autoConnectIfWalletBrowser(he.MetaMask);t(f);return}if(this.isCoinbaseWalletBrowser()&&(yield this.isWalletEnabled(he.CoinbaseWallet))){let f=yield this.autoConnectIfWalletBrowser(he.CoinbaseWallet);t(f);return}let a=this.getUserEnv(),l=D($.Login,[a]),s=this.request(l);s.on(Qe.WalletSelected,f=>this.handleWalletSelected(mr(bt({},f),{payloadId:l.id}))),s.on("id-token-created",f=>{e.emit("id-token-created",f)});let v=yield s;v.error&&r(v),t(v)}catch(a){r(a)}}));return e}showUI(){return this.request(D($.ShowUI))}showAddress(){return this.request(D($.ShowAddress))}showSendTokensUI(){return this.request(D($.ShowSendTokensUI))}showOnRamp(){return this.request(D($.ShowOnRamp))}showNFTs(){return this.request(D($.ShowNFTs))}showBalances(){return this.request(D($.ShowBalances))}sendGaslessTransaction(e,t){return this.request(D($.SendGaslessTransaction,[[e,t]]))}getInfo(){return ie(this,null,function*(){ce({method:"wallet.getInfo()",removalVersions:ue,useInstead:"user.getInfo()"}).log();let e=yield ge(this.localForageKey),t=D($.GetInfo,[{walletType:e}]);return this.request(t)})}disconnect(){ce({method:"wallet.disconnect()",removalVersions:ue,useInstead:"user.logout()"}).log(),At(this.localForageKey);let e=D($.Disconnect);return this.request(e)}requestUserInfoWithUI(e){ce({method:"wallet.requestUserInfoWithUI()",removalVersions:ue,useInstead:"user.requestUserInfoWithUI()"}).log();let t=D($.RequestUserInfoWithUI,e?[e]:[]);return this.request(t)}getProvider(){return ie(this,null,function*(){switch(yield ge(this.localForageKey)){case he.MetaMask:return this.getMetaMaskProvider();case he.CoinbaseWallet:return this.getCoinbaseProvider();default:return this.sdk.rpcProvider}})}isMetaMaskInstalled(){var e,t,r;return((e=window.ethereum)==null?void 0:e.isMetaMask)||!!((r=(t=window.ethereum)==null?void 0:t.providers)!=null&&r.find(a=>a==null?void 0:a.isMetaMask))}isMetaMaskBrowser(){return this.isMobile()&&this.isMetaMaskInstalled()}getMetaMaskProvider(){var e,t;return((t=(e=window.ethereum)==null?void 0:e.providers)==null?void 0:t.find(r=>r==null?void 0:r.isMetaMask))||window.ethereum}connectToMetaMask(){if(this.isMobile()&&!this.isMetaMaskInstalled()){let e=`https://metamask.app.link/dapp/${window.location.href.replace(/(^\w+:|^)\/\//,"")}`;window.location.href=e}return this.getMetaMaskProvider().request({method:"eth_requestAccounts"})}isCoinbaseWalletInstalled(){var e,t,r;return((e=window.ethereum)==null?void 0:e.isCoinbaseWallet)||!!((r=(t=window.ethereum)==null?void 0:t.providers)!=null&&r.find(a=>a==null?void 0:a.isCoinbaseWallet))}isCoinbaseWalletBrowser(){var e;return!!((e=window.ethereum)!=null&&e.isCoinbaseBrowser)}getCoinbaseProvider(){var e,t;return((t=(e=window.ethereum)==null?void 0:e.providers)==null?void 0:t.find(r=>r==null?void 0:r.isCoinbaseWallet))||window.ethereum}connectToCoinbaseWallet(){if(this.isMobile()&&!this.isCoinbaseWalletBrowser()){let e=`https://go.cb-w.com/dapp?cb_url=${encodeURIComponent(window.location.href)}`;window.location.href=e}return this.getCoinbaseProvider().request({method:"eth_requestAccounts"})}isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Silk|Opera Mini/i.test(navigator.userAgent)}getUserEnv(){return{env:{isMetaMaskInstalled:this.isMetaMaskInstalled(),isCoinbaseWalletInstalled:this.isCoinbaseWalletInstalled()}}}connectToThirdPartyWallet(e){switch(e){case he.MetaMask:return this.connectToMetaMask();case he.CoinbaseWallet:return this.connectToCoinbaseWallet();default:throw new Error(`Invalid provider: ${e}. Must be one of "metamask" or "coinbase_wallet".`)}}isWalletEnabled(e){let t=D("mc_is_wallet_enabled",[{wallet:e}]);return this.request(t)}handleWalletSelected(e){return ie(this,null,function*(){try{let t=yield this.connectToThirdPartyWallet(e.wallet);yield $e(this.localForageKey,e.wallet),this.createIntermediaryEvent(Qe.WalletConnected,e.payloadId)(t)}catch(t){console.error(t),this.createIntermediaryEvent(Qe.WalletRejected,e.payloadId)()}})}autoConnectIfWalletBrowser(e){return ie(this,null,function*(){let t;e===he.MetaMask&&(t=yield this.getMetaMaskProvider().request({method:"eth_requestAccounts"})),e===he.CoinbaseWallet&&(t=yield this.getCoinbaseProvider().request({method:"eth_requestAccounts"})),yield $e(this.localForageKey,e);let r=D($.AutoConnect,[{wallet:e,address:t}]);return this.request(r)})}},{createBoundEmitterMethod:Ye,createChainingEmitterMethod:Re}=wr(),_i=class extends we{constructor(){super(...arguments),this.isMagic=!0,this.on=Re("on",this),this.once=Re("once",this),this.addListener=Re("addListener",this),this.off=Re("off",this),this.removeListener=Re("removeListener",this),this.removeAllListeners=Re("removeAllListeners",this),this.emit=Ye("emit"),this.eventNames=Ye("eventNames"),this.listeners=Ye("listeners"),this.listenerCount=Ye("listenerCount")}sendAsync(t,r){if(!r)throw Vo({procedure:"Magic.rpcProvider.sendAsync",argument:1,expected:"function",received:r===null?"null":typeof r});if(Array.isArray(t))this.overlay.post(tt.MAGIC_HANDLE_REQUEST,t.map(a=>{let l=nt(a);return this.prefixPayloadMethodForTestMode(l),l})).then(a=>{r(null,a.map(l=>mr(bt({},l.payload),{error:l.hasError?new rt(l.payload.error):null})))});else{let a=nt(t);this.prefixPayloadMethodForTestMode(a),this.overlay.post(tt.MAGIC_HANDLE_REQUEST,a).then(l=>{r(l.hasError?new rt(l.payload.error):null,l.payload)})}}send(t,r){if(typeof t=="string"){let l=D(t,Array.isArray(r)?r:[]);return this.request(l)}if(Array.isArray(t)||r){this.sendAsync(t,r);return}let a=Xo();return a.log(),new Nt(t).applyError({code:-32603,message:a.rawMessage}).payload}enable(){let t=D($.Login);return this.request(t)}request(t){return this.prefixPayloadMethodForTestMode(t),super.request(t)}prefixPayloadMethodForTestMode(t){let r="testMode/eth/";this.sdk.testMode&&(t.method=`${r}${t.method}`)}},sr=["request","overlay","sdk"];function Ii(e){let t=Object.getPrototypeOf(e),r=[t];for(;t!==we.prototype;)t=Object.getPrototypeOf(t),r.push(t);return r}var Tr=class extends we{constructor(){super(void 0),this.__sdk_access_field_descriptors__=new Map,this.__is_initialized__=!1,this.utils={createPromiEvent:Ot,isPromiEvent:ei,encodeJSON:gr,decodeJSON:Po,createJsonRpcRequestPayload:D,standardizeJsonRpcRequestPayload:nt,storage:Ar};let e=[this,...Ii(this)];sr.forEach(t=>{let r=e.map(v=>Object.getOwnPropertyDescriptor(v,t)),a=r.findIndex(v=>!!v),l=a>0,s=r[a];s&&(this.__sdk_access_field_descriptors__.set(t,{descriptor:s,isPrototypeField:l}),Object.defineProperty(this,t,{configurable:!0,get:()=>{throw Go(t)}}))})}init(e){this.__is_initialized__||(sr.forEach(t=>{if(this.__sdk_access_field_descriptors__.has(t)){let{descriptor:r,isPrototypeField:a}=this.__sdk_access_field_descriptors__.get(t);a?delete this[t]:Object.defineProperty(this,t,r)}}),this.sdk=e,this.__is_initialized__=!0)}createDeprecationWarning(e){let{method:t,removalVersion:r,useInstead:a}=e,l=a?` Use \`${a}\` instead.`:"",s=`\`${t}\` will be removed from this Extension in version \`${r}\`.${l}`;return new ir(this,"DEPRECATION_NOTICE",s)}createWarning(e,t){return new ir(this,e,t)}createError(e,t,r){return new Er(this,e,t,r)}},bi=class extends Tr{},Le=class extends Tr{};Le.Internal=bi,Le.Anonymous="anonymous extension";var wi=class extends we{purchase(e){let t=D($.NFTPurchase,[e]);return this.request(t)}checkout(e){let t=D($.NFTCheckout,[e]);return this.request(t)}transfer(e){let t=D($.NFTTransfer,[e]);return this.request(t)}};function lr(e){return e.compat&&e.compat[X.sdkName]!=null?typeof e.compat[X.sdkName]=="string"?Oo(Mo(X.version),e.compat[X.sdkName]):!!e.compat[X.sdkName]:!0}function Ni(e){var t;let r=(t=e==null?void 0:e.extensions)!=null?t:[],a={},l=[];if(Array.isArray(r)?r.forEach(s=>{lr(s)?(s.init(this),(s.name||s.name!==Le.Anonymous)&&(this[s.name]=s),s instanceof Le.Internal&&(Et(s.config)||(a[s.name]=s.config))):l.push(s)}):Object.keys(r).forEach(s=>{if(lr(r[s])){r[s].init(this);let v=r[s];this[s]=v,v instanceof Le.Internal&&(Et(v.config)||(a[r[s].name]=v.config))}else l.push(r[s])}),l.length)throw qo(l);return a}var Ze=class{constructor(e,t){this.apiKey=e;var r;if(!e)throw Fo();X.platform==="react-native"&&(t!=null&&t.endpoint)&&Ho().log();let{defaultEndpoint:a,version:l}=X;this.testMode=!!(t!=null&&t.testMode),this.endpoint=ot((r=t==null?void 0:t.endpoint)!=null?r:a).origin,this.auth=new ri(this),this.user=new li(this),this.wallet=new Ei(this),this.nft=new wi(this),this.rpcProvider=new _i(this);let s=Ni.call(this,t);this.parameters=gr(bt({API_KEY:this.apiKey,DOMAIN_ORIGIN:window.location?window.location.origin:"",ETH_NETWORK:t==null?void 0:t.network,host:ot(this.endpoint).host,sdk:Uo[X.sdkName],version:l,ext:Et(s)?void 0:s,locale:(t==null?void 0:t.locale)||"en_US"},X.bundleId?{bundleId:X.bundleId}:{}))}get overlay(){if(!Ze.__overlays__.has(this.parameters)){let e=new X.ViewController(this.endpoint,this.parameters);e.init(),Ze.__overlays__.set(this.parameters,e)}return Ze.__overlays__.get(this.parameters)}preload(){return ie(this,null,function*(){yield this.overlay.ready})}},Lr=Ze;Lr.__overlays__=new Map;function Oi(e,t){return t&&Array.isArray(e)?e.find(r=>r.id===t):e}function Ai(e,t){var r;let a=(r=t.data.response)==null?void 0:r.id,l=Oi(e,a);if(a&&l){let s=new Nt(l).applyResult(t.data.response.result).applyError(t.data.response.error);return{id:a,response:s}}return{}}function Si(e,t){return ie(this,null,function*(){let r=yield ge("rt"),a;if(X.platform==="web")try{a=yield fi()}catch(l){console.error("webcrypto error",l)}return a?r?{msgType:e,payload:t,jwt:a,rt:r}:{msgType:e,payload:t,jwt:a}:{msgType:e,payload:t}})}function Ri(e){return ie(this,null,function*(){!e.data.rt||(yield $e("rt",e.data.rt))})}var Mi=class{constructor(e,t){this.endpoint=e,this.parameters=t,this.messageHandlers=new Set,this.ready=this.waitForReady(),this.listen()}post(e,t){return ie(this,null,function*(){return Or(r=>ie(this,null,function*(){yield this.ready;let a=[],l=Array.isArray(t)?t.map(I=>I.id):[],s=yield Si(`${e}-${this.parameters}`,t);yield this._post(s);let v=I=>g=>{let{id:E,response:h}=Ai(t,g);Ri(g),E&&h&&Array.isArray(t)&&l.includes(E)?(a.push(h),a.length===t.length&&(I(),r(a))):E&&h&&!Array.isArray(t)&&E===t.id&&(I(),r(h))},f=this.on(Me.MAGIC_HANDLE_RESPONSE,v(()=>f()))}))})}on(e,t){let r=t.bind(window),a=l=>{l.data.msgType===`${e}-${this.parameters}`&&r(l)};return this.messageHandlers.add(a),()=>this.messageHandlers.delete(a)}waitForReady(){return new Promise(e=>{this.on(Me.MAGIC_OVERLAY_READY,()=>e())})}listen(){this.on(Me.MAGIC_HIDE_OVERLAY,()=>{this.hideOverlay()}),this.on(Me.MAGIC_SHOW_OVERLAY,()=>{this.showOverlay()})}},Ti=Object.create,$r=Object.defineProperty,Li=Object.getOwnPropertyDescriptor,$i=Object.getOwnPropertyNames,ki=Object.getPrototypeOf,Pi=Object.prototype.hasOwnProperty,Je=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')}),kr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ci=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of $i(t))!Pi.call(e,l)&&l!==r&&$r(e,l,{get:()=>t[l],enumerable:!(a=Li(t,l))||a.enumerable});return e},Pr=(e,t,r)=>(r=e!=null?Ti(ki(e)):{},Ci(t||!e||!e.__esModule?$r(r,"default",{value:e,enumerable:!0}):r,e)),et=(e,t,r)=>new Promise((a,l)=>{var s=I=>{try{f(r.next(I))}catch(g){l(g)}},v=I=>{try{f(r.throw(I))}catch(g){l(g)}},f=I=>I.done?a(I.value):Promise.resolve(I.value).then(s,v);f((r=r.apply(e,t)).next())}),ji=kr((e,t)=>{(function(r){if(typeof e=="object"&&typeof t<"u")t.exports=r();else if(typeof define=="function"&&define.amd)define([],r);else{var a;typeof window<"u"?a=window:typeof Se<"u"?a=Se:typeof self<"u"?a=self:a=this,a.localforage=r()}})(function(){return function r(a,l,s){function v(g,E){if(!l[g]){if(!a[g]){var h=typeof Je=="function"&&Je;if(!E&&h)return h(g,!0);if(f)return f(g,!0);var S=new Error("Cannot find module '"+g+"'");throw S.code="MODULE_NOT_FOUND",S}var C=l[g]={exports:{}};a[g][0].call(C.exports,function(P){var F=a[g][1][P];return v(F||P)},C,C.exports,r,a,l,s)}return l[g].exports}for(var f=typeof Je=="function"&&Je,I=0;I<s.length;I++)v(s[I]);return v}({1:[function(r,a,l){(function(s){var v=s.MutationObserver||s.WebKitMutationObserver,f;if(v){var I=0,g=new v(P),E=s.document.createTextNode("");g.observe(E,{characterData:!0}),f=function(){E.data=I=++I%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var h=new s.MessageChannel;h.port1.onmessage=P,f=function(){h.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?f=function(){var R=s.document.createElement("script");R.onreadystatechange=function(){P(),R.onreadystatechange=null,R.parentNode.removeChild(R),R=null},s.document.documentElement.appendChild(R)}:f=function(){setTimeout(P,0)};var S,C=[];function P(){S=!0;for(var R,Y,q=C.length;q;){for(Y=C,C=[],R=-1;++R<q;)Y[R]();q=C.length}S=!1}a.exports=F;function F(R){C.push(R)===1&&!S&&f()}}).call(this,typeof Se<"u"?Se:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,a,l){var s=r(1);function v(){}var f={},I=["REJECTED"],g=["FULFILLED"],E=["PENDING"];a.exports=h;function h(O){if(typeof O!="function")throw new TypeError("resolver must be a function");this.state=E,this.queue=[],this.outcome=void 0,O!==v&&F(this,O)}h.prototype.catch=function(O){return this.then(null,O)},h.prototype.then=function(O,U){if(typeof O!="function"&&this.state===g||typeof U!="function"&&this.state===I)return this;var j=new this.constructor(v);if(this.state!==E){var B=this.state===g?O:U;C(j,B,this.outcome)}else this.queue.push(new S(j,O,U));return j};function S(O,U,j){this.promise=O,typeof U=="function"&&(this.onFulfilled=U,this.callFulfilled=this.otherCallFulfilled),typeof j=="function"&&(this.onRejected=j,this.callRejected=this.otherCallRejected)}S.prototype.callFulfilled=function(O){f.resolve(this.promise,O)},S.prototype.otherCallFulfilled=function(O){C(this.promise,this.onFulfilled,O)},S.prototype.callRejected=function(O){f.reject(this.promise,O)},S.prototype.otherCallRejected=function(O){C(this.promise,this.onRejected,O)};function C(O,U,j){s(function(){var B;try{B=U(j)}catch(Q){return f.reject(O,Q)}B===O?f.reject(O,new TypeError("Cannot resolve promise with itself")):f.resolve(O,B)})}f.resolve=function(O,U){var j=R(P,U);if(j.status==="error")return f.reject(O,j.value);var B=j.value;if(B)F(O,B);else{O.state=g,O.outcome=U;for(var Q=-1,ne=O.queue.length;++Q<ne;)O.queue[Q].callFulfilled(U)}return O},f.reject=function(O,U){O.state=I,O.outcome=U;for(var j=-1,B=O.queue.length;++j<B;)O.queue[j].callRejected(U);return O};function P(O){var U=O&&O.then;if(O&&(typeof O=="object"||typeof O=="function")&&typeof U=="function")return function(){U.apply(O,arguments)}}function F(O,U){var j=!1;function B(se){j||(j=!0,f.reject(O,se))}function Q(se){j||(j=!0,f.resolve(O,se))}function ne(){U(Q,B)}var ae=R(ne);ae.status==="error"&&B(ae.value)}function R(O,U){var j={};try{j.value=O(U),j.status="success"}catch(B){j.status="error",j.value=B}return j}h.resolve=Y;function Y(O){return O instanceof this?O:f.resolve(new this(v),O)}h.reject=q;function q(O){var U=new this(v);return f.reject(U,O)}h.all=V;function V(O){var U=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=O.length,B=!1;if(!j)return this.resolve([]);for(var Q=new Array(j),ne=0,ae=-1,se=new this(v);++ae<j;)fe(O[ae],ae);return se;function fe(Ee,Ne){U.resolve(Ee).then(Pe,function(pe){B||(B=!0,f.reject(se,pe))});function Pe(pe){Q[Ne]=pe,++ne===j&&!B&&(B=!0,f.resolve(se,Q))}}}h.race=de;function de(O){var U=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=O.length,B=!1;if(!j)return this.resolve([]);for(var Q=-1,ne=new this(v);++Q<j;)ae(O[Q]);return ne;function ae(se){U.resolve(se).then(function(fe){B||(B=!0,f.resolve(ne,fe))},function(fe){B||(B=!0,f.reject(ne,fe))})}}},{1:1}],3:[function(r,a,l){(function(s){typeof s.Promise!="function"&&(s.Promise=r(2))}).call(this,typeof Se<"u"?Se:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,a,l){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function v(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function f(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var I=f();function g(){try{if(!I||!I.open)return!1;var n=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),o=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!n||o)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function E(n,o){n=n||[],o=o||{};try{return new Blob(n,o)}catch(d){if(d.name!=="TypeError")throw d;for(var i=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,u=new i,c=0;c<n.length;c+=1)u.append(n[c]);return u.getBlob(o.type)}}typeof Promise>"u"&&r(3);var h=Promise;function S(n,o){o&&n.then(function(i){o(null,i)},function(i){o(i)})}function C(n,o,i){typeof o=="function"&&n.then(o),typeof i=="function"&&n.catch(i)}function P(n){return typeof n!="string"&&(console.warn(n+" used as a key, but it is not a string."),n=String(n)),n}function F(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var R="local-forage-detect-blob-support",Y=void 0,q={},V=Object.prototype.toString,de="readonly",O="readwrite";function U(n){for(var o=n.length,i=new ArrayBuffer(o),u=new Uint8Array(i),c=0;c<o;c++)u[c]=n.charCodeAt(c);return i}function j(n){return new h(function(o){var i=n.transaction(R,O),u=E([""]);i.objectStore(R).put(u,"key"),i.onabort=function(c){c.preventDefault(),c.stopPropagation(),o(!1)},i.oncomplete=function(){var c=navigator.userAgent.match(/Chrome\/(\d+)/),d=navigator.userAgent.match(/Edge\//);o(d||!c||parseInt(c[1],10)>=43)}}).catch(function(){return!1})}function B(n){return typeof Y=="boolean"?h.resolve(Y):j(n).then(function(o){return Y=o,Y})}function Q(n){var o=q[n.name],i={};i.promise=new h(function(u,c){i.resolve=u,i.reject=c}),o.deferredOperations.push(i),o.dbReady?o.dbReady=o.dbReady.then(function(){return i.promise}):o.dbReady=i.promise}function ne(n){var o=q[n.name],i=o.deferredOperations.pop();if(i)return i.resolve(),i.promise}function ae(n,o){var i=q[n.name],u=i.deferredOperations.pop();if(u)return u.reject(o),u.promise}function se(n,o){return new h(function(i,u){if(q[n.name]=q[n.name]||L(),n.db)if(o)Q(n),n.db.close();else return i(n.db);var c=[n.name];o&&c.push(n.version);var d=I.open.apply(I,c);o&&(d.onupgradeneeded=function(m){var y=d.result;try{y.createObjectStore(n.storeName),m.oldVersion<=1&&y.createObjectStore(R)}catch(N){if(N.name==="ConstraintError")console.warn('The database "'+n.name+'" has been upgraded from version '+m.oldVersion+" to version "+m.newVersion+', but the storage "'+n.storeName+'" already exists.');else throw N}}),d.onerror=function(m){m.preventDefault(),u(d.error)},d.onsuccess=function(){var m=d.result;m.onversionchange=function(y){y.target.close()},i(m),ne(n)}})}function fe(n){return se(n,!1)}function Ee(n){return se(n,!0)}function Ne(n,o){if(!n.db)return!0;var i=!n.db.objectStoreNames.contains(n.storeName),u=n.version<n.db.version,c=n.version>n.db.version;if(u&&(n.version!==o&&console.warn('The database "'+n.name+`" can't be downgraded from version `+n.db.version+" to version "+n.version+"."),n.version=n.db.version),c||i){if(i){var d=n.db.version+1;d>n.version&&(n.version=d)}return!0}return!1}function Pe(n){return new h(function(o,i){var u=new FileReader;u.onerror=i,u.onloadend=function(c){var d=btoa(c.target.result||"");o({__local_forage_encoded_blob:!0,data:d,type:n.type})},u.readAsBinaryString(n)})}function pe(n){var o=U(atob(n.data));return E([o],{type:n.type})}function p(n){return n&&n.__local_forage_encoded_blob}function _(n){var o=this,i=o._initReady().then(function(){var u=q[o._dbInfo.name];if(u&&u.dbReady)return u.dbReady});return C(i,n,n),i}function A(n){Q(n);for(var o=q[n.name],i=o.forages,u=0;u<i.length;u++){var c=i[u];c._dbInfo.db&&(c._dbInfo.db.close(),c._dbInfo.db=null)}return n.db=null,fe(n).then(function(d){return n.db=d,Ne(n)?Ee(n):d}).then(function(d){n.db=o.db=d;for(var m=0;m<i.length;m++)i[m]._dbInfo.db=d}).catch(function(d){throw ae(n,d),d})}function M(n,o,i,u){u===void 0&&(u=1);try{var c=n.db.transaction(n.storeName,o);i(null,c)}catch(d){if(u>0&&(!n.db||d.name==="InvalidStateError"||d.name==="NotFoundError"))return h.resolve().then(function(){if(!n.db||d.name==="NotFoundError"&&!n.db.objectStoreNames.contains(n.storeName)&&n.version<=n.db.version)return n.db&&(n.version=n.db.version+1),Ee(n)}).then(function(){return A(n).then(function(){M(n,o,i,u-1)})}).catch(i);i(d)}}function L(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function k(n){var o=this,i={db:null};if(n)for(var u in n)i[u]=n[u];var c=q[i.name];c||(c=L(),q[i.name]=c),c.forages.push(o),o._initReady||(o._initReady=o.ready,o.ready=_);var d=[];function m(){return h.resolve()}for(var y=0;y<c.forages.length;y++){var N=c.forages[y];N!==o&&d.push(N._initReady().catch(m))}var w=c.forages.slice(0);return h.all(d).then(function(){return i.db=c.db,fe(i)}).then(function(b){return i.db=b,Ne(i,o._defaultConfig.version)?Ee(i):b}).then(function(b){i.db=c.db=b,o._dbInfo=i;for(var T=0;T<w.length;T++){var x=w[T];x!==o&&(x._dbInfo.db=i.db,x._dbInfo.version=i.version)}})}function H(n,o){var i=this;n=P(n);var u=new h(function(c,d){i.ready().then(function(){M(i._dbInfo,de,function(m,y){if(m)return d(m);try{var N=y.objectStore(i._dbInfo.storeName),w=N.get(n);w.onsuccess=function(){var b=w.result;b===void 0&&(b=null),p(b)&&(b=pe(b)),c(b)},w.onerror=function(){d(w.error)}}catch(b){d(b)}})}).catch(d)});return S(u,o),u}function te(n,o){var i=this,u=new h(function(c,d){i.ready().then(function(){M(i._dbInfo,de,function(m,y){if(m)return d(m);try{var N=y.objectStore(i._dbInfo.storeName),w=N.openCursor(),b=1;w.onsuccess=function(){var T=w.result;if(T){var x=T.value;p(x)&&(x=pe(x));var z=n(x,T.key,b++);z!==void 0?c(z):T.continue()}else c()},w.onerror=function(){d(w.error)}}catch(T){d(T)}})}).catch(d)});return S(u,o),u}function Oe(n,o,i){var u=this;n=P(n);var c=new h(function(d,m){var y;u.ready().then(function(){return y=u._dbInfo,V.call(o)==="[object Blob]"?B(y.db).then(function(N){return N?o:Pe(o)}):o}).then(function(N){M(u._dbInfo,O,function(w,b){if(w)return m(w);try{var T=b.objectStore(u._dbInfo.storeName);N===null&&(N=void 0);var x=T.put(N,n);b.oncomplete=function(){N===void 0&&(N=null),d(N)},b.onabort=b.onerror=function(){var z=x.error?x.error:x.transaction.error;m(z)}}catch(z){m(z)}})}).catch(m)});return S(c,i),c}function _e(n,o){var i=this;n=P(n);var u=new h(function(c,d){i.ready().then(function(){M(i._dbInfo,O,function(m,y){if(m)return d(m);try{var N=y.objectStore(i._dbInfo.storeName),w=N.delete(n);y.oncomplete=function(){c()},y.onerror=function(){d(w.error)},y.onabort=function(){var b=w.error?w.error:w.transaction.error;d(b)}}catch(b){d(b)}})}).catch(d)});return S(u,o),u}function Ce(n){var o=this,i=new h(function(u,c){o.ready().then(function(){M(o._dbInfo,O,function(d,m){if(d)return c(d);try{var y=m.objectStore(o._dbInfo.storeName),N=y.clear();m.oncomplete=function(){u()},m.onabort=m.onerror=function(){var w=N.error?N.error:N.transaction.error;c(w)}}catch(w){c(w)}})}).catch(c)});return S(i,n),i}function Cr(n){var o=this,i=new h(function(u,c){o.ready().then(function(){M(o._dbInfo,de,function(d,m){if(d)return c(d);try{var y=m.objectStore(o._dbInfo.storeName),N=y.count();N.onsuccess=function(){u(N.result)},N.onerror=function(){c(N.error)}}catch(w){c(w)}})}).catch(c)});return S(i,n),i}function jr(n,o){var i=this,u=new h(function(c,d){if(n<0){c(null);return}i.ready().then(function(){M(i._dbInfo,de,function(m,y){if(m)return d(m);try{var N=y.objectStore(i._dbInfo.storeName),w=!1,b=N.openKeyCursor();b.onsuccess=function(){var T=b.result;if(!T){c(null);return}n===0||w?c(T.key):(w=!0,T.advance(n))},b.onerror=function(){d(b.error)}}catch(T){d(T)}})}).catch(d)});return S(u,o),u}function Dr(n){var o=this,i=new h(function(u,c){o.ready().then(function(){M(o._dbInfo,de,function(d,m){if(d)return c(d);try{var y=m.objectStore(o._dbInfo.storeName),N=y.openKeyCursor(),w=[];N.onsuccess=function(){var b=N.result;if(!b){u(w);return}w.push(b.key),b.continue()},N.onerror=function(){c(N.error)}}catch(b){c(b)}})}).catch(c)});return S(i,n),i}function xr(n,o){o=F.apply(this,arguments);var i=this.config();n=typeof n!="function"&&n||{},n.name||(n.name=n.name||i.name,n.storeName=n.storeName||i.storeName);var u=this,c;if(!n.name)c=h.reject("Invalid arguments");else{var d=n.name===i.name&&u._dbInfo.db,m=d?h.resolve(u._dbInfo.db):fe(n).then(function(y){var N=q[n.name],w=N.forages;N.db=y;for(var b=0;b<w.length;b++)w[b]._dbInfo.db=y;return y});n.storeName?c=m.then(function(y){if(y.objectStoreNames.contains(n.storeName)){var N=y.version+1;Q(n);var w=q[n.name],b=w.forages;y.close();for(var T=0;T<b.length;T++){var x=b[T];x._dbInfo.db=null,x._dbInfo.version=N}var z=new h(function(W,J){var K=I.open(n.name,N);K.onerror=function(le){var pt=K.result;pt.close(),J(le)},K.onupgradeneeded=function(){var le=K.result;le.deleteObjectStore(n.storeName)},K.onsuccess=function(){var le=K.result;le.close(),W(le)}});return z.then(function(W){w.db=W;for(var J=0;J<b.length;J++){var K=b[J];K._dbInfo.db=W,ne(K._dbInfo)}}).catch(function(W){throw(ae(n,W)||h.resolve()).catch(function(){}),W})}}):c=m.then(function(y){Q(n);var N=q[n.name],w=N.forages;y.close();for(var b=0;b<w.length;b++){var T=w[b];T._dbInfo.db=null}var x=new h(function(z,W){var J=I.deleteDatabase(n.name);J.onerror=function(){var K=J.result;K&&K.close(),W(J.error)},J.onblocked=function(){console.warn('dropInstance blocked for database "'+n.name+'" until all open connections are closed')},J.onsuccess=function(){var K=J.result;K&&K.close(),z(K)}});return x.then(function(z){N.db=z;for(var W=0;W<w.length;W++){var J=w[W];ne(J._dbInfo)}}).catch(function(z){throw(ae(n,z)||h.resolve()).catch(function(){}),z})})}return S(c,o),c}var Ur={_driver:"asyncStorage",_initStorage:k,_support:g(),iterate:te,getItem:H,setItem:Oe,removeItem:_e,clear:Ce,length:Cr,key:jr,keys:Dr,dropInstance:xr};function Fr(){return typeof openDatabase=="function"}var me="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Br="~~local_forage_type~",Rt=/^~~local_forage_type~([^~]+)~/,qe="__lfsc__:",st=qe.length,lt="arbf",ct="blob",Mt="si08",Tt="ui08",Lt="uic8",$t="si16",kt="si32",Pt="ur16",Ct="ui32",jt="fl32",Dt="fl64",xt=st+lt.length,Ut=Object.prototype.toString;function Ft(n){var o=n.length*.75,i=n.length,u,c=0,d,m,y,N;n[n.length-1]==="="&&(o--,n[n.length-2]==="="&&o--);var w=new ArrayBuffer(o),b=new Uint8Array(w);for(u=0;u<i;u+=4)d=me.indexOf(n[u]),m=me.indexOf(n[u+1]),y=me.indexOf(n[u+2]),N=me.indexOf(n[u+3]),b[c++]=d<<2|m>>4,b[c++]=(m&15)<<4|y>>2,b[c++]=(y&3)<<6|N&63;return w}function ut(n){var o=new Uint8Array(n),i="",u;for(u=0;u<o.length;u+=3)i+=me[o[u]>>2],i+=me[(o[u]&3)<<4|o[u+1]>>4],i+=me[(o[u+1]&15)<<2|o[u+2]>>6],i+=me[o[u+2]&63];return o.length%3===2?i=i.substring(0,i.length-1)+"=":o.length%3===1&&(i=i.substring(0,i.length-2)+"=="),i}function Wr(n,o){var i="";if(n&&(i=Ut.call(n)),n&&(i==="[object ArrayBuffer]"||n.buffer&&Ut.call(n.buffer)==="[object ArrayBuffer]")){var u,c=qe;n instanceof ArrayBuffer?(u=n,c+=lt):(u=n.buffer,i==="[object Int8Array]"?c+=Mt:i==="[object Uint8Array]"?c+=Tt:i==="[object Uint8ClampedArray]"?c+=Lt:i==="[object Int16Array]"?c+=$t:i==="[object Uint16Array]"?c+=Pt:i==="[object Int32Array]"?c+=kt:i==="[object Uint32Array]"?c+=Ct:i==="[object Float32Array]"?c+=jt:i==="[object Float64Array]"?c+=Dt:o(new Error("Failed to get type for BinaryArray"))),o(c+ut(u))}else if(i==="[object Blob]"){var d=new FileReader;d.onload=function(){var m=Br+n.type+"~"+ut(this.result);o(qe+ct+m)},d.readAsArrayBuffer(n)}else try{o(JSON.stringify(n))}catch(m){console.error("Couldn't convert value into a JSON string: ",n),o(null,m)}}function Gr(n){if(n.substring(0,st)!==qe)return JSON.parse(n);var o=n.substring(xt),i=n.substring(st,xt),u;if(i===ct&&Rt.test(o)){var c=o.match(Rt);u=c[1],o=o.substring(c[0].length)}var d=Ft(o);switch(i){case lt:return d;case ct:return E([d],{type:u});case Mt:return new Int8Array(d);case Tt:return new Uint8Array(d);case Lt:return new Uint8ClampedArray(d);case $t:return new Int16Array(d);case Pt:return new Uint16Array(d);case kt:return new Int32Array(d);case Ct:return new Uint32Array(d);case jt:return new Float32Array(d);case Dt:return new Float64Array(d);default:throw new Error("Unkown type: "+i)}}var dt={serialize:Wr,deserialize:Gr,stringToBuffer:Ft,bufferToString:ut};function Bt(n,o,i,u){n.executeSql("CREATE TABLE IF NOT EXISTS "+o.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],i,u)}function qr(n){var o=this,i={db:null};if(n)for(var u in n)i[u]=typeof n[u]!="string"?n[u].toString():n[u];var c=new h(function(d,m){try{i.db=openDatabase(i.name,String(i.version),i.description,i.size)}catch(y){return m(y)}i.db.transaction(function(y){Bt(y,i,function(){o._dbInfo=i,d()},function(N,w){m(w)})},m)});return i.serializer=dt,c}function ve(n,o,i,u,c,d){n.executeSql(i,u,c,function(m,y){y.code===y.SYNTAX_ERR?m.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[o.storeName],function(N,w){w.rows.length?d(N,y):Bt(N,o,function(){N.executeSql(i,u,c,d)},d)},d):d(m,y)},d)}function Vr(n,o){var i=this;n=P(n);var u=new h(function(c,d){i.ready().then(function(){var m=i._dbInfo;m.db.transaction(function(y){ve(y,m,"SELECT * FROM "+m.storeName+" WHERE key = ? LIMIT 1",[n],function(N,w){var b=w.rows.length?w.rows.item(0).value:null;b&&(b=m.serializer.deserialize(b)),c(b)},function(N,w){d(w)})})}).catch(d)});return S(u,o),u}function zr(n,o){var i=this,u=new h(function(c,d){i.ready().then(function(){var m=i._dbInfo;m.db.transaction(function(y){ve(y,m,"SELECT * FROM "+m.storeName,[],function(N,w){for(var b=w.rows,T=b.length,x=0;x<T;x++){var z=b.item(x),W=z.value;if(W&&(W=m.serializer.deserialize(W)),W=n(W,z.key,x+1),W!==void 0){c(W);return}}c()},function(N,w){d(w)})})}).catch(d)});return S(u,o),u}function Wt(n,o,i,u){var c=this;n=P(n);var d=new h(function(m,y){c.ready().then(function(){o===void 0&&(o=null);var N=o,w=c._dbInfo;w.serializer.serialize(o,function(b,T){T?y(T):w.db.transaction(function(x){ve(x,w,"INSERT OR REPLACE INTO "+w.storeName+" (key, value) VALUES (?, ?)",[n,b],function(){m(N)},function(z,W){y(W)})},function(x){if(x.code===x.QUOTA_ERR){if(u>0){m(Wt.apply(c,[n,N,i,u-1]));return}y(x)}})})}).catch(y)});return S(d,i),d}function Xr(n,o,i){return Wt.apply(this,[n,o,i,1])}function Hr(n,o){var i=this;n=P(n);var u=new h(function(c,d){i.ready().then(function(){var m=i._dbInfo;m.db.transaction(function(y){ve(y,m,"DELETE FROM "+m.storeName+" WHERE key = ?",[n],function(){c()},function(N,w){d(w)})})}).catch(d)});return S(u,o),u}function Kr(n){var o=this,i=new h(function(u,c){o.ready().then(function(){var d=o._dbInfo;d.db.transaction(function(m){ve(m,d,"DELETE FROM "+d.storeName,[],function(){u()},function(y,N){c(N)})})}).catch(c)});return S(i,n),i}function Yr(n){var o=this,i=new h(function(u,c){o.ready().then(function(){var d=o._dbInfo;d.db.transaction(function(m){ve(m,d,"SELECT COUNT(key) as c FROM "+d.storeName,[],function(y,N){var w=N.rows.item(0).c;u(w)},function(y,N){c(N)})})}).catch(c)});return S(i,n),i}function Jr(n,o){var i=this,u=new h(function(c,d){i.ready().then(function(){var m=i._dbInfo;m.db.transaction(function(y){ve(y,m,"SELECT key FROM "+m.storeName+" WHERE id = ? LIMIT 1",[n+1],function(N,w){var b=w.rows.length?w.rows.item(0).key:null;c(b)},function(N,w){d(w)})})}).catch(d)});return S(u,o),u}function Qr(n){var o=this,i=new h(function(u,c){o.ready().then(function(){var d=o._dbInfo;d.db.transaction(function(m){ve(m,d,"SELECT key FROM "+d.storeName,[],function(y,N){for(var w=[],b=0;b<N.rows.length;b++)w.push(N.rows.item(b).key);u(w)},function(y,N){c(N)})})}).catch(c)});return S(i,n),i}function Zr(n){return new h(function(o,i){n.transaction(function(u){u.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(c,d){for(var m=[],y=0;y<d.rows.length;y++)m.push(d.rows.item(y).name);o({db:n,storeNames:m})},function(c,d){i(d)})},function(u){i(u)})})}function en(n,o){o=F.apply(this,arguments);var i=this.config();n=typeof n!="function"&&n||{},n.name||(n.name=n.name||i.name,n.storeName=n.storeName||i.storeName);var u=this,c;return n.name?c=new h(function(d){var m;n.name===i.name?m=u._dbInfo.db:m=openDatabase(n.name,"","",0),n.storeName?d({db:m,storeNames:[n.storeName]}):d(Zr(m))}).then(function(d){return new h(function(m,y){d.db.transaction(function(N){function w(z){return new h(function(W,J){N.executeSql("DROP TABLE IF EXISTS "+z,[],function(){W()},function(K,le){J(le)})})}for(var b=[],T=0,x=d.storeNames.length;T<x;T++)b.push(w(d.storeNames[T]));h.all(b).then(function(){m()}).catch(function(z){y(z)})},function(N){y(N)})})}):c=h.reject("Invalid arguments"),S(c,o),c}var tn={_driver:"webSQLStorage",_initStorage:qr,_support:Fr(),iterate:zr,getItem:Vr,setItem:Xr,removeItem:Hr,clear:Kr,length:Yr,key:Jr,keys:Qr,dropInstance:en};function rn(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Gt(n,o){var i=n.name+"/";return n.storeName!==o.storeName&&(i+=n.storeName+"/"),i}function nn(){var n="_localforage_support_test";try{return localStorage.setItem(n,!0),localStorage.removeItem(n),!1}catch{return!0}}function on(){return!nn()||localStorage.length>0}function an(n){var o=this,i={};if(n)for(var u in n)i[u]=n[u];return i.keyPrefix=Gt(n,o._defaultConfig),on()?(o._dbInfo=i,i.serializer=dt,h.resolve()):h.reject()}function sn(n){var o=this,i=o.ready().then(function(){for(var u=o._dbInfo.keyPrefix,c=localStorage.length-1;c>=0;c--){var d=localStorage.key(c);d.indexOf(u)===0&&localStorage.removeItem(d)}});return S(i,n),i}function ln(n,o){var i=this;n=P(n);var u=i.ready().then(function(){var c=i._dbInfo,d=localStorage.getItem(c.keyPrefix+n);return d&&(d=c.serializer.deserialize(d)),d});return S(u,o),u}function cn(n,o){var i=this,u=i.ready().then(function(){for(var c=i._dbInfo,d=c.keyPrefix,m=d.length,y=localStorage.length,N=1,w=0;w<y;w++){var b=localStorage.key(w);if(b.indexOf(d)===0){var T=localStorage.getItem(b);if(T&&(T=c.serializer.deserialize(T)),T=n(T,b.substring(m),N++),T!==void 0)return T}}});return S(u,o),u}function un(n,o){var i=this,u=i.ready().then(function(){var c=i._dbInfo,d;try{d=localStorage.key(n)}catch{d=null}return d&&(d=d.substring(c.keyPrefix.length)),d});return S(u,o),u}function dn(n){var o=this,i=o.ready().then(function(){for(var u=o._dbInfo,c=localStorage.length,d=[],m=0;m<c;m++){var y=localStorage.key(m);y.indexOf(u.keyPrefix)===0&&d.push(y.substring(u.keyPrefix.length))}return d});return S(i,n),i}function fn(n){var o=this,i=o.keys().then(function(u){return u.length});return S(i,n),i}function hn(n,o){var i=this;n=P(n);var u=i.ready().then(function(){var c=i._dbInfo;localStorage.removeItem(c.keyPrefix+n)});return S(u,o),u}function pn(n,o,i){var u=this;n=P(n);var c=u.ready().then(function(){o===void 0&&(o=null);var d=o;return new h(function(m,y){var N=u._dbInfo;N.serializer.serialize(o,function(w,b){if(b)y(b);else try{localStorage.setItem(N.keyPrefix+n,w),m(d)}catch(T){(T.name==="QuotaExceededError"||T.name==="NS_ERROR_DOM_QUOTA_REACHED")&&y(T),y(T)}})})});return S(c,i),c}function mn(n,o){if(o=F.apply(this,arguments),n=typeof n!="function"&&n||{},!n.name){var i=this.config();n.name=n.name||i.name,n.storeName=n.storeName||i.storeName}var u=this,c;return n.name?c=new h(function(d){n.storeName?d(Gt(n,u._defaultConfig)):d(n.name+"/")}).then(function(d){for(var m=localStorage.length-1;m>=0;m--){var y=localStorage.key(m);y.indexOf(d)===0&&localStorage.removeItem(y)}}):c=h.reject("Invalid arguments"),S(c,o),c}var vn={_driver:"localStorageWrapper",_initStorage:an,_support:rn(),iterate:cn,getItem:ln,setItem:pn,removeItem:hn,clear:sn,length:fn,key:un,keys:dn,dropInstance:mn},gn=function(n,o){return n===o||typeof n=="number"&&typeof o=="number"&&isNaN(n)&&isNaN(o)},yn=function(n,o){for(var i=n.length,u=0;u<i;){if(gn(n[u],o))return!0;u++}return!1},qt=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"},je={},Vt={},Ae={INDEXEDDB:Ur,WEBSQL:tn,LOCALSTORAGE:vn},En=[Ae.INDEXEDDB._driver,Ae.WEBSQL._driver,Ae.LOCALSTORAGE._driver],Ve=["dropInstance"],ft=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ve),_n={description:"",driver:En.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function In(n,o){n[o]=function(){var i=arguments;return n.ready().then(function(){return n[o].apply(n,i)})}}function ht(){for(var n=1;n<arguments.length;n++){var o=arguments[n];if(o)for(var i in o)o.hasOwnProperty(i)&&(qt(o[i])?arguments[0][i]=o[i].slice():arguments[0][i]=o[i])}return arguments[0]}var bn=function(){function n(o){v(this,n);for(var i in Ae)if(Ae.hasOwnProperty(i)){var u=Ae[i],c=u._driver;this[i]=c,je[c]||this.defineDriver(u)}this._defaultConfig=ht({},_n),this._config=ht({},this._defaultConfig,o),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return n.prototype.config=function(o){if((typeof o>"u"?"undefined":s(o))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var i in o){if(i==="storeName"&&(o[i]=o[i].replace(/\W/g,"_")),i==="version"&&typeof o[i]!="number")return new Error("Database version must be a number.");this._config[i]=o[i]}return"driver"in o&&o.driver?this.setDriver(this._config.driver):!0}else return typeof o=="string"?this._config[o]:this._config},n.prototype.defineDriver=function(o,i,u){var c=new h(function(d,m){try{var y=o._driver,N=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!o._driver){m(N);return}for(var w=ft.concat("_initStorage"),b=0,T=w.length;b<T;b++){var x=w[b],z=!yn(Ve,x);if((z||o[x])&&typeof o[x]!="function"){m(N);return}}var W=function(){for(var K=function(Nn){return function(){var On=new Error("Method "+Nn+" is not implemented by the current driver"),zt=h.reject(On);return S(zt,arguments[arguments.length-1]),zt}},le=0,pt=Ve.length;le<pt;le++){var mt=Ve[le];o[mt]||(o[mt]=K(mt))}};W();var J=function(K){je[y]&&console.info("Redefining LocalForage driver: "+y),je[y]=o,Vt[y]=K,d()};"_support"in o?o._support&&typeof o._support=="function"?o._support().then(J,m):J(!!o._support):J(!0)}catch(K){m(K)}});return C(c,i,u),c},n.prototype.driver=function(){return this._driver||null},n.prototype.getDriver=function(o,i,u){var c=je[o]?h.resolve(je[o]):h.reject(new Error("Driver not found."));return C(c,i,u),c},n.prototype.getSerializer=function(o){var i=h.resolve(dt);return C(i,o),i},n.prototype.ready=function(o){var i=this,u=i._driverSet.then(function(){return i._ready===null&&(i._ready=i._initDriver()),i._ready});return C(u,o,o),u},n.prototype.setDriver=function(o,i,u){var c=this;qt(o)||(o=[o]);var d=this._getSupportedDrivers(o);function m(){c._config.driver=c.driver()}function y(b){return c._extend(b),m(),c._ready=c._initStorage(c._config),c._ready}function N(b){return function(){var T=0;function x(){for(;T<b.length;){var z=b[T];return T++,c._dbInfo=null,c._ready=null,c.getDriver(z).then(y).catch(x)}m();var W=new Error("No available storage method found.");return c._driverSet=h.reject(W),c._driverSet}return x()}}var w=this._driverSet!==null?this._driverSet.catch(function(){return h.resolve()}):h.resolve();return this._driverSet=w.then(function(){var b=d[0];return c._dbInfo=null,c._ready=null,c.getDriver(b).then(function(T){c._driver=T._driver,m(),c._wrapLibraryMethodsWithReady(),c._initDriver=N(d)})}).catch(function(){m();var b=new Error("No available storage method found.");return c._driverSet=h.reject(b),c._driverSet}),C(this._driverSet,i,u),this._driverSet},n.prototype.supports=function(o){return!!Vt[o]},n.prototype._extend=function(o){ht(this,o)},n.prototype._getSupportedDrivers=function(o){for(var i=[],u=0,c=o.length;u<c;u++){var d=o[u];this.supports(d)&&i.push(d)}return i},n.prototype._wrapLibraryMethodsWithReady=function(){for(var o=0,i=ft.length;o<i;o++)In(this,ft[o])},n.prototype.createInstance=function(o){return new n(o)},n}(),wn=new bn;a.exports=wn},{3:3}]},{},[4])(4)})}),Di=kr((e,t)=>{(function(r,a){typeof e=="object"&&typeof t<"u"?a(e):typeof define=="function"&&define.amd?define("localforage-driver-memory",["exports"],a):a(r.LocalforageDriverMemory={})})(typeof self<"u"?self:e,function(r){var a="localforage-driver-memory";function l(p){var _=typeof Symbol=="function"&&p[Symbol.iterator],A=0;return _?_.call(p):{next:function(){return p&&A>=p.length&&(p=void 0),{value:p&&p[A++],done:!p}}}}function s(p,_){p=p||[],_=_||{};try{return new Blob(p,_)}catch(k){if(k.name!=="TypeError")throw k;for(var A=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,M=new A,L=0;L<p.length;L+=1)M.append(p[L]);return M.getBlob(_.type)}}var v=/^~~local_forage_type~([^~]+)~/,f=9,I=f+4,g=Object.prototype.toString;function E(p){var _=p.length*.75,A=p.length;p[p.length-1]==="="&&(_--,p[p.length-2]==="="&&_--);for(var M=new ArrayBuffer(_),L=new Uint8Array(M),k=0,H=0;k<A;k+=4){var te="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(p[k]),Oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(p[k+1]),_e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(p[k+2]),Ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(p[k+3]);L[H++]=te<<2|Oe>>4,L[H++]=(Oe&15)<<4|_e>>2,L[H++]=(_e&3)<<6|Ce&63}return M}function h(p){for(var _=new Uint8Array(p),A="",M=0;M<_.length;M+=3)A+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[_[M]>>2],A+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(_[M]&3)<<4|_[M+1]>>4],A+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(_[M+1]&15)<<2|_[M+2]>>6],A+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[_[M+2]&63];return _.length%3===2?A=A.substring(0,A.length-1)+"=":_.length%3===1&&(A=A.substring(0,A.length-2)+"=="),A}function S(p,_){var A="";if(p&&(A=g.call(p)),p&&(A==="[object ArrayBuffer]"||p.buffer&&g.call(p.buffer)==="[object ArrayBuffer]")){var M=void 0,L="__lfsc__:";p instanceof ArrayBuffer?(M=p,L+="arbf"):(M=p.buffer,A==="[object Int8Array]"?L+="si08":A==="[object Uint8Array]"?L+="ui08":A==="[object Uint8ClampedArray]"?L+="uic8":A==="[object Int16Array]"?L+="si16":A==="[object Uint16Array]"?L+="ur16":A==="[object Int32Array]"?L+="si32":A==="[object Uint32Array]"?L+="ui32":A==="[object Float32Array]"?L+="fl32":A==="[object Float64Array]"?L+="fl64":_(new Error("Failed to get type for BinaryArray"))),_(L+h(M))}else if(A==="[object Blob]"){var k=new FileReader;k.onload=function(){var H="~~local_forage_type~"+p.type+"~"+h(this.result);_("__lfsc__:blob"+H)},k.readAsArrayBuffer(p)}else try{_(JSON.stringify(p))}catch(H){console.error("Couldn't convert value into a JSON string: ",p),_(null,H)}}function C(p){if(p.substring(0,f)!=="__lfsc__:")return JSON.parse(p);var _=p.substring(I),A=p.substring(f,I),M;if(A==="blob"&&v.test(_)){var L=_.match(v);M=L[1],_=_.substring(L[0].length)}var k=E(_);switch(A){case"arbf":return k;case"blob":return s([k],{type:M});case"si08":return new Int8Array(k);case"ui08":return new Uint8Array(k);case"uic8":return new Uint8ClampedArray(k);case"si16":return new Int16Array(k);case"ur16":return new Uint16Array(k);case"si32":return new Int32Array(k);case"ui32":return new Uint32Array(k);case"fl32":return new Float32Array(k);case"fl64":return new Float64Array(k);default:throw new Error("Unkown type: "+A)}}function P(p){var _,A;if(p===null||typeof p!="object"||"isActiveClone"in p)return p;var M=p instanceof Date?new Date(p):p.constructor();try{for(var L=l(Object.keys(p)),k=L.next();!k.done;k=L.next()){var H=k.value;Object.prototype.hasOwnProperty.call(p,H)&&(p.isActiveClone=null,M[H]=P(p[H]),delete p.isActiveClone)}}catch(te){_={error:te}}finally{try{k&&!k.done&&(A=L.return)&&A.call(L)}finally{if(_)throw _.error}}return M}function F(p,_){return(p.name||_.name)+"/"+(p.storeName||_.storeName)+"/"}function R(p,_){_&&p.then(function(A){_(null,A)},function(A){_(A)})}function Y(){for(var p=[],_=0;_<arguments.length;_++)p[_]=arguments[_];if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}function q(p,_){var A=this;if(_=Y.apply(this,arguments),p=typeof p!="function"&&p||{},!p.name){var M=this.config();p.name=p.name||M.name,p.storeName=p.storeName||M.storeName}var L;return p.name?L=new Promise(function(k){p.storeName?k(F(p,A._defaultConfig)):k(p.name+"/")}):L=Promise.reject("Invalid arguments"),{promise:L,callback:_}}function V(p){return typeof p!="string"&&(console.warn(p+" used as a key, but it is not a string."),p=String(p)),p}var de={bufferToString:h,deserialize:C,serialize:S,stringToBuffer:E},O={},U=function(){function p(_){this.kp=_,this.data={}}return p.resolve=function(_){return O[_]||(O[_]=new p(_)),O[_]},p.prototype.clear=function(){this.data={}},p.prototype.drop=function(){this.clear(),delete O[this.kp]},p.prototype.get=function(_){return this.data[_]},p.prototype.key=function(_){return this.keys()[_]},p.prototype.keys=function(){return Object.keys(this.data)},p.prototype.rm=function(_){delete this.data[_]},p.prototype.set=function(_,A){this.data[_]=A},p}();function j(p){var _=p?P(p):{},A=F(_,this._defaultConfig),M=U.resolve(A);return this._dbInfo=_,this._dbInfo.serializer=de,this._dbInfo.keyPrefix=A,this._dbInfo.mStore=M,Promise.resolve()}function B(p){var _=this,A=this.ready().then(function(){_._dbInfo.mStore.clear()});return R(A,p),A}function Q(p,_){var A=q.apply(this,arguments),M=A.promise,L=A.callback,k=M.then(function(H){U.resolve(H).drop()});return R(k,L),M}function ne(p,_){var A=this;p=V(p);var M=this.ready().then(function(){var L=A._dbInfo.mStore.get(p);return L==null?null:A._dbInfo.serializer.deserialize(L)});return R(M,_),M}function ae(p,_){var A=this,M=this.ready().then(function(){for(var L=A._dbInfo.mStore,k=L.keys(),H=0;H<k.length;H++){var te=L.get(k[H]);if(te&&(te=A._dbInfo.serializer.deserialize(te)),te=p(te,k[H],H+1),te!==void 0)return te}});return R(M,_),M}function se(p,_){var A=this,M=this.ready().then(function(){var L;try{L=A._dbInfo.mStore.key(p),L===void 0&&(L=null)}catch{L=null}return L});return R(M,_),M}function fe(p){var _=this,A=this.ready().then(function(){return _._dbInfo.mStore.keys()});return R(A,p),A}function Ee(p){var _=this.keys().then(function(A){return A.length});return R(_,p),_}function Ne(p,_){var A=this;p=V(p);var M=this.ready().then(function(){A._dbInfo.mStore.rm(p)});return R(M,_),M}function Pe(p,_,A){var M=this;p=V(p);var L=this.ready().then(function(){_===void 0&&(_=null);var k=_;return new Promise(function(H,te){M._dbInfo.serializer.serialize(_,function(Oe,_e){if(_e)te(_e);else try{M._dbInfo.mStore.set(p,Oe),H(k)}catch(Ce){te(Ce)}})})});return R(L,A),L}var pe=!0;r._support=pe,r._driver=a,r._initStorage=j,r.clear=B,r.dropInstance=Q,r.getItem=ne,r.iterate=ae,r.key=se,r.keys=fe,r.length=Ee,r.removeItem=Ne,r.setItem=Pe,Object.defineProperty(r,"__esModule",{value:!0})})}),gt=Pr(ji()),cr=Pr(Di()),xi={display:"none",position:"fixed",top:"0",right:"0",width:"100%",height:"100%",borderRadius:"0",border:"none",zIndex:"2147483647"};function Ui(e){for(let[t,r]of Object.entries(xi))e.style[t]=r}function Fi(e){return!![].slice.call(document.querySelectorAll(".magic-iframe")).find(r=>r.src.includes(e))}var Bi=class extends Mi{constructor(){super(...arguments),this.activeElement=null}init(){this.test="hello",this.iframe=new Promise(e=>{let t=()=>{if(Fi(encodeURIComponent(this.parameters)))zo().log();else{let r=document.createElement("iframe");r.classList.add("magic-iframe"),r.dataset.magicIframeLabel=ot(this.endpoint).host,r.title="Secure Modal",r.src=ot(`/send?params=${encodeURIComponent(this.parameters)}`,this.endpoint).href,Ui(r),document.body.appendChild(r),e(r)}};["loaded","interactive","complete"].includes(document.readyState)?t():window.addEventListener("load",t,!1)}),window.addEventListener("message",e=>{var t;if(e.origin===this.endpoint&&e.data&&e.data.msgType&&this.messageHandlers.size){e.data.response=(t=e.data.response)!=null?t:{};for(let r of this.messageHandlers.values())r(e)}})}showOverlay(){return et(this,null,function*(){let e=yield this.iframe;e.style.display="block",this.activeElement=document.activeElement,e.focus()})}hideOverlay(){return et(this,null,function*(){var e;let t=yield this.iframe;t.style.display="none",(e=this.activeElement)!=null&&e.focus&&this.activeElement.focus(),this.activeElement=null})}_post(e){return et(this,null,function*(){let t=yield this.iframe;if(t&&t.contentWindow)t.contentWindow.postMessage(e,this.endpoint);else throw Bo()})}},Ji=xo(Lr,{platform:"web",sdkName:"magic-sdk",version:"19.4.0",defaultEndpoint:"https://auth.magic.link/",ViewController:Bi,configureStorage:()=>et(void 0,null,function*(){let e=gt.default.createInstance({name:"MagicAuthLocalStorageDB",storeName:"MagicAuthLocalStorage"});return yield e.defineDriver(cr),yield e.setDriver([gt.default.INDEXEDDB,gt.default.LOCALSTORAGE,cr._driver]),e})}),Wi=Object.defineProperty,Gi=Object.defineProperties,qi=Object.getOwnPropertyDescriptors,ur=Object.getOwnPropertySymbols,Vi=Object.prototype.hasOwnProperty,zi=Object.prototype.propertyIsEnumerable,dr=(e,t,r)=>t in e?Wi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,fr=(e,t)=>{for(var r in t||(t={}))Vi.call(t,r)&&dr(e,r,t[r]);if(ur)for(var r of ur(t))zi.call(t,r)&&dr(e,r,t[r]);return e},hr=(e,t)=>Gi(e,qi(t)),Qi=class extends Le.Internal{constructor(e){super(),this.solanaConfig=e,this.name="solana",this.config={},this.signTransaction=(t,r)=>{let{instructions:a}=t,l=a.map(v=>hr(fr({},v),{keys:v.keys.map(f=>hr(fr({},f),{pubkey:f.pubkey.toBase58()})),programId:v.programId.toBase58()})),s={feePayer:t.feePayer.toBase58(),instructions:l,recentBlockhash:t.recentBlockhash,serializeConfig:r};return this.request({id:42,jsonrpc:"2.0",method:"sol_signTransaction",params:s})},this.signMessage=t=>this.request({id:42,jsonrpc:"2.0",method:"sol_signMessage",params:{message:t}}),this.config={rpcUrl:e.rpcUrl,chainType:"SOLANA"}}};export{Ji as b,Qi as g};
