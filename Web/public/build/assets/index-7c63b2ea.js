import{s as hs,g as Bo,b as X,a as ps,c as di,d as gs,p as Ue,B as qr,f as hi,t as Co,_ as pi}from"./bn-a0a0c8e1.js";import{i as ws,P as _e,S as Er,a as ys,b as Fr,d as _s,E as Uo,T as ms,e as bs}from"./index.browser.esm-cc417bbe.js";import{s as Tt}from"./sha256-a86b6b42.js";import{u as Kt,s as vs,c as jo,h as Es,d as As,a as Mo}from"./util-fc318f65.js";var gn=hs.Buffer;function Ss(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),e=0;e<n.length;e++)n[e]=255;for(var r=0;r<t.length;r++){var i=t.charAt(r),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=r}var a=t.length,s=t.charAt(0),l=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function u(f){if((Array.isArray(f)||f instanceof Uint8Array)&&(f=gn.from(f)),!gn.isBuffer(f))throw new TypeError("Expected Buffer");if(f.length===0)return"";for(var b=0,C=0,D=0,O=f.length;D!==O&&f[D]===0;)D++,b++;for(var B=(O-D)*c+1>>>0,q=new Uint8Array(B);D!==O;){for(var I=f[D],v=0,_=B-1;(I!==0||v<C)&&_!==-1;_--,v++)I+=256*q[_]>>>0,q[_]=I%a>>>0,I=I/a>>>0;if(I!==0)throw new Error("Non-zero carry");C=v,D++}for(var E=B-C;E!==B&&q[E]===0;)E++;for(var T=s.repeat(b);E<B;++E)T+=t.charAt(q[E]);return T}function x(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return gn.alloc(0);for(var b=0,C=0,D=0;f[b]===s;)C++,b++;for(var O=(f.length-b)*l+1>>>0,B=new Uint8Array(O);f[b];){var q=n[f.charCodeAt(b)];if(q===255)return;for(var I=0,v=O-1;(q!==0||I<D)&&v!==-1;v--,I++)q+=a*B[v]>>>0,B[v]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");D=I,b++}for(var _=O-D;_!==O&&B[_]===0;)_++;var E=gn.allocUnsafe(C+(O-_));E.fill(0,0,C);for(var T=C;_!==O;)E[T++]=B[_++];return E}function h(f){var b=x(f);if(b)return b;throw new Error("Non-base"+a+" character")}return{encode:u,decodeUnsafe:x,decode:h}}var xs=Ss,ks=xs,Is="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Os=ks(Is);const vt=Bo(Os);var Vr={exports:{}};const Ts=/[\p{Lu}]/u,Rs=/[\p{Ll}]/u,gi=/^[\p{Lu}](?![\p{Lu}])/gu,zo=/([\p{Alpha}\p{N}_]|$)/u,$o=/[_.\- ]+/,Ls=new RegExp("^"+$o.source),wi=new RegExp($o.source+zo.source,"gu"),yi=new RegExp("\\d+"+zo.source,"gu"),Ps=(t,n,e)=>{let r=!1,i=!1,o=!1;for(let a=0;a<t.length;a++){const s=t[a];r&&Ts.test(s)?(t=t.slice(0,a)+"-"+t.slice(a),r=!1,o=i,i=!0,a++):i&&o&&Rs.test(s)?(t=t.slice(0,a-1)+"-"+t.slice(a-1),o=i,i=!1,r=!0):(r=n(s)===s&&e(s)!==s,o=i,i=e(s)===s&&n(s)!==s)}return t},Ds=(t,n)=>(gi.lastIndex=0,t.replace(gi,e=>n(e))),Ns=(t,n)=>(wi.lastIndex=0,yi.lastIndex=0,t.replace(wi,(e,r)=>n(r)).replace(yi,e=>n(e))),qo=(t,n)=>{if(!(typeof t=="string"||Array.isArray(t)))throw new TypeError("Expected the input to be `string | string[]`");if(n={pascalCase:!1,preserveConsecutiveUppercase:!1,...n},Array.isArray(t)?t=t.map(o=>o.trim()).filter(o=>o.length).join("-"):t=t.trim(),t.length===0)return"";const e=n.locale===!1?o=>o.toLowerCase():o=>o.toLocaleLowerCase(n.locale),r=n.locale===!1?o=>o.toUpperCase():o=>o.toLocaleUpperCase(n.locale);return t.length===1?n.pascalCase?r(t):e(t):(t!==e(t)&&(t=Ps(t,e,r)),t=t.replace(Ls,""),n.preserveConsecutiveUppercase?t=Ds(t,e):t=e(t),n.pascalCase&&(t=r(t.charAt(0))+t.slice(1)),Ns(t,r))};Vr.exports=qo;Vr.exports.default=qo;var Bs=Vr.exports;const he=Bo(Bs);var J={},z={};let ue=class{constructor(n,e){if(!Number.isInteger(n))throw new TypeError("span must be an integer");this.span=n,this.property=e}makeDestinationObject(){return{}}decode(n,e){throw new Error("Layout is abstract")}encode(n,e,r){throw new Error("Layout is abstract")}getSpan(n,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(n){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=n,e}fromArray(n){}};z.Layout=ue;function Zr(t,n){return n.property?t+"["+n.property+"]":t}z.nameWithProperty=Zr;function Cs(t,n){if(typeof t!="function")throw new TypeError("Class must be constructor");if(t.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(n&&n instanceof ue))throw new TypeError("layout must be a Layout");if(n.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=n,n.boundConstructor_=t,n.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value:function(e,r){return n.encode(this,e,r)},writable:!0}),Object.defineProperty(t,"decode",{value:function(e,r){return n.decode(e,r)},writable:!0})}z.bindConstructorLayout=Cs;let Se=class extends ue{isCount(){throw new Error("ExternalLayout is abstract")}};class Fo extends Se{constructor(n,e){if(n===void 0&&(n=1),!Number.isInteger(n)||0>=n)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=n}isCount(){return!0}decode(n,e){e===void 0&&(e=0);const r=n.length-e;return Math.floor(r/this.elementSpan)}encode(n,e,r){return 0}}let Hr=class extends Se{constructor(n,e,r){if(!(n instanceof ue))throw new TypeError("layout must be a Layout");if(e===void 0)e=0;else if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(n.span,r||n.property),this.layout=n,this.offset=e}isCount(){return this.layout instanceof $e||this.layout instanceof Xe}decode(n,e){return e===void 0&&(e=0),this.layout.decode(n,e+this.offset)}encode(n,e,r){return r===void 0&&(r=0),this.layout.encode(n,e,r+this.offset)}},$e=class extends ue{constructor(n,e){if(super(n,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(n,e){return e===void 0&&(e=0),n.readUIntLE(e,this.span)}encode(n,e,r){return r===void 0&&(r=0),e.writeUIntLE(n,r,this.span),this.span}},Xe=class extends ue{constructor(n,e){if(super(n,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(n,e){return e===void 0&&(e=0),n.readUIntBE(e,this.span)}encode(n,e,r){return r===void 0&&(r=0),e.writeUIntBE(n,r,this.span),this.span}};class gt extends ue{constructor(n,e){if(super(n,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(n,e){return e===void 0&&(e=0),n.readIntLE(e,this.span)}encode(n,e,r){return r===void 0&&(r=0),e.writeIntLE(n,r,this.span),this.span}}class Rt extends ue{constructor(n,e){if(super(n,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(n,e){return e===void 0&&(e=0),n.readIntBE(e,this.span)}encode(n,e,r){return r===void 0&&(r=0),e.writeIntBE(n,r,this.span),this.span}}const Ar=Math.pow(2,32);function Nn(t){const n=Math.floor(t/Ar),e=t-n*Ar;return{hi32:n,lo32:e}}function Bn(t,n){return t*Ar+n}let Us=class extends ue{constructor(n){super(8,n)}decode(n,e){e===void 0&&(e=0);const r=n.readUInt32LE(e),i=n.readUInt32LE(e+4);return Bn(i,r)}encode(n,e,r){r===void 0&&(r=0);const i=Nn(n);return e.writeUInt32LE(i.lo32,r),e.writeUInt32LE(i.hi32,r+4),8}};class js extends ue{constructor(n){super(8,n)}decode(n,e){e===void 0&&(e=0);const r=n.readUInt32BE(e),i=n.readUInt32BE(e+4);return Bn(r,i)}encode(n,e,r){r===void 0&&(r=0);const i=Nn(n);return e.writeUInt32BE(i.hi32,r),e.writeUInt32BE(i.lo32,r+4),8}}let Ms=class extends ue{constructor(n){super(8,n)}decode(n,e){e===void 0&&(e=0);const r=n.readUInt32LE(e),i=n.readInt32LE(e+4);return Bn(i,r)}encode(n,e,r){r===void 0&&(r=0);const i=Nn(n);return e.writeUInt32LE(i.lo32,r),e.writeInt32LE(i.hi32,r+4),8}};class zs extends ue{constructor(n){super(8,n)}decode(n,e){e===void 0&&(e=0);const r=n.readInt32BE(e),i=n.readUInt32BE(e+4);return Bn(r,i)}encode(n,e,r){r===void 0&&(r=0);const i=Nn(n);return e.writeInt32BE(i.hi32,r),e.writeUInt32BE(i.lo32,r+4),8}}class Vo extends ue{constructor(n){super(4,n)}decode(n,e){return e===void 0&&(e=0),n.readFloatLE(e)}encode(n,e,r){return r===void 0&&(r=0),e.writeFloatLE(n,r),4}}class Zo extends ue{constructor(n){super(4,n)}decode(n,e){return e===void 0&&(e=0),n.readFloatBE(e)}encode(n,e,r){return r===void 0&&(r=0),e.writeFloatBE(n,r),4}}class Ho extends ue{constructor(n){super(8,n)}decode(n,e){return e===void 0&&(e=0),n.readDoubleLE(e)}encode(n,e,r){return r===void 0&&(r=0),e.writeDoubleLE(n,r),8}}class Go extends ue{constructor(n){super(8,n)}decode(n,e){return e===void 0&&(e=0),n.readDoubleBE(e)}encode(n,e,r){return r===void 0&&(r=0),e.writeDoubleBE(n,r),8}}class Ko extends ue{constructor(n,e,r){if(!(n instanceof ue))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof Se&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(e instanceof Se)&&0<n.span&&(i=e*n.span),super(i,r),this.elementLayout=n,this.count=e}getSpan(n,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0,i=this.count;if(i instanceof Se&&(i=i.decode(n,e)),0<this.elementLayout.span)r=i*this.elementLayout.span;else{let o=0;for(;o<i;)r+=this.elementLayout.getSpan(n,e+r),++o}return r}decode(n,e){e===void 0&&(e=0);const r=[];let i=0,o=this.count;for(o instanceof Se&&(o=o.decode(n,e));i<o;)r.push(this.elementLayout.decode(n,e)),e+=this.elementLayout.getSpan(n,e),i+=1;return r}encode(n,e,r){r===void 0&&(r=0);const i=this.elementLayout,o=n.reduce((a,s)=>a+i.encode(s,e,r+a),0);return this.count instanceof Se&&this.count.encode(n.length,e,r),o}}let Wo=class extends ue{constructor(n,e,r){if(!(Array.isArray(n)&&n.reduce((o,a)=>o&&a instanceof ue,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const o of n)if(0>o.span&&o.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=n.reduce((o,a)=>o+a.getSpan(),0)}catch{}super(i,e),this.fields=n,this.decodePrefixes=!!r}getSpan(n,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0;try{r=this.fields.reduce((i,o)=>{const a=o.getSpan(n,e);return e+=a,i+a},0)}catch{throw new RangeError("indeterminate span")}return r}decode(n,e){e===void 0&&(e=0);const r=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(r[i.property]=i.decode(n,e)),e+=i.getSpan(n,e),this.decodePrefixes&&n.length===e)break;return r}encode(n,e,r){r===void 0&&(r=0);const i=r;let o=0,a=0;for(const s of this.fields){let l=s.span;if(a=0<l?l:0,s.property!==void 0){const c=n[s.property];c!==void 0&&(a=s.encode(c,e,r),0>l&&(l=s.getSpan(e,r)))}o=r,r+=l}return o+a-i}fromArray(n){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<n.length&&(e[r.property]=n.shift());return e}layoutFor(n){if(typeof n!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===n)return e}offsetOf(n){if(typeof n!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===n)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}},Gr=class{constructor(n){this.property=n}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}},In=class extends Gr{constructor(n,e){if(!(n instanceof Se&&n.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||n.property||"variant"),this.layout=n}decode(n,e){return this.layout.decode(n,e)}encode(n,e,r){return this.layout.encode(n,e,r)}},Kr=class extends ue{constructor(n,e,r){const i=n instanceof $e||n instanceof Xe;if(i)n=new In(new Hr(n));else if(n instanceof Se&&n.isCount())n=new In(n);else if(!(n instanceof Gr))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof ue))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let o=-1;e&&(o=e.span,0<=o&&i&&(o+=n.layout.span)),super(o,r),this.discriminator=n,this.usesPrefixDiscriminator=i,this.defaultLayout=e,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(s){return a(s)},this.configGetSourceVariant=function(s){a=s.bind(this)}}getSpan(n,e){if(0<=this.span)return this.span;e===void 0&&(e=0);const r=this.getVariant(n,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(n,e)}defaultGetSourceVariant(n){if(n.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&n.hasOwnProperty(this.defaultLayout.property))return;const e=this.registry[n[this.discriminator.property]];if(e&&(!e.layout||n.hasOwnProperty(e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(n.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}decode(n,e){e===void 0&&(e=0);let r;const i=this.discriminator,o=i.decode(n,e);let a=this.registry[o];if(a===void 0){let s=0;a=this.defaultLayout,this.usesPrefixDiscriminator&&(s=i.layout.span),r=this.makeDestinationObject(),r[i.property]=o,r[a.property]=this.defaultLayout.decode(n,e+s)}else r=a.decode(n,e);return r}encode(n,e,r){r===void 0&&(r=0);const i=this.getSourceVariant(n);if(i===void 0){const o=this.discriminator,a=this.defaultLayout;let s=0;return this.usesPrefixDiscriminator&&(s=o.layout.span),o.encode(n[o.property],e,r),s+a.encode(n[a.property],e,r+s)}return i.encode(n,e,r)}addVariant(n,e,r){const i=new Yo(this,n,e,r);return this.registry[n]=i,i}getVariant(n,e){let r=n;return X.Buffer.isBuffer(n)&&(e===void 0&&(e=0),r=this.discriminator.decode(n,e)),this.registry[r]}},Yo=class extends ue{constructor(n,e,r,i){if(!(n instanceof Kr))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&i===void 0&&(i=r,r=null),r){if(!(r instanceof ue))throw new TypeError("layout must be a Layout");if(n.defaultLayout!==null&&0<=r.span&&r.span>n.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let o=n.span;0>n.span&&(o=r?r.span:0,0<=o&&n.usesPrefixDiscriminator&&(o+=n.discriminator.layout.span)),super(o,i),this.union=n,this.variant=e,this.layout=r||null}getSpan(n,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),r+this.layout.getSpan(n,e+r)}decode(n,e){const r=this.makeDestinationObject();if(e===void 0&&(e=0),this!==this.union.getVariant(n,e))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(n,e+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(n,e,r){r===void 0&&(r=0);let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!n.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let o=i;if(this.layout&&(this.layout.encode(n[this.property],e,r+i),o+=this.layout.getSpan(e,r+i),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(n){if(this.layout)return this.layout.fromArray(n)}};function bt(t){return 0>t&&(t+=4294967296),t}class Wr extends ue{constructor(n,e,r){if(!(n instanceof $e||n instanceof Xe))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=void 0),4<n.span)throw new RangeError("word cannot exceed 32 bits");super(n.span,r),this.word=n,this.msb=!!e,this.fields=[];let i=0;this._packedSetValue=function(o){return i=bt(o),this},this._packedGetValue=function(){return i}}decode(n,e){const r=this.makeDestinationObject();e===void 0&&(e=0);const i=this.word.decode(n,e);this._packedSetValue(i);for(const o of this.fields)o.property!==void 0&&(r[o.property]=o.decode(i));return r}encode(n,e,r){r===void 0&&(r=0);const i=this.word.decode(e,r);this._packedSetValue(i);for(const o of this.fields)if(o.property!==void 0){const a=n[o.property];a!==void 0&&o.encode(a)}return this.word.encode(this._packedGetValue(),e,r)}addField(n,e){const r=new qt(this,n,e);return this.fields.push(r),r}addBoolean(n){const e=new Xo(this,n);return this.fields.push(e),e}fieldFor(n){if(typeof n!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===n)return e}}class qt{constructor(n,e,r){if(!(n instanceof Wr))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const i=8*n.span,o=n.fields.reduce((a,s)=>a+s.bits,0);if(e+o>i)throw new Error("bits too long for span remainder ("+(i-o)+" of "+i+" remain)");this.container=n,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=i-o-e),this.wordMask=bt(this.valueMask<<this.start),this.property=r}decode(){const n=this.container._packedGetValue();return bt(n&this.wordMask)>>>this.start}encode(n){if(!Number.isInteger(n)||n!==bt(n&this.valueMask))throw new TypeError(Zr("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=bt(n<<this.start);this.container._packedSetValue(bt(e&~this.wordMask)|r)}}let Xo=class extends qt{constructor(n,e){super(n,1,e)}decode(n,e){return!!qt.prototype.decode.call(this,n,e)}encode(n){return typeof n=="boolean"&&(n=+n),qt.prototype.encode.call(this,n)}},Jo=class extends ue{constructor(n,e){if(!(n instanceof Se&&n.isCount()||Number.isInteger(n)&&0<=n))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;n instanceof Se||(r=n),super(r,e),this.length=n}getSpan(n,e){let r=this.span;return 0>r&&(r=this.length.decode(n,e)),r}decode(n,e){e===void 0&&(e=0);let r=this.span;return 0>r&&(r=this.length.decode(n,e)),n.slice(e,e+r)}encode(n,e,r){let i=this.length;if(this.length instanceof Se&&(i=n.length),!(X.Buffer.isBuffer(n)&&i===n.length))throw new TypeError(Zr("Blob.encode",this)+" requires (length "+i+") Buffer as src");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return e.write(n.toString("hex"),r,i,"hex"),this.length instanceof Se&&this.length.encode(i,e,r),i}};class Qo extends ue{constructor(n){super(-1,n)}getSpan(n,e){if(!X.Buffer.isBuffer(n))throw new TypeError("b must be a Buffer");e===void 0&&(e=0);let r=e;for(;r<n.length&&n[r]!==0;)r+=1;return 1+r-e}decode(n,e,r){e===void 0&&(e=0);let i=this.getSpan(n,e);return n.slice(e,e+i-1).toString("utf-8")}encode(n,e,r){r===void 0&&(r=0),typeof n!="string"&&(n=n.toString());const i=new X.Buffer(n,"utf8"),o=i.length;if(r+o>e.length)throw new RangeError("encoding overruns Buffer");return i.copy(e,r),e[r+o]=0,o+1}}class ea extends ue{constructor(n,e){if(typeof n=="string"&&e===void 0&&(e=n,n=void 0),n===void 0)n=-1;else if(!Number.isInteger(n))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=n}getSpan(n,e){if(!X.Buffer.isBuffer(n))throw new TypeError("b must be a Buffer");return e===void 0&&(e=0),n.length-e}decode(n,e,r){e===void 0&&(e=0);let i=this.getSpan(n,e);if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");return n.slice(e,e+i).toString("utf-8")}encode(n,e,r){r===void 0&&(r=0),typeof n!="string"&&(n=n.toString());const i=new X.Buffer(n,"utf8"),o=i.length;if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");if(r+o>e.length)throw new RangeError("encoding overruns Buffer");return i.copy(e,r),o}}class ta extends ue{constructor(n,e){super(0,e),this.value=n}decode(n,e,r){return this.value}encode(n,e,r){return 0}}z.ExternalLayout=Se;z.GreedyCount=Fo;z.OffsetLayout=Hr;z.UInt=$e;z.UIntBE=Xe;z.Int=gt;z.IntBE=Rt;z.Float=Vo;z.FloatBE=Zo;z.Double=Ho;z.DoubleBE=Go;z.Sequence=Ko;z.Structure=Wo;z.UnionDiscriminator=Gr;z.UnionLayoutDiscriminator=In;z.Union=Kr;z.VariantLayout=Yo;z.BitStructure=Wr;z.BitField=qt;z.Boolean=Xo;z.Blob=Jo;z.CString=Qo;z.UTF8=ea;z.Constant=ta;z.greedy=(t,n)=>new Fo(t,n);z.offset=(t,n,e)=>new Hr(t,n,e);z.u8=t=>new $e(1,t);z.u16=t=>new $e(2,t);z.u24=t=>new $e(3,t);z.u32=t=>new $e(4,t);z.u40=t=>new $e(5,t);z.u48=t=>new $e(6,t);z.nu64=t=>new Us(t);z.u16be=t=>new Xe(2,t);z.u24be=t=>new Xe(3,t);z.u32be=t=>new Xe(4,t);z.u40be=t=>new Xe(5,t);z.u48be=t=>new Xe(6,t);z.nu64be=t=>new js(t);z.s8=t=>new gt(1,t);z.s16=t=>new gt(2,t);z.s24=t=>new gt(3,t);z.s32=t=>new gt(4,t);z.s40=t=>new gt(5,t);z.s48=t=>new gt(6,t);z.ns64=t=>new Ms(t);z.s16be=t=>new Rt(2,t);z.s24be=t=>new Rt(3,t);z.s32be=t=>new Rt(4,t);z.s40be=t=>new Rt(5,t);z.s48be=t=>new Rt(6,t);z.ns64be=t=>new zs(t);z.f32=t=>new Vo(t);z.f32be=t=>new Zo(t);z.f64=t=>new Ho(t);z.f64be=t=>new Go(t);z.struct=(t,n,e)=>new Wo(t,n,e);z.bits=(t,n,e)=>new Wr(t,n,e);z.seq=(t,n,e)=>new Ko(t,n,e);z.union=(t,n,e)=>new Kr(t,n,e);z.unionLayoutDiscriminator=(t,n)=>new In(t,n);z.blob=(t,n)=>new Jo(t,n);z.cstr=t=>new Qo(t);z.utf8=(t,n)=>new ea(t,n);z.const=(t,n)=>new ta(t,n);const $s=ps(ws);(function(t){var n=di&&di.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(t,"__esModule",{value:!0}),t.map=t.array=t.rustEnum=t.str=t.vecU8=t.tagged=t.vec=t.bool=t.option=t.publicKey=t.i256=t.u256=t.i128=t.u128=t.i64=t.u64=t.struct=t.f64=t.f32=t.i32=t.u32=t.i16=t.u16=t.i8=t.u8=void 0;const e=z,r=$s,i=n(gs);var o=z;Object.defineProperty(t,"u8",{enumerable:!0,get:function(){return o.u8}}),Object.defineProperty(t,"i8",{enumerable:!0,get:function(){return o.s8}}),Object.defineProperty(t,"u16",{enumerable:!0,get:function(){return o.u16}}),Object.defineProperty(t,"i16",{enumerable:!0,get:function(){return o.s16}}),Object.defineProperty(t,"u32",{enumerable:!0,get:function(){return o.u32}}),Object.defineProperty(t,"i32",{enumerable:!0,get:function(){return o.s32}}),Object.defineProperty(t,"f32",{enumerable:!0,get:function(){return o.f32}}),Object.defineProperty(t,"f64",{enumerable:!0,get:function(){return o.f64}}),Object.defineProperty(t,"struct",{enumerable:!0,get:function(){return o.struct}});class a extends e.Layout{constructor(N,d,m){super(N,m),this.blob=(0,e.blob)(N),this.signed=d}decode(N,d=0){const m=new i.default(this.blob.decode(N,d),10,"le");return this.signed?m.fromTwos(this.span*8).clone():m}encode(N,d,m=0){return this.signed&&(N=N.toTwos(this.span*8)),this.blob.encode(N.toArrayLike(X.Buffer,"le",this.span),d,m)}}function s(R){return new a(8,!1,R)}t.u64=s;function l(R){return new a(8,!0,R)}t.i64=l;function c(R){return new a(16,!1,R)}t.u128=c;function u(R){return new a(16,!0,R)}t.i128=u;function x(R){return new a(32,!1,R)}t.u256=x;function h(R){return new a(32,!0,R)}t.i256=h;class f extends e.Layout{constructor(N,d,m,j){super(N.span,j),this.layout=N,this.decoder=d,this.encoder=m}decode(N,d){return this.decoder(this.layout.decode(N,d))}encode(N,d,m){return this.layout.encode(this.encoder(N),d,m)}getSpan(N,d){return this.layout.getSpan(N,d)}}function b(R){return new f((0,e.blob)(32),N=>new r.PublicKey(N),N=>N.toBuffer(),R)}t.publicKey=b;class C extends e.Layout{constructor(N,d){super(-1,d),this.layout=N,this.discriminator=(0,e.u8)()}encode(N,d,m=0){return N==null?this.discriminator.encode(0,d,m):(this.discriminator.encode(1,d,m),this.layout.encode(N,d,m+1)+1)}decode(N,d=0){const m=this.discriminator.decode(N,d);if(m===0)return null;if(m===1)return this.layout.decode(N,d+1);throw new Error("Invalid option "+this.property)}getSpan(N,d=0){const m=this.discriminator.decode(N,d);if(m===0)return 1;if(m===1)return this.layout.getSpan(N,d+1)+1;throw new Error("Invalid option "+this.property)}}function D(R,N){return new C(R,N)}t.option=D;function O(R){return new f((0,e.u8)(),B,q,R)}t.bool=O;function B(R){if(R===0)return!1;if(R===1)return!0;throw new Error("Invalid bool: "+R)}function q(R){return R?1:0}function I(R,N){const d=(0,e.u32)("length"),m=(0,e.struct)([d,(0,e.seq)(R,(0,e.offset)(d,-d.span),"values")]);return new f(m,({values:j})=>j,j=>({values:j}),N)}t.vec=I;function v(R,N,d){const m=(0,e.struct)([s("tag"),N.replicate("data")]);function j({tag:ne,data:le}){if(!ne.eq(R))throw new Error("Invalid tag, expected: "+R.toString("hex")+", got: "+ne.toString("hex"));return le}return new f(m,j,ne=>({tag:R,data:ne}),d)}t.tagged=v;function _(R){const N=(0,e.u32)("length"),d=(0,e.struct)([N,(0,e.blob)((0,e.offset)(N,-N.span),"data")]);return new f(d,({data:m})=>m,m=>({data:m}),R)}t.vecU8=_;function E(R){return new f(_(),N=>N.toString("utf-8"),N=>X.Buffer.from(N,"utf-8"),R)}t.str=E;function T(R,N,d){const m=(0,e.union)(d??(0,e.u8)(),N);return R.forEach((j,ne)=>m.addVariant(ne,j,j.property)),m}t.rustEnum=T;function M(R,N,d){const m=(0,e.struct)([(0,e.seq)(R,N,"values")]);return new f(m,({values:j})=>j,j=>({values:j}),d)}t.array=M;class L extends e.Layout{constructor(N,d,m){super(N.span+d.span,m),this.keyLayout=N,this.valueLayout=d}decode(N,d){d=d||0;const m=this.keyLayout.decode(N,d),j=this.valueLayout.decode(N,d+this.keyLayout.getSpan(N,d));return[m,j]}encode(N,d,m){m=m||0;const j=this.keyLayout.encode(N[0],d,m),ne=this.valueLayout.encode(N[1],d,m+j);return j+ne}getSpan(N,d){return this.keyLayout.getSpan(N,d)+this.valueLayout.getSpan(N,d)}}function F(R,N,d){const m=(0,e.u32)("length"),j=(0,e.struct)([m,(0,e.seq)(new L(R,N),(0,e.offset)(m,-m.span),"values")]);return new f(j,({values:ne})=>new Map(ne),ne=>({values:Array.from(ne.entries())}),d)}t.map=F})(J);/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const qs=4,_i=0,mi=1,Fs=2;function Lt(t){let n=t.length;for(;--n>=0;)t[n]=0}const Vs=0,na=1,Zs=2,Hs=3,Gs=258,Yr=29,an=256,Wt=an+1+Yr,At=30,Xr=19,ra=2*Wt+1,ct=15,Vn=16,Ks=7,Jr=256,ia=16,oa=17,aa=18,Sr=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),An=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Ws=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),sa=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ys=512,Ge=new Array((Wt+2)*2);Lt(Ge);const Ft=new Array(At*2);Lt(Ft);const Yt=new Array(Ys);Lt(Yt);const Xt=new Array(Gs-Hs+1);Lt(Xt);const Qr=new Array(Yr);Lt(Qr);const On=new Array(At);Lt(On);function Zn(t,n,e,r,i){this.static_tree=t,this.extra_bits=n,this.extra_base=e,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}let ca,ua,la;function Hn(t,n){this.dyn_tree=t,this.max_code=0,this.stat_desc=n}const fa=t=>t<256?Yt[t]:Yt[256+(t>>>7)],Jt=(t,n)=>{t.pending_buf[t.pending++]=n&255,t.pending_buf[t.pending++]=n>>>8&255},xe=(t,n,e)=>{t.bi_valid>Vn-e?(t.bi_buf|=n<<t.bi_valid&65535,Jt(t,t.bi_buf),t.bi_buf=n>>Vn-t.bi_valid,t.bi_valid+=e-Vn):(t.bi_buf|=n<<t.bi_valid&65535,t.bi_valid+=e)},je=(t,n,e)=>{xe(t,e[n*2],e[n*2+1])},da=(t,n)=>{let e=0;do e|=t&1,t>>>=1,e<<=1;while(--n>0);return e>>>1},Xs=t=>{t.bi_valid===16?(Jt(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},Js=(t,n)=>{const e=n.dyn_tree,r=n.max_code,i=n.stat_desc.static_tree,o=n.stat_desc.has_stree,a=n.stat_desc.extra_bits,s=n.stat_desc.extra_base,l=n.stat_desc.max_length;let c,u,x,h,f,b,C=0;for(h=0;h<=ct;h++)t.bl_count[h]=0;for(e[t.heap[t.heap_max]*2+1]=0,c=t.heap_max+1;c<ra;c++)u=t.heap[c],h=e[e[u*2+1]*2+1]+1,h>l&&(h=l,C++),e[u*2+1]=h,!(u>r)&&(t.bl_count[h]++,f=0,u>=s&&(f=a[u-s]),b=e[u*2],t.opt_len+=b*(h+f),o&&(t.static_len+=b*(i[u*2+1]+f)));if(C!==0){do{for(h=l-1;t.bl_count[h]===0;)h--;t.bl_count[h]--,t.bl_count[h+1]+=2,t.bl_count[l]--,C-=2}while(C>0);for(h=l;h!==0;h--)for(u=t.bl_count[h];u!==0;)x=t.heap[--c],!(x>r)&&(e[x*2+1]!==h&&(t.opt_len+=(h-e[x*2+1])*e[x*2],e[x*2+1]=h),u--)}},ha=(t,n,e)=>{const r=new Array(ct+1);let i=0,o,a;for(o=1;o<=ct;o++)i=i+e[o-1]<<1,r[o]=i;for(a=0;a<=n;a++){let s=t[a*2+1];s!==0&&(t[a*2]=da(r[s]++,s))}},Qs=()=>{let t,n,e,r,i;const o=new Array(ct+1);for(e=0,r=0;r<Yr-1;r++)for(Qr[r]=e,t=0;t<1<<Sr[r];t++)Xt[e++]=r;for(Xt[e-1]=r,i=0,r=0;r<16;r++)for(On[r]=i,t=0;t<1<<An[r];t++)Yt[i++]=r;for(i>>=7;r<At;r++)for(On[r]=i<<7,t=0;t<1<<An[r]-7;t++)Yt[256+i++]=r;for(n=0;n<=ct;n++)o[n]=0;for(t=0;t<=143;)Ge[t*2+1]=8,t++,o[8]++;for(;t<=255;)Ge[t*2+1]=9,t++,o[9]++;for(;t<=279;)Ge[t*2+1]=7,t++,o[7]++;for(;t<=287;)Ge[t*2+1]=8,t++,o[8]++;for(ha(Ge,Wt+1,o),t=0;t<At;t++)Ft[t*2+1]=5,Ft[t*2]=da(t,5);ca=new Zn(Ge,Sr,an+1,Wt,ct),ua=new Zn(Ft,An,0,At,ct),la=new Zn(new Array(0),Ws,0,Xr,Ks)},pa=t=>{let n;for(n=0;n<Wt;n++)t.dyn_ltree[n*2]=0;for(n=0;n<At;n++)t.dyn_dtree[n*2]=0;for(n=0;n<Xr;n++)t.bl_tree[n*2]=0;t.dyn_ltree[Jr*2]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},ga=t=>{t.bi_valid>8?Jt(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},bi=(t,n,e,r)=>{const i=n*2,o=e*2;return t[i]<t[o]||t[i]===t[o]&&r[n]<=r[e]},Gn=(t,n,e)=>{const r=t.heap[e];let i=e<<1;for(;i<=t.heap_len&&(i<t.heap_len&&bi(n,t.heap[i+1],t.heap[i],t.depth)&&i++,!bi(n,r,t.heap[i],t.depth));)t.heap[e]=t.heap[i],e=i,i<<=1;t.heap[e]=r},vi=(t,n,e)=>{let r,i,o=0,a,s;if(t.sym_next!==0)do r=t.pending_buf[t.sym_buf+o++]&255,r+=(t.pending_buf[t.sym_buf+o++]&255)<<8,i=t.pending_buf[t.sym_buf+o++],r===0?je(t,i,n):(a=Xt[i],je(t,a+an+1,n),s=Sr[a],s!==0&&(i-=Qr[a],xe(t,i,s)),r--,a=fa(r),je(t,a,e),s=An[a],s!==0&&(r-=On[a],xe(t,r,s)));while(o<t.sym_next);je(t,Jr,n)},xr=(t,n)=>{const e=n.dyn_tree,r=n.stat_desc.static_tree,i=n.stat_desc.has_stree,o=n.stat_desc.elems;let a,s,l=-1,c;for(t.heap_len=0,t.heap_max=ra,a=0;a<o;a++)e[a*2]!==0?(t.heap[++t.heap_len]=l=a,t.depth[a]=0):e[a*2+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=l<2?++l:0,e[c*2]=1,t.depth[c]=0,t.opt_len--,i&&(t.static_len-=r[c*2+1]);for(n.max_code=l,a=t.heap_len>>1;a>=1;a--)Gn(t,e,a);c=o;do a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Gn(t,e,1),s=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=s,e[c*2]=e[a*2]+e[s*2],t.depth[c]=(t.depth[a]>=t.depth[s]?t.depth[a]:t.depth[s])+1,e[a*2+1]=e[s*2+1]=c,t.heap[1]=c++,Gn(t,e,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],Js(t,n),ha(e,l,t.bl_count)},Ei=(t,n,e)=>{let r,i=-1,o,a=n[0*2+1],s=0,l=7,c=4;for(a===0&&(l=138,c=3),n[(e+1)*2+1]=65535,r=0;r<=e;r++)o=a,a=n[(r+1)*2+1],!(++s<l&&o===a)&&(s<c?t.bl_tree[o*2]+=s:o!==0?(o!==i&&t.bl_tree[o*2]++,t.bl_tree[ia*2]++):s<=10?t.bl_tree[oa*2]++:t.bl_tree[aa*2]++,s=0,i=o,a===0?(l=138,c=3):o===a?(l=6,c=3):(l=7,c=4))},Ai=(t,n,e)=>{let r,i=-1,o,a=n[0*2+1],s=0,l=7,c=4;for(a===0&&(l=138,c=3),r=0;r<=e;r++)if(o=a,a=n[(r+1)*2+1],!(++s<l&&o===a)){if(s<c)do je(t,o,t.bl_tree);while(--s!==0);else o!==0?(o!==i&&(je(t,o,t.bl_tree),s--),je(t,ia,t.bl_tree),xe(t,s-3,2)):s<=10?(je(t,oa,t.bl_tree),xe(t,s-3,3)):(je(t,aa,t.bl_tree),xe(t,s-11,7));s=0,i=o,a===0?(l=138,c=3):o===a?(l=6,c=3):(l=7,c=4)}},ec=t=>{let n;for(Ei(t,t.dyn_ltree,t.l_desc.max_code),Ei(t,t.dyn_dtree,t.d_desc.max_code),xr(t,t.bl_desc),n=Xr-1;n>=3&&t.bl_tree[sa[n]*2+1]===0;n--);return t.opt_len+=3*(n+1)+5+5+4,n},tc=(t,n,e,r)=>{let i;for(xe(t,n-257,5),xe(t,e-1,5),xe(t,r-4,4),i=0;i<r;i++)xe(t,t.bl_tree[sa[i]*2+1],3);Ai(t,t.dyn_ltree,n-1),Ai(t,t.dyn_dtree,e-1)},nc=t=>{let n=4093624447,e;for(e=0;e<=31;e++,n>>>=1)if(n&1&&t.dyn_ltree[e*2]!==0)return _i;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return mi;for(e=32;e<an;e++)if(t.dyn_ltree[e*2]!==0)return mi;return _i};let Si=!1;const rc=t=>{Si||(Qs(),Si=!0),t.l_desc=new Hn(t.dyn_ltree,ca),t.d_desc=new Hn(t.dyn_dtree,ua),t.bl_desc=new Hn(t.bl_tree,la),t.bi_buf=0,t.bi_valid=0,pa(t)},wa=(t,n,e,r)=>{xe(t,(Vs<<1)+(r?1:0),3),ga(t),Jt(t,e),Jt(t,~e),e&&t.pending_buf.set(t.window.subarray(n,n+e),t.pending),t.pending+=e},ic=t=>{xe(t,na<<1,3),je(t,Jr,Ge),Xs(t)},oc=(t,n,e,r)=>{let i,o,a=0;t.level>0?(t.strm.data_type===Fs&&(t.strm.data_type=nc(t)),xr(t,t.l_desc),xr(t,t.d_desc),a=ec(t),i=t.opt_len+3+7>>>3,o=t.static_len+3+7>>>3,o<=i&&(i=o)):i=o=e+5,e+4<=i&&n!==-1?wa(t,n,e,r):t.strategy===qs||o===i?(xe(t,(na<<1)+(r?1:0),3),vi(t,Ge,Ft)):(xe(t,(Zs<<1)+(r?1:0),3),tc(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),vi(t,t.dyn_ltree,t.dyn_dtree)),pa(t),r&&ga(t)},ac=(t,n,e)=>(t.pending_buf[t.sym_buf+t.sym_next++]=n,t.pending_buf[t.sym_buf+t.sym_next++]=n>>8,t.pending_buf[t.sym_buf+t.sym_next++]=e,n===0?t.dyn_ltree[e*2]++:(t.matches++,n--,t.dyn_ltree[(Xt[e]+an+1)*2]++,t.dyn_dtree[fa(n)*2]++),t.sym_next===t.sym_end);var sc=rc,cc=wa,uc=oc,lc=ac,fc=ic,dc={_tr_init:sc,_tr_stored_block:cc,_tr_flush_block:uc,_tr_tally:lc,_tr_align:fc};const hc=(t,n,e,r)=>{let i=t&65535|0,o=t>>>16&65535|0,a=0;for(;e!==0;){a=e>2e3?2e3:e,e-=a;do i=i+n[r++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0};var Qt=hc;const pc=()=>{let t,n=[];for(var e=0;e<256;e++){t=e;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;n[e]=t}return n},gc=new Uint32Array(pc()),wc=(t,n,e,r)=>{const i=gc,o=r+e;t^=-1;for(let a=r;a<o;a++)t=t>>>8^i[(t^n[a])&255];return t^-1};var ye=wc,xt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},sn={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:yc,_tr_stored_block:kr,_tr_flush_block:_c,_tr_tally:et,_tr_align:mc}=dc,{Z_NO_FLUSH:tt,Z_PARTIAL_FLUSH:bc,Z_FULL_FLUSH:vc,Z_FINISH:Pe,Z_BLOCK:xi,Z_OK:be,Z_STREAM_END:ki,Z_STREAM_ERROR:Me,Z_DATA_ERROR:Ec,Z_BUF_ERROR:Kn,Z_DEFAULT_COMPRESSION:Ac,Z_FILTERED:Sc,Z_HUFFMAN_ONLY:wn,Z_RLE:xc,Z_FIXED:kc,Z_DEFAULT_STRATEGY:Ic,Z_UNKNOWN:Oc,Z_DEFLATED:Cn}=sn,Tc=9,Rc=15,Lc=8,Pc=29,Dc=256,Ir=Dc+1+Pc,Nc=30,Bc=19,Cc=2*Ir+1,Uc=15,re=3,Qe=258,ze=Qe+re+1,jc=32,kt=42,ei=57,Or=69,Tr=73,Rr=91,Lr=103,ut=113,zt=666,Ae=1,Pt=2,ht=3,Dt=4,Mc=3,lt=(t,n)=>(t.msg=xt[n],n),Ii=t=>t*2-(t>4?9:0),Je=t=>{let n=t.length;for(;--n>=0;)t[n]=0},zc=t=>{let n,e,r,i=t.w_size;n=t.hash_size,r=n;do e=t.head[--r],t.head[r]=e>=i?e-i:0;while(--n);n=i,r=n;do e=t.prev[--r],t.prev[r]=e>=i?e-i:0;while(--n)};let $c=(t,n,e)=>(n<<t.hash_shift^e)&t.hash_mask,nt=$c;const Oe=t=>{const n=t.state;let e=n.pending;e>t.avail_out&&(e=t.avail_out),e!==0&&(t.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+e),t.next_out),t.next_out+=e,n.pending_out+=e,t.total_out+=e,t.avail_out-=e,n.pending-=e,n.pending===0&&(n.pending_out=0))},Te=(t,n)=>{_c(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,n),t.block_start=t.strstart,Oe(t.strm)},se=(t,n)=>{t.pending_buf[t.pending++]=n},jt=(t,n)=>{t.pending_buf[t.pending++]=n>>>8&255,t.pending_buf[t.pending++]=n&255},Pr=(t,n,e,r)=>{let i=t.avail_in;return i>r&&(i=r),i===0?0:(t.avail_in-=i,n.set(t.input.subarray(t.next_in,t.next_in+i),e),t.state.wrap===1?t.adler=Qt(t.adler,n,i,e):t.state.wrap===2&&(t.adler=ye(t.adler,n,i,e)),t.next_in+=i,t.total_in+=i,i)},ya=(t,n)=>{let e=t.max_chain_length,r=t.strstart,i,o,a=t.prev_length,s=t.nice_match;const l=t.strstart>t.w_size-ze?t.strstart-(t.w_size-ze):0,c=t.window,u=t.w_mask,x=t.prev,h=t.strstart+Qe;let f=c[r+a-1],b=c[r+a];t.prev_length>=t.good_match&&(e>>=2),s>t.lookahead&&(s=t.lookahead);do if(i=n,!(c[i+a]!==b||c[i+a-1]!==f||c[i]!==c[r]||c[++i]!==c[r+1])){r+=2,i++;do;while(c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&r<h);if(o=Qe-(h-r),r=h-Qe,o>a){if(t.match_start=n,a=o,o>=s)break;f=c[r+a-1],b=c[r+a]}}while((n=x[n&u])>l&&--e!==0);return a<=t.lookahead?a:t.lookahead},It=t=>{const n=t.w_size;let e,r,i;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=n+(n-ze)&&(t.window.set(t.window.subarray(n,n+n-r),0),t.match_start-=n,t.strstart-=n,t.block_start-=n,t.insert>t.strstart&&(t.insert=t.strstart),zc(t),r+=n),t.strm.avail_in===0)break;if(e=Pr(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=e,t.lookahead+t.insert>=re)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=nt(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=nt(t,t.ins_h,t.window[i+re-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<re)););}while(t.lookahead<ze&&t.strm.avail_in!==0)},_a=(t,n)=>{let e=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,r,i,o,a=0,s=t.strm.avail_in;do{if(r=65535,o=t.bi_valid+42>>3,t.strm.avail_out<o||(o=t.strm.avail_out-o,i=t.strstart-t.block_start,r>i+t.strm.avail_in&&(r=i+t.strm.avail_in),r>o&&(r=o),r<e&&(r===0&&n!==Pe||n===tt||r!==i+t.strm.avail_in)))break;a=n===Pe&&r===i+t.strm.avail_in?1:0,kr(t,0,0,a),t.pending_buf[t.pending-4]=r,t.pending_buf[t.pending-3]=r>>8,t.pending_buf[t.pending-2]=~r,t.pending_buf[t.pending-1]=~r>>8,Oe(t.strm),i&&(i>r&&(i=r),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+i),t.strm.next_out),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i,t.block_start+=i,r-=i),r&&(Pr(t.strm,t.strm.output,t.strm.next_out,r),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r)}while(a===0);return s-=t.strm.avail_in,s&&(s>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=s&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-s,t.strm.next_in),t.strstart),t.strstart+=s,t.insert+=s>t.w_size-t.insert?t.w_size-t.insert:s),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),a?Dt:n!==tt&&n!==Pe&&t.strm.avail_in===0&&t.strstart===t.block_start?Pt:(o=t.window_size-t.strstart,t.strm.avail_in>o&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,o+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),o>t.strm.avail_in&&(o=t.strm.avail_in),o&&(Pr(t.strm,t.window,t.strstart,o),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.high_water<t.strstart&&(t.high_water=t.strstart),o=t.bi_valid+42>>3,o=t.pending_buf_size-o>65535?65535:t.pending_buf_size-o,e=o>t.w_size?t.w_size:o,i=t.strstart-t.block_start,(i>=e||(i||n===Pe)&&n!==tt&&t.strm.avail_in===0&&i<=o)&&(r=i>o?o:i,a=n===Pe&&t.strm.avail_in===0&&r===i?1:0,kr(t,t.block_start,r,a),t.block_start+=r,Oe(t.strm)),a?ht:Ae)},Wn=(t,n)=>{let e,r;for(;;){if(t.lookahead<ze){if(It(t),t.lookahead<ze&&n===tt)return Ae;if(t.lookahead===0)break}if(e=0,t.lookahead>=re&&(t.ins_h=nt(t,t.ins_h,t.window[t.strstart+re-1]),e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),e!==0&&t.strstart-e<=t.w_size-ze&&(t.match_length=ya(t,e)),t.match_length>=re)if(r=et(t,t.strstart-t.match_start,t.match_length-re),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=re){t.match_length--;do t.strstart++,t.ins_h=nt(t,t.ins_h,t.window[t.strstart+re-1]),e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=nt(t,t.ins_h,t.window[t.strstart+1]);else r=et(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(Te(t,!1),t.strm.avail_out===0))return Ae}return t.insert=t.strstart<re-1?t.strstart:re-1,n===Pe?(Te(t,!0),t.strm.avail_out===0?ht:Dt):t.sym_next&&(Te(t,!1),t.strm.avail_out===0)?Ae:Pt},_t=(t,n)=>{let e,r,i;for(;;){if(t.lookahead<ze){if(It(t),t.lookahead<ze&&n===tt)return Ae;if(t.lookahead===0)break}if(e=0,t.lookahead>=re&&(t.ins_h=nt(t,t.ins_h,t.window[t.strstart+re-1]),e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=re-1,e!==0&&t.prev_length<t.max_lazy_match&&t.strstart-e<=t.w_size-ze&&(t.match_length=ya(t,e),t.match_length<=5&&(t.strategy===Sc||t.match_length===re&&t.strstart-t.match_start>4096)&&(t.match_length=re-1)),t.prev_length>=re&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-re,r=et(t,t.strstart-1-t.prev_match,t.prev_length-re),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=nt(t,t.ins_h,t.window[t.strstart+re-1]),e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=re-1,t.strstart++,r&&(Te(t,!1),t.strm.avail_out===0))return Ae}else if(t.match_available){if(r=et(t,0,t.window[t.strstart-1]),r&&Te(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return Ae}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=et(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<re-1?t.strstart:re-1,n===Pe?(Te(t,!0),t.strm.avail_out===0?ht:Dt):t.sym_next&&(Te(t,!1),t.strm.avail_out===0)?Ae:Pt},qc=(t,n)=>{let e,r,i,o;const a=t.window;for(;;){if(t.lookahead<=Qe){if(It(t),t.lookahead<=Qe&&n===tt)return Ae;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=re&&t.strstart>0&&(i=t.strstart-1,r=a[i],r===a[++i]&&r===a[++i]&&r===a[++i])){o=t.strstart+Qe;do;while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);t.match_length=Qe-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=re?(e=et(t,1,t.match_length-re),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(e=et(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),e&&(Te(t,!1),t.strm.avail_out===0))return Ae}return t.insert=0,n===Pe?(Te(t,!0),t.strm.avail_out===0?ht:Dt):t.sym_next&&(Te(t,!1),t.strm.avail_out===0)?Ae:Pt},Fc=(t,n)=>{let e;for(;;){if(t.lookahead===0&&(It(t),t.lookahead===0)){if(n===tt)return Ae;break}if(t.match_length=0,e=et(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,e&&(Te(t,!1),t.strm.avail_out===0))return Ae}return t.insert=0,n===Pe?(Te(t,!0),t.strm.avail_out===0?ht:Dt):t.sym_next&&(Te(t,!1),t.strm.avail_out===0)?Ae:Pt};function Ce(t,n,e,r,i){this.good_length=t,this.max_lazy=n,this.nice_length=e,this.max_chain=r,this.func=i}const $t=[new Ce(0,0,0,0,_a),new Ce(4,4,8,4,Wn),new Ce(4,5,16,8,Wn),new Ce(4,6,32,32,Wn),new Ce(4,4,16,16,_t),new Ce(8,16,32,32,_t),new Ce(8,16,128,128,_t),new Ce(8,32,128,256,_t),new Ce(32,128,258,1024,_t),new Ce(32,258,258,4096,_t)],Vc=t=>{t.window_size=2*t.w_size,Je(t.head),t.max_lazy_match=$t[t.level].max_lazy,t.good_match=$t[t.level].good_length,t.nice_match=$t[t.level].nice_length,t.max_chain_length=$t[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=re-1,t.match_available=0,t.ins_h=0};function Zc(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Cn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Cc*2),this.dyn_dtree=new Uint16Array((2*Nc+1)*2),this.bl_tree=new Uint16Array((2*Bc+1)*2),Je(this.dyn_ltree),Je(this.dyn_dtree),Je(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Uc+1),this.heap=new Uint16Array(2*Ir+1),Je(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Ir+1),Je(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const cn=t=>{if(!t)return 1;const n=t.state;return!n||n.strm!==t||n.status!==kt&&n.status!==ei&&n.status!==Or&&n.status!==Tr&&n.status!==Rr&&n.status!==Lr&&n.status!==ut&&n.status!==zt?1:0},ma=t=>{if(cn(t))return lt(t,Me);t.total_in=t.total_out=0,t.data_type=Oc;const n=t.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap===2?ei:n.wrap?kt:ut,t.adler=n.wrap===2?0:1,n.last_flush=-2,yc(n),be},ba=t=>{const n=ma(t);return n===be&&Vc(t.state),n},Hc=(t,n)=>cn(t)||t.state.wrap!==2?Me:(t.state.gzhead=n,be),va=(t,n,e,r,i,o)=>{if(!t)return Me;let a=1;if(n===Ac&&(n=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>Tc||e!==Cn||r<8||r>15||n<0||n>9||o<0||o>kc||r===8&&a!==1)return lt(t,Me);r===8&&(r=9);const s=new Zc;return t.state=s,s.strm=t,s.status=kt,s.wrap=a,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+re-1)/re),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=(s.lit_bufsize-1)*3,s.level=n,s.strategy=o,s.method=e,ba(t)},Gc=(t,n)=>va(t,n,Cn,Rc,Lc,Ic),Kc=(t,n)=>{if(cn(t)||n>xi||n<0)return t?lt(t,Me):Me;const e=t.state;if(!t.output||t.avail_in!==0&&!t.input||e.status===zt&&n!==Pe)return lt(t,t.avail_out===0?Kn:Me);const r=e.last_flush;if(e.last_flush=n,e.pending!==0){if(Oe(t),t.avail_out===0)return e.last_flush=-1,be}else if(t.avail_in===0&&Ii(n)<=Ii(r)&&n!==Pe)return lt(t,Kn);if(e.status===zt&&t.avail_in!==0)return lt(t,Kn);if(e.status===kt&&e.wrap===0&&(e.status=ut),e.status===kt){let i=Cn+(e.w_bits-8<<4)<<8,o=-1;if(e.strategy>=wn||e.level<2?o=0:e.level<6?o=1:e.level===6?o=2:o=3,i|=o<<6,e.strstart!==0&&(i|=jc),i+=31-i%31,jt(e,i),e.strstart!==0&&(jt(e,t.adler>>>16),jt(e,t.adler&65535)),t.adler=1,e.status=ut,Oe(t),e.pending!==0)return e.last_flush=-1,be}if(e.status===ei){if(t.adler=0,se(e,31),se(e,139),se(e,8),e.gzhead)se(e,(e.gzhead.text?1:0)+(e.gzhead.hcrc?2:0)+(e.gzhead.extra?4:0)+(e.gzhead.name?8:0)+(e.gzhead.comment?16:0)),se(e,e.gzhead.time&255),se(e,e.gzhead.time>>8&255),se(e,e.gzhead.time>>16&255),se(e,e.gzhead.time>>24&255),se(e,e.level===9?2:e.strategy>=wn||e.level<2?4:0),se(e,e.gzhead.os&255),e.gzhead.extra&&e.gzhead.extra.length&&(se(e,e.gzhead.extra.length&255),se(e,e.gzhead.extra.length>>8&255)),e.gzhead.hcrc&&(t.adler=ye(t.adler,e.pending_buf,e.pending,0)),e.gzindex=0,e.status=Or;else if(se(e,0),se(e,0),se(e,0),se(e,0),se(e,0),se(e,e.level===9?2:e.strategy>=wn||e.level<2?4:0),se(e,Mc),e.status=ut,Oe(t),e.pending!==0)return e.last_flush=-1,be}if(e.status===Or){if(e.gzhead.extra){let i=e.pending,o=(e.gzhead.extra.length&65535)-e.gzindex;for(;e.pending+o>e.pending_buf_size;){let s=e.pending_buf_size-e.pending;if(e.pending_buf.set(e.gzhead.extra.subarray(e.gzindex,e.gzindex+s),e.pending),e.pending=e.pending_buf_size,e.gzhead.hcrc&&e.pending>i&&(t.adler=ye(t.adler,e.pending_buf,e.pending-i,i)),e.gzindex+=s,Oe(t),e.pending!==0)return e.last_flush=-1,be;i=0,o-=s}let a=new Uint8Array(e.gzhead.extra);e.pending_buf.set(a.subarray(e.gzindex,e.gzindex+o),e.pending),e.pending+=o,e.gzhead.hcrc&&e.pending>i&&(t.adler=ye(t.adler,e.pending_buf,e.pending-i,i)),e.gzindex=0}e.status=Tr}if(e.status===Tr){if(e.gzhead.name){let i=e.pending,o;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>i&&(t.adler=ye(t.adler,e.pending_buf,e.pending-i,i)),Oe(t),e.pending!==0)return e.last_flush=-1,be;i=0}e.gzindex<e.gzhead.name.length?o=e.gzhead.name.charCodeAt(e.gzindex++)&255:o=0,se(e,o)}while(o!==0);e.gzhead.hcrc&&e.pending>i&&(t.adler=ye(t.adler,e.pending_buf,e.pending-i,i)),e.gzindex=0}e.status=Rr}if(e.status===Rr){if(e.gzhead.comment){let i=e.pending,o;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>i&&(t.adler=ye(t.adler,e.pending_buf,e.pending-i,i)),Oe(t),e.pending!==0)return e.last_flush=-1,be;i=0}e.gzindex<e.gzhead.comment.length?o=e.gzhead.comment.charCodeAt(e.gzindex++)&255:o=0,se(e,o)}while(o!==0);e.gzhead.hcrc&&e.pending>i&&(t.adler=ye(t.adler,e.pending_buf,e.pending-i,i))}e.status=Lr}if(e.status===Lr){if(e.gzhead.hcrc){if(e.pending+2>e.pending_buf_size&&(Oe(t),e.pending!==0))return e.last_flush=-1,be;se(e,t.adler&255),se(e,t.adler>>8&255),t.adler=0}if(e.status=ut,Oe(t),e.pending!==0)return e.last_flush=-1,be}if(t.avail_in!==0||e.lookahead!==0||n!==tt&&e.status!==zt){let i=e.level===0?_a(e,n):e.strategy===wn?Fc(e,n):e.strategy===xc?qc(e,n):$t[e.level].func(e,n);if((i===ht||i===Dt)&&(e.status=zt),i===Ae||i===ht)return t.avail_out===0&&(e.last_flush=-1),be;if(i===Pt&&(n===bc?mc(e):n!==xi&&(kr(e,0,0,!1),n===vc&&(Je(e.head),e.lookahead===0&&(e.strstart=0,e.block_start=0,e.insert=0))),Oe(t),t.avail_out===0))return e.last_flush=-1,be}return n!==Pe?be:e.wrap<=0?ki:(e.wrap===2?(se(e,t.adler&255),se(e,t.adler>>8&255),se(e,t.adler>>16&255),se(e,t.adler>>24&255),se(e,t.total_in&255),se(e,t.total_in>>8&255),se(e,t.total_in>>16&255),se(e,t.total_in>>24&255)):(jt(e,t.adler>>>16),jt(e,t.adler&65535)),Oe(t),e.wrap>0&&(e.wrap=-e.wrap),e.pending!==0?be:ki)},Wc=t=>{if(cn(t))return Me;const n=t.state.status;return t.state=null,n===ut?lt(t,Ec):be},Yc=(t,n)=>{let e=n.length;if(cn(t))return Me;const r=t.state,i=r.wrap;if(i===2||i===1&&r.status!==kt||r.lookahead)return Me;if(i===1&&(t.adler=Qt(t.adler,n,e,0)),r.wrap=0,e>=r.w_size){i===0&&(Je(r.head),r.strstart=0,r.block_start=0,r.insert=0);let l=new Uint8Array(r.w_size);l.set(n.subarray(e-r.w_size,e),0),n=l,e=r.w_size}const o=t.avail_in,a=t.next_in,s=t.input;for(t.avail_in=e,t.next_in=0,t.input=n,It(r);r.lookahead>=re;){let l=r.strstart,c=r.lookahead-(re-1);do r.ins_h=nt(r,r.ins_h,r.window[l+re-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++;while(--c);r.strstart=l,r.lookahead=re-1,It(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=re-1,r.match_available=0,t.next_in=a,t.input=s,t.avail_in=o,r.wrap=i,be};var Xc=Gc,Jc=va,Qc=ba,eu=ma,tu=Hc,nu=Kc,ru=Wc,iu=Yc,ou="pako deflate (from Nodeca project)",Vt={deflateInit:Xc,deflateInit2:Jc,deflateReset:Qc,deflateResetKeep:eu,deflateSetHeader:tu,deflate:nu,deflateEnd:ru,deflateSetDictionary:iu,deflateInfo:ou};const au=(t,n)=>Object.prototype.hasOwnProperty.call(t,n);var su=function(t){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const e=n.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const r in e)au(e,r)&&(t[r]=e[r])}}return t},cu=t=>{let n=0;for(let r=0,i=t.length;r<i;r++)n+=t[r].length;const e=new Uint8Array(n);for(let r=0,i=0,o=t.length;r<o;r++){let a=t[r];e.set(a,i),i+=a.length}return e},Un={assign:su,flattenChunks:cu};let Ea=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Ea=!1}const en=new Uint8Array(256);for(let t=0;t<256;t++)en[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;en[254]=en[254]=1;var uu=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let n,e,r,i,o,a=t.length,s=0;for(i=0;i<a;i++)e=t.charCodeAt(i),(e&64512)===55296&&i+1<a&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(e=65536+(e-55296<<10)+(r-56320),i++)),s+=e<128?1:e<2048?2:e<65536?3:4;for(n=new Uint8Array(s),o=0,i=0;o<s;i++)e=t.charCodeAt(i),(e&64512)===55296&&i+1<a&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(e=65536+(e-55296<<10)+(r-56320),i++)),e<128?n[o++]=e:e<2048?(n[o++]=192|e>>>6,n[o++]=128|e&63):e<65536?(n[o++]=224|e>>>12,n[o++]=128|e>>>6&63,n[o++]=128|e&63):(n[o++]=240|e>>>18,n[o++]=128|e>>>12&63,n[o++]=128|e>>>6&63,n[o++]=128|e&63);return n};const lu=(t,n)=>{if(n<65534&&t.subarray&&Ea)return String.fromCharCode.apply(null,t.length===n?t:t.subarray(0,n));let e="";for(let r=0;r<n;r++)e+=String.fromCharCode(t[r]);return e};var fu=(t,n)=>{const e=n||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,n));let r,i;const o=new Array(e*2);for(i=0,r=0;r<e;){let a=t[r++];if(a<128){o[i++]=a;continue}let s=en[a];if(s>4){o[i++]=65533,r+=s-1;continue}for(a&=s===2?31:s===3?15:7;s>1&&r<e;)a=a<<6|t[r++]&63,s--;if(s>1){o[i++]=65533;continue}a<65536?o[i++]=a:(a-=65536,o[i++]=55296|a>>10&1023,o[i++]=56320|a&1023)}return lu(o,i)},du=(t,n)=>{n=n||t.length,n>t.length&&(n=t.length);let e=n-1;for(;e>=0&&(t[e]&192)===128;)e--;return e<0||e===0?n:e+en[t[e]]>n?e:n},tn={string2buf:uu,buf2string:fu,utf8border:du};function hu(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Aa=hu;const Sa=Object.prototype.toString,{Z_NO_FLUSH:pu,Z_SYNC_FLUSH:gu,Z_FULL_FLUSH:wu,Z_FINISH:yu,Z_OK:Tn,Z_STREAM_END:_u,Z_DEFAULT_COMPRESSION:mu,Z_DEFAULT_STRATEGY:bu,Z_DEFLATED:vu}=sn;function ti(t){this.options=Un.assign({level:mu,method:vu,chunkSize:16384,windowBits:15,memLevel:8,strategy:bu},t||{});let n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Aa,this.strm.avail_out=0;let e=Vt.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(e!==Tn)throw new Error(xt[e]);if(n.header&&Vt.deflateSetHeader(this.strm,n.header),n.dictionary){let r;if(typeof n.dictionary=="string"?r=tn.string2buf(n.dictionary):Sa.call(n.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(n.dictionary):r=n.dictionary,e=Vt.deflateSetDictionary(this.strm,r),e!==Tn)throw new Error(xt[e]);this._dict_set=!0}}ti.prototype.push=function(t,n){const e=this.strm,r=this.options.chunkSize;let i,o;if(this.ended)return!1;for(n===~~n?o=n:o=n===!0?yu:pu,typeof t=="string"?e.input=tn.string2buf(t):Sa.call(t)==="[object ArrayBuffer]"?e.input=new Uint8Array(t):e.input=t,e.next_in=0,e.avail_in=e.input.length;;){if(e.avail_out===0&&(e.output=new Uint8Array(r),e.next_out=0,e.avail_out=r),(o===gu||o===wu)&&e.avail_out<=6){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(i=Vt.deflate(e,o),i===_u)return e.next_out>0&&this.onData(e.output.subarray(0,e.next_out)),i=Vt.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Tn;if(e.avail_out===0){this.onData(e.output);continue}if(o>0&&e.next_out>0){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(e.avail_in===0)break}return!0};ti.prototype.onData=function(t){this.chunks.push(t)};ti.prototype.onEnd=function(t){t===Tn&&(this.result=Un.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};const yn=16209,Eu=16191;var Au=function(n,e){let r,i,o,a,s,l,c,u,x,h,f,b,C,D,O,B,q,I,v,_,E,T,M,L;const F=n.state;r=n.next_in,M=n.input,i=r+(n.avail_in-5),o=n.next_out,L=n.output,a=o-(e-n.avail_out),s=o+(n.avail_out-257),l=F.dmax,c=F.wsize,u=F.whave,x=F.wnext,h=F.window,f=F.hold,b=F.bits,C=F.lencode,D=F.distcode,O=(1<<F.lenbits)-1,B=(1<<F.distbits)-1;e:do{b<15&&(f+=M[r++]<<b,b+=8,f+=M[r++]<<b,b+=8),q=C[f&O];t:for(;;){if(I=q>>>24,f>>>=I,b-=I,I=q>>>16&255,I===0)L[o++]=q&65535;else if(I&16){v=q&65535,I&=15,I&&(b<I&&(f+=M[r++]<<b,b+=8),v+=f&(1<<I)-1,f>>>=I,b-=I),b<15&&(f+=M[r++]<<b,b+=8,f+=M[r++]<<b,b+=8),q=D[f&B];n:for(;;){if(I=q>>>24,f>>>=I,b-=I,I=q>>>16&255,I&16){if(_=q&65535,I&=15,b<I&&(f+=M[r++]<<b,b+=8,b<I&&(f+=M[r++]<<b,b+=8)),_+=f&(1<<I)-1,_>l){n.msg="invalid distance too far back",F.mode=yn;break e}if(f>>>=I,b-=I,I=o-a,_>I){if(I=_-I,I>u&&F.sane){n.msg="invalid distance too far back",F.mode=yn;break e}if(E=0,T=h,x===0){if(E+=c-I,I<v){v-=I;do L[o++]=h[E++];while(--I);E=o-_,T=L}}else if(x<I){if(E+=c+x-I,I-=x,I<v){v-=I;do L[o++]=h[E++];while(--I);if(E=0,x<v){I=x,v-=I;do L[o++]=h[E++];while(--I);E=o-_,T=L}}}else if(E+=x-I,I<v){v-=I;do L[o++]=h[E++];while(--I);E=o-_,T=L}for(;v>2;)L[o++]=T[E++],L[o++]=T[E++],L[o++]=T[E++],v-=3;v&&(L[o++]=T[E++],v>1&&(L[o++]=T[E++]))}else{E=o-_;do L[o++]=L[E++],L[o++]=L[E++],L[o++]=L[E++],v-=3;while(v>2);v&&(L[o++]=L[E++],v>1&&(L[o++]=L[E++]))}}else if(I&64){n.msg="invalid distance code",F.mode=yn;break e}else{q=D[(q&65535)+(f&(1<<I)-1)];continue n}break}}else if(I&64)if(I&32){F.mode=Eu;break e}else{n.msg="invalid literal/length code",F.mode=yn;break e}else{q=C[(q&65535)+(f&(1<<I)-1)];continue t}break}}while(r<i&&o<s);v=b>>3,r-=v,b-=v<<3,f&=(1<<b)-1,n.next_in=r,n.next_out=o,n.avail_in=r<i?5+(i-r):5-(r-i),n.avail_out=o<s?257+(s-o):257-(o-s),F.hold=f,F.bits=b};const mt=15,Oi=852,Ti=592,Ri=0,Yn=1,Li=2,Su=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),xu=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ku=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Iu=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Ou=(t,n,e,r,i,o,a,s)=>{const l=s.bits;let c=0,u=0,x=0,h=0,f=0,b=0,C=0,D=0,O=0,B=0,q,I,v,_,E,T=null,M;const L=new Uint16Array(mt+1),F=new Uint16Array(mt+1);let R=null,N,d,m;for(c=0;c<=mt;c++)L[c]=0;for(u=0;u<r;u++)L[n[e+u]]++;for(f=l,h=mt;h>=1&&L[h]===0;h--);if(f>h&&(f=h),h===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,s.bits=1,0;for(x=1;x<h&&L[x]===0;x++);for(f<x&&(f=x),D=1,c=1;c<=mt;c++)if(D<<=1,D-=L[c],D<0)return-1;if(D>0&&(t===Ri||h!==1))return-1;for(F[1]=0,c=1;c<mt;c++)F[c+1]=F[c]+L[c];for(u=0;u<r;u++)n[e+u]!==0&&(a[F[n[e+u]]++]=u);if(t===Ri?(T=R=a,M=20):t===Yn?(T=Su,R=xu,M=257):(T=ku,R=Iu,M=0),B=0,u=0,c=x,E=o,b=f,C=0,v=-1,O=1<<f,_=O-1,t===Yn&&O>Oi||t===Li&&O>Ti)return 1;for(;;){N=c-C,a[u]+1<M?(d=0,m=a[u]):a[u]>=M?(d=R[a[u]-M],m=T[a[u]-M]):(d=32+64,m=0),q=1<<c-C,I=1<<b,x=I;do I-=q,i[E+(B>>C)+I]=N<<24|d<<16|m|0;while(I!==0);for(q=1<<c-1;B&q;)q>>=1;if(q!==0?(B&=q-1,B+=q):B=0,u++,--L[c]===0){if(c===h)break;c=n[e+a[u]]}if(c>f&&(B&_)!==v){for(C===0&&(C=f),E+=x,b=c-C,D=1<<b;b+C<h&&(D-=L[b+C],!(D<=0));)b++,D<<=1;if(O+=1<<b,t===Yn&&O>Oi||t===Li&&O>Ti)return 1;v=B&_,i[v]=f<<24|b<<16|E-o|0}}return B!==0&&(i[E+B]=c-C<<24|64<<16|0),s.bits=f,0};var Zt=Ou;const Tu=0,xa=1,ka=2,{Z_FINISH:Pi,Z_BLOCK:Ru,Z_TREES:_n,Z_OK:pt,Z_STREAM_END:Lu,Z_NEED_DICT:Pu,Z_STREAM_ERROR:Ne,Z_DATA_ERROR:Ia,Z_MEM_ERROR:Oa,Z_BUF_ERROR:Du,Z_DEFLATED:Di}=sn,jn=16180,Ni=16181,Bi=16182,Ci=16183,Ui=16184,ji=16185,Mi=16186,zi=16187,$i=16188,qi=16189,Rn=16190,Ze=16191,Xn=16192,Fi=16193,Jn=16194,Vi=16195,Zi=16196,Hi=16197,Gi=16198,mn=16199,bn=16200,Ki=16201,Wi=16202,Yi=16203,Xi=16204,Ji=16205,Qn=16206,Qi=16207,eo=16208,de=16209,Ta=16210,Ra=16211,Nu=852,Bu=592,Cu=15,Uu=Cu,to=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function ju(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const wt=t=>{if(!t)return 1;const n=t.state;return!n||n.strm!==t||n.mode<jn||n.mode>Ra?1:0},La=t=>{if(wt(t))return Ne;const n=t.state;return t.total_in=t.total_out=n.total=0,t.msg="",n.wrap&&(t.adler=n.wrap&1),n.mode=jn,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(Nu),n.distcode=n.distdyn=new Int32Array(Bu),n.sane=1,n.back=-1,pt},Pa=t=>{if(wt(t))return Ne;const n=t.state;return n.wsize=0,n.whave=0,n.wnext=0,La(t)},Da=(t,n)=>{let e;if(wt(t))return Ne;const r=t.state;return n<0?(e=0,n=-n):(e=(n>>4)+5,n<48&&(n&=15)),n&&(n<8||n>15)?Ne:(r.window!==null&&r.wbits!==n&&(r.window=null),r.wrap=e,r.wbits=n,Pa(t))},Na=(t,n)=>{if(!t)return Ne;const e=new ju;t.state=e,e.strm=t,e.window=null,e.mode=jn;const r=Da(t,n);return r!==pt&&(t.state=null),r},Mu=t=>Na(t,Uu);let no=!0,er,tr;const zu=t=>{if(no){er=new Int32Array(512),tr=new Int32Array(32);let n=0;for(;n<144;)t.lens[n++]=8;for(;n<256;)t.lens[n++]=9;for(;n<280;)t.lens[n++]=7;for(;n<288;)t.lens[n++]=8;for(Zt(xa,t.lens,0,288,er,0,t.work,{bits:9}),n=0;n<32;)t.lens[n++]=5;Zt(ka,t.lens,0,32,tr,0,t.work,{bits:5}),no=!1}t.lencode=er,t.lenbits=9,t.distcode=tr,t.distbits=5},Ba=(t,n,e,r)=>{let i;const o=t.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(n.subarray(e-o.wsize,e),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(n.subarray(e-r,e-r+i),o.wnext),r-=i,r?(o.window.set(n.subarray(e-r,e),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},$u=(t,n)=>{let e,r,i,o,a,s,l,c,u,x,h,f,b,C,D=0,O,B,q,I,v,_,E,T;const M=new Uint8Array(4);let L,F;const R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(wt(t)||!t.output||!t.input&&t.avail_in!==0)return Ne;e=t.state,e.mode===Ze&&(e.mode=Xn),a=t.next_out,i=t.output,l=t.avail_out,o=t.next_in,r=t.input,s=t.avail_in,c=e.hold,u=e.bits,x=s,h=l,T=pt;e:for(;;)switch(e.mode){case jn:if(e.wrap===0){e.mode=Xn;break}for(;u<16;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(e.wrap&2&&c===35615){e.wbits===0&&(e.wbits=15),e.check=0,M[0]=c&255,M[1]=c>>>8&255,e.check=ye(e.check,M,2,0),c=0,u=0,e.mode=Ni;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",e.mode=de;break}if((c&15)!==Di){t.msg="unknown compression method",e.mode=de;break}if(c>>>=4,u-=4,E=(c&15)+8,e.wbits===0&&(e.wbits=E),E>15||E>e.wbits){t.msg="invalid window size",e.mode=de;break}e.dmax=1<<e.wbits,e.flags=0,t.adler=e.check=1,e.mode=c&512?qi:Ze,c=0,u=0;break;case Ni:for(;u<16;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(e.flags=c,(e.flags&255)!==Di){t.msg="unknown compression method",e.mode=de;break}if(e.flags&57344){t.msg="unknown header flags set",e.mode=de;break}e.head&&(e.head.text=c>>8&1),e.flags&512&&e.wrap&4&&(M[0]=c&255,M[1]=c>>>8&255,e.check=ye(e.check,M,2,0)),c=0,u=0,e.mode=Bi;case Bi:for(;u<32;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}e.head&&(e.head.time=c),e.flags&512&&e.wrap&4&&(M[0]=c&255,M[1]=c>>>8&255,M[2]=c>>>16&255,M[3]=c>>>24&255,e.check=ye(e.check,M,4,0)),c=0,u=0,e.mode=Ci;case Ci:for(;u<16;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}e.head&&(e.head.xflags=c&255,e.head.os=c>>8),e.flags&512&&e.wrap&4&&(M[0]=c&255,M[1]=c>>>8&255,e.check=ye(e.check,M,2,0)),c=0,u=0,e.mode=Ui;case Ui:if(e.flags&1024){for(;u<16;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}e.length=c,e.head&&(e.head.extra_len=c),e.flags&512&&e.wrap&4&&(M[0]=c&255,M[1]=c>>>8&255,e.check=ye(e.check,M,2,0)),c=0,u=0}else e.head&&(e.head.extra=null);e.mode=ji;case ji:if(e.flags&1024&&(f=e.length,f>s&&(f=s),f&&(e.head&&(E=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(r.subarray(o,o+f),E)),e.flags&512&&e.wrap&4&&(e.check=ye(e.check,r,f,o)),s-=f,o+=f,e.length-=f),e.length))break e;e.length=0,e.mode=Mi;case Mi:if(e.flags&2048){if(s===0)break e;f=0;do E=r[o+f++],e.head&&E&&e.length<65536&&(e.head.name+=String.fromCharCode(E));while(E&&f<s);if(e.flags&512&&e.wrap&4&&(e.check=ye(e.check,r,f,o)),s-=f,o+=f,E)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=zi;case zi:if(e.flags&4096){if(s===0)break e;f=0;do E=r[o+f++],e.head&&E&&e.length<65536&&(e.head.comment+=String.fromCharCode(E));while(E&&f<s);if(e.flags&512&&e.wrap&4&&(e.check=ye(e.check,r,f,o)),s-=f,o+=f,E)break e}else e.head&&(e.head.comment=null);e.mode=$i;case $i:if(e.flags&512){for(;u<16;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(e.wrap&4&&c!==(e.check&65535)){t.msg="header crc mismatch",e.mode=de;break}c=0,u=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),t.adler=e.check=0,e.mode=Ze;break;case qi:for(;u<32;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}t.adler=e.check=to(c),c=0,u=0,e.mode=Rn;case Rn:if(e.havedict===0)return t.next_out=a,t.avail_out=l,t.next_in=o,t.avail_in=s,e.hold=c,e.bits=u,Pu;t.adler=e.check=1,e.mode=Ze;case Ze:if(n===Ru||n===_n)break e;case Xn:if(e.last){c>>>=u&7,u-=u&7,e.mode=Qn;break}for(;u<3;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}switch(e.last=c&1,c>>>=1,u-=1,c&3){case 0:e.mode=Fi;break;case 1:if(zu(e),e.mode=mn,n===_n){c>>>=2,u-=2;break e}break;case 2:e.mode=Zi;break;case 3:t.msg="invalid block type",e.mode=de}c>>>=2,u-=2;break;case Fi:for(c>>>=u&7,u-=u&7;u<32;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",e.mode=de;break}if(e.length=c&65535,c=0,u=0,e.mode=Jn,n===_n)break e;case Jn:e.mode=Vi;case Vi:if(f=e.length,f){if(f>s&&(f=s),f>l&&(f=l),f===0)break e;i.set(r.subarray(o,o+f),a),s-=f,o+=f,l-=f,a+=f,e.length-=f;break}e.mode=Ze;break;case Zi:for(;u<14;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(e.nlen=(c&31)+257,c>>>=5,u-=5,e.ndist=(c&31)+1,c>>>=5,u-=5,e.ncode=(c&15)+4,c>>>=4,u-=4,e.nlen>286||e.ndist>30){t.msg="too many length or distance symbols",e.mode=de;break}e.have=0,e.mode=Hi;case Hi:for(;e.have<e.ncode;){for(;u<3;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}e.lens[R[e.have++]]=c&7,c>>>=3,u-=3}for(;e.have<19;)e.lens[R[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,L={bits:e.lenbits},T=Zt(Tu,e.lens,0,19,e.lencode,0,e.work,L),e.lenbits=L.bits,T){t.msg="invalid code lengths set",e.mode=de;break}e.have=0,e.mode=Gi;case Gi:for(;e.have<e.nlen+e.ndist;){for(;D=e.lencode[c&(1<<e.lenbits)-1],O=D>>>24,B=D>>>16&255,q=D&65535,!(O<=u);){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(q<16)c>>>=O,u-=O,e.lens[e.have++]=q;else{if(q===16){for(F=O+2;u<F;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(c>>>=O,u-=O,e.have===0){t.msg="invalid bit length repeat",e.mode=de;break}E=e.lens[e.have-1],f=3+(c&3),c>>>=2,u-=2}else if(q===17){for(F=O+3;u<F;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}c>>>=O,u-=O,E=0,f=3+(c&7),c>>>=3,u-=3}else{for(F=O+7;u<F;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}c>>>=O,u-=O,E=0,f=11+(c&127),c>>>=7,u-=7}if(e.have+f>e.nlen+e.ndist){t.msg="invalid bit length repeat",e.mode=de;break}for(;f--;)e.lens[e.have++]=E}}if(e.mode===de)break;if(e.lens[256]===0){t.msg="invalid code -- missing end-of-block",e.mode=de;break}if(e.lenbits=9,L={bits:e.lenbits},T=Zt(xa,e.lens,0,e.nlen,e.lencode,0,e.work,L),e.lenbits=L.bits,T){t.msg="invalid literal/lengths set",e.mode=de;break}if(e.distbits=6,e.distcode=e.distdyn,L={bits:e.distbits},T=Zt(ka,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,L),e.distbits=L.bits,T){t.msg="invalid distances set",e.mode=de;break}if(e.mode=mn,n===_n)break e;case mn:e.mode=bn;case bn:if(s>=6&&l>=258){t.next_out=a,t.avail_out=l,t.next_in=o,t.avail_in=s,e.hold=c,e.bits=u,Au(t,h),a=t.next_out,i=t.output,l=t.avail_out,o=t.next_in,r=t.input,s=t.avail_in,c=e.hold,u=e.bits,e.mode===Ze&&(e.back=-1);break}for(e.back=0;D=e.lencode[c&(1<<e.lenbits)-1],O=D>>>24,B=D>>>16&255,q=D&65535,!(O<=u);){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(B&&!(B&240)){for(I=O,v=B,_=q;D=e.lencode[_+((c&(1<<I+v)-1)>>I)],O=D>>>24,B=D>>>16&255,q=D&65535,!(I+O<=u);){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}c>>>=I,u-=I,e.back+=I}if(c>>>=O,u-=O,e.back+=O,e.length=q,B===0){e.mode=Ji;break}if(B&32){e.back=-1,e.mode=Ze;break}if(B&64){t.msg="invalid literal/length code",e.mode=de;break}e.extra=B&15,e.mode=Ki;case Ki:if(e.extra){for(F=e.extra;u<F;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}e.length+=c&(1<<e.extra)-1,c>>>=e.extra,u-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=Wi;case Wi:for(;D=e.distcode[c&(1<<e.distbits)-1],O=D>>>24,B=D>>>16&255,q=D&65535,!(O<=u);){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(!(B&240)){for(I=O,v=B,_=q;D=e.distcode[_+((c&(1<<I+v)-1)>>I)],O=D>>>24,B=D>>>16&255,q=D&65535,!(I+O<=u);){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}c>>>=I,u-=I,e.back+=I}if(c>>>=O,u-=O,e.back+=O,B&64){t.msg="invalid distance code",e.mode=de;break}e.offset=q,e.extra=B&15,e.mode=Yi;case Yi:if(e.extra){for(F=e.extra;u<F;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}e.offset+=c&(1<<e.extra)-1,c>>>=e.extra,u-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){t.msg="invalid distance too far back",e.mode=de;break}e.mode=Xi;case Xi:if(l===0)break e;if(f=h-l,e.offset>f){if(f=e.offset-f,f>e.whave&&e.sane){t.msg="invalid distance too far back",e.mode=de;break}f>e.wnext?(f-=e.wnext,b=e.wsize-f):b=e.wnext-f,f>e.length&&(f=e.length),C=e.window}else C=i,b=a-e.offset,f=e.length;f>l&&(f=l),l-=f,e.length-=f;do i[a++]=C[b++];while(--f);e.length===0&&(e.mode=bn);break;case Ji:if(l===0)break e;i[a++]=e.length,l--,e.mode=bn;break;case Qn:if(e.wrap){for(;u<32;){if(s===0)break e;s--,c|=r[o++]<<u,u+=8}if(h-=l,t.total_out+=h,e.total+=h,e.wrap&4&&h&&(t.adler=e.check=e.flags?ye(e.check,i,h,a-h):Qt(e.check,i,h,a-h)),h=l,e.wrap&4&&(e.flags?c:to(c))!==e.check){t.msg="incorrect data check",e.mode=de;break}c=0,u=0}e.mode=Qi;case Qi:if(e.wrap&&e.flags){for(;u<32;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(e.wrap&4&&c!==(e.total&4294967295)){t.msg="incorrect length check",e.mode=de;break}c=0,u=0}e.mode=eo;case eo:T=Lu;break e;case de:T=Ia;break e;case Ta:return Oa;case Ra:default:return Ne}return t.next_out=a,t.avail_out=l,t.next_in=o,t.avail_in=s,e.hold=c,e.bits=u,(e.wsize||h!==t.avail_out&&e.mode<de&&(e.mode<Qn||n!==Pi))&&Ba(t,t.output,t.next_out,h-t.avail_out),x-=t.avail_in,h-=t.avail_out,t.total_in+=x,t.total_out+=h,e.total+=h,e.wrap&4&&h&&(t.adler=e.check=e.flags?ye(e.check,i,h,t.next_out-h):Qt(e.check,i,h,t.next_out-h)),t.data_type=e.bits+(e.last?64:0)+(e.mode===Ze?128:0)+(e.mode===mn||e.mode===Jn?256:0),(x===0&&h===0||n===Pi)&&T===pt&&(T=Du),T},qu=t=>{if(wt(t))return Ne;let n=t.state;return n.window&&(n.window=null),t.state=null,pt},Fu=(t,n)=>{if(wt(t))return Ne;const e=t.state;return e.wrap&2?(e.head=n,n.done=!1,pt):Ne},Vu=(t,n)=>{const e=n.length;let r,i,o;return wt(t)||(r=t.state,r.wrap!==0&&r.mode!==Rn)?Ne:r.mode===Rn&&(i=1,i=Qt(i,n,e,0),i!==r.check)?Ia:(o=Ba(t,n,e,e),o?(r.mode=Ta,Oa):(r.havedict=1,pt))};var Zu=Pa,Hu=Da,Gu=La,Ku=Mu,Wu=Na,Yu=$u,Xu=qu,Ju=Fu,Qu=Vu,el="pako inflate (from Nodeca project)",Ke={inflateReset:Zu,inflateReset2:Hu,inflateResetKeep:Gu,inflateInit:Ku,inflateInit2:Wu,inflate:Yu,inflateEnd:Xu,inflateGetHeader:Ju,inflateSetDictionary:Qu,inflateInfo:el};function tl(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var nl=tl;const Ca=Object.prototype.toString,{Z_NO_FLUSH:rl,Z_FINISH:il,Z_OK:nn,Z_STREAM_END:nr,Z_NEED_DICT:rr,Z_STREAM_ERROR:ol,Z_DATA_ERROR:ro,Z_MEM_ERROR:al}=sn;function un(t){this.options=Un.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(t&&t.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(n.windowBits&15||(n.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Aa,this.strm.avail_out=0;let e=Ke.inflateInit2(this.strm,n.windowBits);if(e!==nn)throw new Error(xt[e]);if(this.header=new nl,Ke.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=tn.string2buf(n.dictionary):Ca.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(e=Ke.inflateSetDictionary(this.strm,n.dictionary),e!==nn)))throw new Error(xt[e])}un.prototype.push=function(t,n){const e=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let o,a,s;if(this.ended)return!1;for(n===~~n?a=n:a=n===!0?il:rl,Ca.call(t)==="[object ArrayBuffer]"?e.input=new Uint8Array(t):e.input=t,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(r),e.next_out=0,e.avail_out=r),o=Ke.inflate(e,a),o===rr&&i&&(o=Ke.inflateSetDictionary(e,i),o===nn?o=Ke.inflate(e,a):o===ro&&(o=rr));e.avail_in>0&&o===nr&&e.state.wrap>0&&t[e.next_in]!==0;)Ke.inflateReset(e),o=Ke.inflate(e,a);switch(o){case ol:case ro:case rr:case al:return this.onEnd(o),this.ended=!0,!1}if(s=e.avail_out,e.next_out&&(e.avail_out===0||o===nr))if(this.options.to==="string"){let l=tn.utf8border(e.output,e.next_out),c=e.next_out-l,u=tn.buf2string(e.output,l);e.next_out=c,e.avail_out=r-c,c&&e.output.set(e.output.subarray(l,l+c),0),this.onData(u)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(o===nn&&s===0)){if(o===nr)return o=Ke.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};un.prototype.onData=function(t){this.chunks.push(t)};un.prototype.onEnd=function(t){t===nn&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Un.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function ni(t,n){const e=new un(n);if(e.push(t),e.err)throw e.msg||xt[e.err];return e.result}function sl(t,n){return n=n||{},n.raw=!0,ni(t,n)}var cl=un,ul=ni,ll=sl,fl=ni,dl=sn,hl={Inflate:cl,inflate:ul,inflateRaw:ll,ungzip:fl,constants:dl};const{Inflate:Ed,inflate:pl,inflateRaw:Ad,ungzip:Sd}=hl;var gl=pl,ir={exports:{}},or={},io;function Ua(){if(io)return or;io=1;function t(v){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},t(v)}function n(v,_){for(var E=0;E<_.length;E++){var T=_[E];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(v,r(T.key),T)}}function e(v,_,E){return _&&n(v.prototype,_),E&&n(v,E),Object.defineProperty(v,"prototype",{writable:!1}),v}function r(v){var _=i(v,"string");return t(_)==="symbol"?_:String(_)}function i(v,_){if(t(v)!=="object"||v===null)return v;var E=v[Symbol.toPrimitive];if(E!==void 0){var T=E.call(v,_||"default");if(t(T)!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(v)}function o(v,_){if(!(v instanceof _))throw new TypeError("Cannot call a class as a function")}function a(v,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(_&&_.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),Object.defineProperty(v,"prototype",{writable:!1}),_&&s(v,_)}function s(v,_){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(T,M){return T.__proto__=M,T},s(v,_)}function l(v){var _=x();return function(){var T=h(v),M;if(_){var L=h(this).constructor;M=Reflect.construct(T,arguments,L)}else M=T.apply(this,arguments);return c(this,M)}}function c(v,_){if(_&&(t(_)==="object"||typeof _=="function"))return _;if(_!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return u(v)}function u(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function x(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function h(v){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(E){return E.__proto__||Object.getPrototypeOf(E)},h(v)}var f={},b,C;function D(v,_,E){E||(E=Error);function T(L,F,R){return typeof _=="string"?_:_(L,F,R)}var M=function(L){a(R,L);var F=l(R);function R(N,d,m){var j;return o(this,R),j=F.call(this,T(N,d,m)),j.code=v,j}return e(R)}(E);f[v]=M}function O(v,_){if(Array.isArray(v)){var E=v.length;return v=v.map(function(T){return String(T)}),E>2?"one of ".concat(_," ").concat(v.slice(0,E-1).join(", "),", or ")+v[E-1]:E===2?"one of ".concat(_," ").concat(v[0]," or ").concat(v[1]):"of ".concat(_," ").concat(v[0])}else return"of ".concat(_," ").concat(String(v))}function B(v,_,E){return v.substr(!E||E<0?0:+E,_.length)===_}function q(v,_,E){return(E===void 0||E>v.length)&&(E=v.length),v.substring(E-_.length,E)===_}function I(v,_,E){return typeof E!="number"&&(E=0),E+_.length>v.length?!1:v.indexOf(_,E)!==-1}return D("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),D("ERR_INVALID_ARG_TYPE",function(v,_,E){b===void 0&&(b=Dr()),b(typeof v=="string","'name' must be a string");var T;typeof _=="string"&&B(_,"not ")?(T="must not be",_=_.replace(/^not /,"")):T="must be";var M;if(q(v," argument"))M="The ".concat(v," ").concat(T," ").concat(O(_,"type"));else{var L=I(v,".")?"property":"argument";M='The "'.concat(v,'" ').concat(L," ").concat(T," ").concat(O(_,"type"))}return M+=". Received type ".concat(t(E)),M},TypeError),D("ERR_INVALID_ARG_VALUE",function(v,_){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";C===void 0&&(C=Kt);var T=C.inspect(_);return T.length>128&&(T="".concat(T.slice(0,128),"...")),"The argument '".concat(v,"' ").concat(E,". Received ").concat(T)},TypeError),D("ERR_INVALID_RETURN_VALUE",function(v,_,E){var T;return E&&E.constructor&&E.constructor.name?T="instance of ".concat(E.constructor.name):T="type ".concat(t(E)),"Expected ".concat(v,' to be returned from the "').concat(_,'"')+" function but got ".concat(T,".")},TypeError),D("ERR_MISSING_ARGS",function(){for(var v=arguments.length,_=new Array(v),E=0;E<v;E++)_[E]=arguments[E];b===void 0&&(b=Dr()),b(_.length>0,"At least one arg needs to be specified");var T="The ",M=_.length;switch(_=_.map(function(L){return'"'.concat(L,'"')}),M){case 1:T+="".concat(_[0]," argument");break;case 2:T+="".concat(_[0]," and ").concat(_[1]," arguments");break;default:T+=_.slice(0,M-1).join(", "),T+=", and ".concat(_[M-1]," arguments");break}return"".concat(T," must be specified")},TypeError),or.codes=f,or}var ar,oo;function wl(){if(oo)return ar;oo=1;function t(S,P){var Z=Object.keys(S);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(S);P&&($=$.filter(function(Y){return Object.getOwnPropertyDescriptor(S,Y).enumerable})),Z.push.apply(Z,$)}return Z}function n(S){for(var P=1;P<arguments.length;P++){var Z=arguments[P]!=null?arguments[P]:{};P%2?t(Object(Z),!0).forEach(function($){e(S,$,Z[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(Z)):t(Object(Z)).forEach(function($){Object.defineProperty(S,$,Object.getOwnPropertyDescriptor(Z,$))})}return S}function e(S,P,Z){return P=a(P),P in S?Object.defineProperty(S,P,{value:Z,enumerable:!0,configurable:!0,writable:!0}):S[P]=Z,S}function r(S,P){if(!(S instanceof P))throw new TypeError("Cannot call a class as a function")}function i(S,P){for(var Z=0;Z<P.length;Z++){var $=P[Z];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(S,a($.key),$)}}function o(S,P,Z){return P&&i(S.prototype,P),Z&&i(S,Z),Object.defineProperty(S,"prototype",{writable:!1}),S}function a(S){var P=s(S,"string");return B(P)==="symbol"?P:String(P)}function s(S,P){if(B(S)!=="object"||S===null)return S;var Z=S[Symbol.toPrimitive];if(Z!==void 0){var $=Z.call(S,P||"default");if(B($)!=="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(S)}function l(S,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(P&&P.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,"prototype",{writable:!1}),P&&D(S,P)}function c(S){var P=b();return function(){var $=O(S),Y;if(P){var ie=O(this).constructor;Y=Reflect.construct($,arguments,ie)}else Y=$.apply(this,arguments);return u(this,Y)}}function u(S,P){if(P&&(B(P)==="object"||typeof P=="function"))return P;if(P!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x(S)}function x(S){if(S===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function h(S){var P=typeof Map=="function"?new Map:void 0;return h=function($){if($===null||!C($))return $;if(typeof $!="function")throw new TypeError("Super expression must either be null or a function");if(typeof P<"u"){if(P.has($))return P.get($);P.set($,Y)}function Y(){return f($,arguments,O(this).constructor)}return Y.prototype=Object.create($.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),D(Y,$)},h(S)}function f(S,P,Z){return b()?f=Reflect.construct.bind():f=function(Y,ie,pe){var ce=[null];ce.push.apply(ce,ie);var A=Function.bind.apply(Y,ce),p=new A;return pe&&D(p,pe.prototype),p},f.apply(null,arguments)}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function C(S){return Function.toString.call(S).indexOf("[native code]")!==-1}function D(S,P){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function($,Y){return $.__proto__=Y,$},D(S,P)}function O(S){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Z){return Z.__proto__||Object.getPrototypeOf(Z)},O(S)}function B(S){"@babel/helpers - typeof";return B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},B(S)}var q=Kt,I=q.inspect,v=Ua(),_=v.codes.ERR_INVALID_ARG_TYPE;function E(S,P,Z){return(Z===void 0||Z>S.length)&&(Z=S.length),S.substring(Z-P.length,Z)===P}function T(S,P){if(P=Math.floor(P),S.length==0||P==0)return"";var Z=S.length*P;for(P=Math.floor(Math.log(P)/Math.log(2));P;)S+=S,P--;return S+=S.substring(0,Z-S.length),S}var M="",L="",F="",R="",N={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},d=10;function m(S){var P=Object.keys(S),Z=Object.create(Object.getPrototypeOf(S));return P.forEach(function($){Z[$]=S[$]}),Object.defineProperty(Z,"message",{value:S.message}),Z}function j(S){return I(S,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function ne(S,P,Z){var $="",Y="",ie=0,pe="",ce=!1,A=j(S),p=A.split(`
`),w=j(P).split(`
`),k=0,V="";if(Z==="strictEqual"&&B(S)==="object"&&B(P)==="object"&&S!==null&&P!==null&&(Z="strictEqualObject"),p.length===1&&w.length===1&&p[0]!==w[0]){var G=p[0].length+w[0].length;if(G<=d){if((B(S)!=="object"||S===null)&&(B(P)!=="object"||P===null)&&(S!==0||P!==0))return"".concat(N[Z],`

`)+"".concat(p[0]," !== ").concat(w[0],`
`)}else if(Z!=="strictEqualObject"){var ee=Ue.stderr&&Ue.stderr.isTTY?Ue.stderr.columns:80;if(G<ee){for(;p[0][k]===w[0][k];)k++;k>2&&(V=`
  `.concat(T(" ",k),"^"),k=0)}}}for(var fe=p[p.length-1],we=w[w.length-1];fe===we&&(k++<2?pe=`
  `.concat(fe).concat(pe):$=fe,p.pop(),w.pop(),!(p.length===0||w.length===0));)fe=p[p.length-1],we=w[w.length-1];var qe=Math.max(p.length,w.length);if(qe===0){var at=A.split(`
`);if(at.length>30)for(at[26]="".concat(M,"...").concat(R);at.length>27;)at.pop();return"".concat(N.notIdentical,`

`).concat(at.join(`
`),`
`)}k>3&&(pe=`
`.concat(M,"...").concat(R).concat(pe),ce=!0),$!==""&&(pe=`
  `.concat($).concat(pe),$="");var Ie=0,Nt=N[Z]+`
`.concat(L,"+ actual").concat(R," ").concat(F,"- expected").concat(R),pn=" ".concat(M,"...").concat(R," Lines skipped");for(k=0;k<qe;k++){var Le=k-ie;if(p.length<k+1)Le>1&&k>2&&(Le>4?(Y+=`
`.concat(M,"...").concat(R),ce=!0):Le>3&&(Y+=`
  `.concat(w[k-2]),Ie++),Y+=`
  `.concat(w[k-1]),Ie++),ie=k,$+=`
`.concat(F,"-").concat(R," ").concat(w[k]),Ie++;else if(w.length<k+1)Le>1&&k>2&&(Le>4?(Y+=`
`.concat(M,"...").concat(R),ce=!0):Le>3&&(Y+=`
  `.concat(p[k-2]),Ie++),Y+=`
  `.concat(p[k-1]),Ie++),ie=k,Y+=`
`.concat(L,"+").concat(R," ").concat(p[k]),Ie++;else{var st=w[k],Fe=p[k],g=Fe!==st&&(!E(Fe,",")||Fe.slice(0,-1)!==st);g&&E(st,",")&&st.slice(0,-1)===Fe&&(g=!1,Fe+=","),g?(Le>1&&k>2&&(Le>4?(Y+=`
`.concat(M,"...").concat(R),ce=!0):Le>3&&(Y+=`
  `.concat(p[k-2]),Ie++),Y+=`
  `.concat(p[k-1]),Ie++),ie=k,Y+=`
`.concat(L,"+").concat(R," ").concat(Fe),$+=`
`.concat(F,"-").concat(R," ").concat(st),Ie+=2):(Y+=$,$="",(Le===1||k===0)&&(Y+=`
  `.concat(Fe),Ie++))}if(Ie>20&&k<qe-2)return"".concat(Nt).concat(pn,`
`).concat(Y,`
`).concat(M,"...").concat(R).concat($,`
`)+"".concat(M,"...").concat(R)}return"".concat(Nt).concat(ce?pn:"",`
`).concat(Y).concat($).concat(pe).concat(V)}var le=function(S,P){l($,S);var Z=c($);function $(Y){var ie;if(r(this,$),B(Y)!=="object"||Y===null)throw new _("options","Object",Y);var pe=Y.message,ce=Y.operator,A=Y.stackStartFn,p=Y.actual,w=Y.expected,k=Error.stackTraceLimit;if(Error.stackTraceLimit=0,pe!=null)ie=Z.call(this,String(pe));else if(Ue.stderr&&Ue.stderr.isTTY&&(Ue.stderr&&Ue.stderr.getColorDepth&&Ue.stderr.getColorDepth()!==1?(M="\x1B[34m",L="\x1B[32m",R="\x1B[39m",F="\x1B[31m"):(M="",L="",R="",F="")),B(p)==="object"&&p!==null&&B(w)==="object"&&w!==null&&"stack"in p&&p instanceof Error&&"stack"in w&&w instanceof Error&&(p=m(p),w=m(w)),ce==="deepStrictEqual"||ce==="strictEqual")ie=Z.call(this,ne(p,w,ce));else if(ce==="notDeepStrictEqual"||ce==="notStrictEqual"){var V=N[ce],G=j(p).split(`
`);if(ce==="notStrictEqual"&&B(p)==="object"&&p!==null&&(V=N.notStrictEqualObject),G.length>30)for(G[26]="".concat(M,"...").concat(R);G.length>27;)G.pop();G.length===1?ie=Z.call(this,"".concat(V," ").concat(G[0])):ie=Z.call(this,"".concat(V,`

`).concat(G.join(`
`),`
`))}else{var ee=j(p),fe="",we=N[ce];ce==="notDeepEqual"||ce==="notEqual"?(ee="".concat(N[ce],`

`).concat(ee),ee.length>1024&&(ee="".concat(ee.slice(0,1021),"..."))):(fe="".concat(j(w)),ee.length>512&&(ee="".concat(ee.slice(0,509),"...")),fe.length>512&&(fe="".concat(fe.slice(0,509),"...")),ce==="deepEqual"||ce==="equal"?ee="".concat(we,`

`).concat(ee,`

should equal

`):fe=" ".concat(ce," ").concat(fe)),ie=Z.call(this,"".concat(ee).concat(fe))}return Error.stackTraceLimit=k,ie.generatedMessage=!pe,Object.defineProperty(x(ie),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),ie.code="ERR_ASSERTION",ie.actual=p,ie.expected=w,ie.operator=ce,Error.captureStackTrace&&Error.captureStackTrace(x(ie),A),ie.stack,ie.name="AssertionError",u(ie)}return o($,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:P,value:function(ie,pe){return I(this,n(n({},pe),{},{customInspect:!1,depth:0}))}}]),$}(h(Error),I.custom);return ar=le,ar}var ao=Object.prototype.toString,ja=function(n){var e=ao.call(n),r=e==="[object Arguments]";return r||(r=e!=="[object Array]"&&n!==null&&typeof n=="object"&&typeof n.length=="number"&&n.length>=0&&ao.call(n.callee)==="[object Function]"),r},sr,so;function yl(){if(so)return sr;so=1;var t;if(!Object.keys){var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=ja,i=Object.prototype.propertyIsEnumerable,o=!i.call({toString:null},"toString"),a=i.call(function(){},"prototype"),s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(h){var f=h.constructor;return f&&f.prototype===h},c={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},u=function(){if(typeof window>"u")return!1;for(var h in window)try{if(!c["$"+h]&&n.call(window,h)&&window[h]!==null&&typeof window[h]=="object")try{l(window[h])}catch{return!0}}catch{return!0}return!1}(),x=function(h){if(typeof window>"u"||!u)return l(h);try{return l(h)}catch{return!1}};t=function(f){var b=f!==null&&typeof f=="object",C=e.call(f)==="[object Function]",D=r(f),O=b&&e.call(f)==="[object String]",B=[];if(!b&&!C&&!D)throw new TypeError("Object.keys called on a non-object");var q=a&&C;if(O&&f.length>0&&!n.call(f,0))for(var I=0;I<f.length;++I)B.push(String(I));if(D&&f.length>0)for(var v=0;v<f.length;++v)B.push(String(v));else for(var _ in f)!(q&&_==="prototype")&&n.call(f,_)&&B.push(String(_));if(o)for(var E=x(f),T=0;T<s.length;++T)!(E&&s[T]==="constructor")&&n.call(f,s[T])&&B.push(s[T]);return B}}return sr=t,sr}var _l=Array.prototype.slice,ml=ja,co=Object.keys,Sn=co?function(n){return co(n)}:yl(),uo=Object.keys;Sn.shim=function(){if(Object.keys){var n=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);n||(Object.keys=function(r){return ml(r)?uo(_l.call(r)):uo(r)})}else Object.keys=Sn;return Object.keys||Sn};var Ma=Sn,bl=Ma,za=vs(),$a=jo,lo=Object,vl=$a("Array.prototype.push"),fo=$a("Object.prototype.propertyIsEnumerable"),El=za?Object.getOwnPropertySymbols:null,Al=function(n,e){if(n==null)throw new TypeError("target must be an object");var r=lo(n);if(arguments.length===1)return r;for(var i=1;i<arguments.length;++i){var o=lo(arguments[i]),a=bl(o),s=za&&(Object.getOwnPropertySymbols||El);if(s)for(var l=s(o),c=0;c<l.length;++c){var u=l[c];fo(o,u)&&vl(a,u)}for(var x=0;x<a.length;++x){var h=a[x];if(fo(o,h)){var f=o[h];r[h]=f}}}return r},cr=Al,Sl=function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",n=t.split(""),e={},r=0;r<n.length;++r)e[n[r]]=n[r];var i=Object.assign({},e),o="";for(var a in i)o+=a;return t!==o},xl=function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch{return t[1]==="y"}return!1},kl=function(){return!Object.assign||Sl()||xl()?cr:Object.assign},ho=function(t){return t!==t},qa=function(n,e){return n===0&&e===0?1/n===1/e:!!(n===e||ho(n)&&ho(e))},Il=qa,ri=function(){return typeof Object.is=="function"?Object.is:Il},ur,po;function Mn(){if(po)return ur;po=1;var t=Ma,n=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",e=Object.prototype.toString,r=Array.prototype.concat,i=As,o=function(c){return typeof c=="function"&&e.call(c)==="[object Function]"},a=Es(),s=function(c,u,x,h){if(u in c){if(h===!0){if(c[u]===x)return}else if(!o(h)||!h())return}a?i(c,u,x,!0):i(c,u,x)},l=function(c,u){var x=arguments.length>2?arguments[2]:{},h=t(u);n&&(h=r.call(h,Object.getOwnPropertySymbols(u)));for(var f=0;f<h.length;f+=1)s(c,h[f],u[h[f]],x[h[f]])};return l.supportsDescriptors=!!a,ur=l,ur}var lr,go;function Ol(){if(go)return lr;go=1;var t=ri,n=Mn();return lr=function(){var r=t();return n(Object,{is:r},{is:function(){return Object.is!==r}}),r},lr}var fr,wo;function Tl(){if(wo)return fr;wo=1;var t=Mn(),n=Mo,e=qa,r=ri,i=Ol(),o=n(r(),Object);return t(o,{getPolyfill:r,implementation:e,shim:i}),fr=o,fr}var dr,yo;function Fa(){return yo||(yo=1,dr=function(n){return n!==n}),dr}var hr,_o;function Va(){if(_o)return hr;_o=1;var t=Fa();return hr=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:t},hr}var pr,mo;function Rl(){if(mo)return pr;mo=1;var t=Mn(),n=Va();return pr=function(){var r=n();return t(Number,{isNaN:r},{isNaN:function(){return Number.isNaN!==r}}),r},pr}var gr,bo;function Ll(){if(bo)return gr;bo=1;var t=Mo,n=Mn(),e=Fa(),r=Va(),i=Rl(),o=t(r(),Number);return n(o,{getPolyfill:r,implementation:e,shim:i}),gr=o,gr}var wr,vo;function Pl(){if(vo)return wr;vo=1;function t(g,y){return o(g)||i(g,y)||e(g,y)||n()}function n(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e(g,y){if(g){if(typeof g=="string")return r(g,y);var U=Object.prototype.toString.call(g).slice(8,-1);if(U==="Object"&&g.constructor&&(U=g.constructor.name),U==="Map"||U==="Set")return Array.from(g);if(U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U))return r(g,y)}}function r(g,y){(y==null||y>g.length)&&(y=g.length);for(var U=0,H=new Array(y);U<y;U++)H[U]=g[U];return H}function i(g,y){var U=g==null?null:typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(U!=null){var H,K,te,Q,oe=[],ae=!0,me=!1;try{if(te=(U=U.call(g)).next,y===0){if(Object(U)!==U)return;ae=!1}else for(;!(ae=(H=te.call(U)).done)&&(oe.push(H.value),oe.length!==y);ae=!0);}catch(ve){me=!0,K=ve}finally{try{if(!ae&&U.return!=null&&(Q=U.return(),Object(Q)!==Q))return}finally{if(me)throw K}}return oe}}function o(g){if(Array.isArray(g))return g}function a(g){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},a(g)}var s=/a/g.flags!==void 0,l=function(y){var U=[];return y.forEach(function(H){return U.push(H)}),U},c=function(y){var U=[];return y.forEach(function(H,K){return U.push([K,H])}),U},u=Object.is?Object.is:Tl(),x=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},h=Number.isNaN?Number.isNaN:Ll();function f(g){return g.call.bind(g)}var b=f(Object.prototype.hasOwnProperty),C=f(Object.prototype.propertyIsEnumerable),D=f(Object.prototype.toString),O=Kt.types,B=O.isAnyArrayBuffer,q=O.isArrayBufferView,I=O.isDate,v=O.isMap,_=O.isRegExp,E=O.isSet,T=O.isNativeError,M=O.isBoxedPrimitive,L=O.isNumberObject,F=O.isStringObject,R=O.isBooleanObject,N=O.isBigIntObject,d=O.isSymbolObject,m=O.isFloat32Array,j=O.isFloat64Array;function ne(g){if(g.length===0||g.length>10)return!0;for(var y=0;y<g.length;y++){var U=g.charCodeAt(y);if(U<48||U>57)return!0}return g.length===10&&g>=Math.pow(2,32)}function le(g){return Object.keys(g).filter(ne).concat(x(g).filter(Object.prototype.propertyIsEnumerable.bind(g)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function S(g,y){if(g===y)return 0;for(var U=g.length,H=y.length,K=0,te=Math.min(U,H);K<te;++K)if(g[K]!==y[K]){U=g[K],H=y[K];break}return U<H?-1:H<U?1:0}var P=!0,Z=!1,$=0,Y=1,ie=2,pe=3;function ce(g,y){return s?g.source===y.source&&g.flags===y.flags:RegExp.prototype.toString.call(g)===RegExp.prototype.toString.call(y)}function A(g,y){if(g.byteLength!==y.byteLength)return!1;for(var U=0;U<g.byteLength;U++)if(g[U]!==y[U])return!1;return!0}function p(g,y){return g.byteLength!==y.byteLength?!1:S(new Uint8Array(g.buffer,g.byteOffset,g.byteLength),new Uint8Array(y.buffer,y.byteOffset,y.byteLength))===0}function w(g,y){return g.byteLength===y.byteLength&&S(new Uint8Array(g),new Uint8Array(y))===0}function k(g,y){return L(g)?L(y)&&u(Number.prototype.valueOf.call(g),Number.prototype.valueOf.call(y)):F(g)?F(y)&&String.prototype.valueOf.call(g)===String.prototype.valueOf.call(y):R(g)?R(y)&&Boolean.prototype.valueOf.call(g)===Boolean.prototype.valueOf.call(y):N(g)?N(y)&&BigInt.prototype.valueOf.call(g)===BigInt.prototype.valueOf.call(y):d(y)&&Symbol.prototype.valueOf.call(g)===Symbol.prototype.valueOf.call(y)}function V(g,y,U,H){if(g===y)return g!==0?!0:U?u(g,y):!0;if(U){if(a(g)!=="object")return typeof g=="number"&&h(g)&&h(y);if(a(y)!=="object"||g===null||y===null||Object.getPrototypeOf(g)!==Object.getPrototypeOf(y))return!1}else{if(g===null||a(g)!=="object")return y===null||a(y)!=="object"?g==y:!1;if(y===null||a(y)!=="object")return!1}var K=D(g),te=D(y);if(K!==te)return!1;if(Array.isArray(g)){if(g.length!==y.length)return!1;var Q=le(g),oe=le(y);return Q.length!==oe.length?!1:ee(g,y,U,H,Y,Q)}if(K==="[object Object]"&&(!v(g)&&v(y)||!E(g)&&E(y)))return!1;if(I(g)){if(!I(y)||Date.prototype.getTime.call(g)!==Date.prototype.getTime.call(y))return!1}else if(_(g)){if(!_(y)||!ce(g,y))return!1}else if(T(g)||g instanceof Error){if(g.message!==y.message||g.name!==y.name)return!1}else if(q(g)){if(!U&&(m(g)||j(g))){if(!A(g,y))return!1}else if(!p(g,y))return!1;var ae=le(g),me=le(y);return ae.length!==me.length?!1:ee(g,y,U,H,$,ae)}else{if(E(g))return!E(y)||g.size!==y.size?!1:ee(g,y,U,H,ie);if(v(g))return!v(y)||g.size!==y.size?!1:ee(g,y,U,H,pe);if(B(g)){if(!w(g,y))return!1}else if(M(g)&&!k(g,y))return!1}return ee(g,y,U,H,$)}function G(g,y){return y.filter(function(U){return C(g,U)})}function ee(g,y,U,H,K,te){if(arguments.length===5){te=Object.keys(g);var Q=Object.keys(y);if(te.length!==Q.length)return!1}for(var oe=0;oe<te.length;oe++)if(!b(y,te[oe]))return!1;if(U&&arguments.length===5){var ae=x(g);if(ae.length!==0){var me=0;for(oe=0;oe<ae.length;oe++){var ve=ae[oe];if(C(g,ve)){if(!C(y,ve))return!1;te.push(ve),me++}else if(C(y,ve))return!1}var Bt=x(y);if(ae.length!==Bt.length&&G(y,Bt).length!==me)return!1}else{var yt=x(y);if(yt.length!==0&&G(y,yt).length!==0)return!1}}if(te.length===0&&(K===$||K===Y&&g.length===0||g.size===0))return!0;if(H===void 0)H={val1:new Map,val2:new Map,position:0};else{var Ct=H.val1.get(g);if(Ct!==void 0){var Ve=H.val2.get(y);if(Ve!==void 0)return Ct===Ve}H.position++}H.val1.set(g,H.position),H.val2.set(y,H.position);var Ut=Le(g,y,U,te,H,K);return H.val1.delete(g),H.val2.delete(y),Ut}function fe(g,y,U,H){for(var K=l(g),te=0;te<K.length;te++){var Q=K[te];if(V(y,Q,U,H))return g.delete(Q),!0}return!1}function we(g){switch(a(g)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":g=+g;case"number":if(h(g))return!1}return!0}function qe(g,y,U){var H=we(U);return H??(y.has(H)&&!g.has(H))}function at(g,y,U,H,K){var te=we(U);if(te!=null)return te;var Q=y.get(te);return Q===void 0&&!y.has(te)||!V(H,Q,!1,K)?!1:!g.has(te)&&V(H,Q,!1,K)}function Ie(g,y,U,H){for(var K=null,te=l(g),Q=0;Q<te.length;Q++){var oe=te[Q];if(a(oe)==="object"&&oe!==null)K===null&&(K=new Set),K.add(oe);else if(!y.has(oe)){if(U||!qe(g,y,oe))return!1;K===null&&(K=new Set),K.add(oe)}}if(K!==null){for(var ae=l(y),me=0;me<ae.length;me++){var ve=ae[me];if(a(ve)==="object"&&ve!==null){if(!fe(K,ve,U,H))return!1}else if(!U&&!g.has(ve)&&!fe(K,ve,U,H))return!1}return K.size===0}return!0}function Nt(g,y,U,H,K,te){for(var Q=l(g),oe=0;oe<Q.length;oe++){var ae=Q[oe];if(V(U,ae,K,te)&&V(H,y.get(ae),K,te))return g.delete(ae),!0}return!1}function pn(g,y,U,H){for(var K=null,te=c(g),Q=0;Q<te.length;Q++){var oe=t(te[Q],2),ae=oe[0],me=oe[1];if(a(ae)==="object"&&ae!==null)K===null&&(K=new Set),K.add(ae);else{var ve=y.get(ae);if(ve===void 0&&!y.has(ae)||!V(me,ve,U,H)){if(U||!at(g,y,ae,me,H))return!1;K===null&&(K=new Set),K.add(ae)}}}if(K!==null){for(var Bt=c(y),yt=0;yt<Bt.length;yt++){var Ct=t(Bt[yt],2),Ve=Ct[0],Ut=Ct[1];if(a(Ve)==="object"&&Ve!==null){if(!Nt(K,g,Ve,Ut,U,H))return!1}else if(!U&&(!g.has(Ve)||!V(g.get(Ve),Ut,!1,H))&&!Nt(K,g,Ve,Ut,!1,H))return!1}return K.size===0}return!0}function Le(g,y,U,H,K,te){var Q=0;if(te===ie){if(!Ie(g,y,U,K))return!1}else if(te===pe){if(!pn(g,y,U,K))return!1}else if(te===Y)for(;Q<g.length;Q++)if(b(g,Q)){if(!b(y,Q)||!V(g[Q],y[Q],U,K))return!1}else{if(b(y,Q))return!1;for(var oe=Object.keys(g);Q<oe.length;Q++){var ae=oe[Q];if(!b(y,ae)||!V(g[ae],y[ae],U,K))return!1}return oe.length===Object.keys(y).length}for(Q=0;Q<H.length;Q++){var me=H[Q];if(!V(g[me],y[me],U,K))return!1}return!0}function st(g,y){return V(g,y,Z)}function Fe(g,y){return V(g,y,P)}return wr={isDeepEqual:st,isDeepStrictEqual:Fe},wr}var Eo;function Dr(){if(Eo)return ir.exports;Eo=1;function t(A){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},t(A)}function n(A,p){for(var w=0;w<p.length;w++){var k=p[w];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(A,r(k.key),k)}}function e(A,p,w){return p&&n(A.prototype,p),w&&n(A,w),Object.defineProperty(A,"prototype",{writable:!1}),A}function r(A){var p=i(A,"string");return t(p)==="symbol"?p:String(p)}function i(A,p){if(t(A)!=="object"||A===null)return A;var w=A[Symbol.toPrimitive];if(w!==void 0){var k=w.call(A,p||"default");if(t(k)!=="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(A)}function o(A,p){if(!(A instanceof p))throw new TypeError("Cannot call a class as a function")}var a=Ua(),s=a.codes,l=s.ERR_AMBIGUOUS_ARGUMENT,c=s.ERR_INVALID_ARG_TYPE,u=s.ERR_INVALID_ARG_VALUE,x=s.ERR_INVALID_RETURN_VALUE,h=s.ERR_MISSING_ARGS,f=wl(),b=Kt,C=b.inspect,D=Kt.types,O=D.isPromise,B=D.isRegExp,q=kl(),I=ri(),v=jo("RegExp.prototype.test"),_,E;function T(){var A=Pl();_=A.isDeepEqual,E=A.isDeepStrictEqual}var M=!1,L=ir.exports=m,F={};function R(A){throw A.message instanceof Error?A.message:new f(A)}function N(A,p,w,k,V){var G=arguments.length,ee;if(G===0)ee="Failed";else if(G===1)w=A,A=void 0;else{if(M===!1){M=!0;var fe=Ue.emitWarning?Ue.emitWarning:console.warn.bind(console);fe("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}G===2&&(k="!=")}if(w instanceof Error)throw w;var we={actual:A,expected:p,operator:k===void 0?"fail":k,stackStartFn:V||N};w!==void 0&&(we.message=w);var qe=new f(we);throw ee&&(qe.message=ee,qe.generatedMessage=!0),qe}L.fail=N,L.AssertionError=f;function d(A,p,w,k){if(!w){var V=!1;if(p===0)V=!0,k="No value argument passed to `assert.ok()`";else if(k instanceof Error)throw k;var G=new f({actual:w,expected:!0,message:k,operator:"==",stackStartFn:A});throw G.generatedMessage=V,G}}function m(){for(var A=arguments.length,p=new Array(A),w=0;w<A;w++)p[w]=arguments[w];d.apply(void 0,[m,p.length].concat(p))}L.ok=m,L.equal=function A(p,w,k){if(arguments.length<2)throw new h("actual","expected");p!=w&&R({actual:p,expected:w,message:k,operator:"==",stackStartFn:A})},L.notEqual=function A(p,w,k){if(arguments.length<2)throw new h("actual","expected");p==w&&R({actual:p,expected:w,message:k,operator:"!=",stackStartFn:A})},L.deepEqual=function A(p,w,k){if(arguments.length<2)throw new h("actual","expected");_===void 0&&T(),_(p,w)||R({actual:p,expected:w,message:k,operator:"deepEqual",stackStartFn:A})},L.notDeepEqual=function A(p,w,k){if(arguments.length<2)throw new h("actual","expected");_===void 0&&T(),_(p,w)&&R({actual:p,expected:w,message:k,operator:"notDeepEqual",stackStartFn:A})},L.deepStrictEqual=function A(p,w,k){if(arguments.length<2)throw new h("actual","expected");_===void 0&&T(),E(p,w)||R({actual:p,expected:w,message:k,operator:"deepStrictEqual",stackStartFn:A})},L.notDeepStrictEqual=j;function j(A,p,w){if(arguments.length<2)throw new h("actual","expected");_===void 0&&T(),E(A,p)&&R({actual:A,expected:p,message:w,operator:"notDeepStrictEqual",stackStartFn:j})}L.strictEqual=function A(p,w,k){if(arguments.length<2)throw new h("actual","expected");I(p,w)||R({actual:p,expected:w,message:k,operator:"strictEqual",stackStartFn:A})},L.notStrictEqual=function A(p,w,k){if(arguments.length<2)throw new h("actual","expected");I(p,w)&&R({actual:p,expected:w,message:k,operator:"notStrictEqual",stackStartFn:A})};var ne=e(function A(p,w,k){var V=this;o(this,A),w.forEach(function(G){G in p&&(k!==void 0&&typeof k[G]=="string"&&B(p[G])&&v(p[G],k[G])?V[G]=k[G]:V[G]=p[G])})});function le(A,p,w,k,V,G){if(!(w in A)||!E(A[w],p[w])){if(!k){var ee=new ne(A,V),fe=new ne(p,V,A),we=new f({actual:ee,expected:fe,operator:"deepStrictEqual",stackStartFn:G});throw we.actual=A,we.expected=p,we.operator=G.name,we}R({actual:A,expected:p,message:k,operator:G.name,stackStartFn:G})}}function S(A,p,w,k){if(typeof p!="function"){if(B(p))return v(p,A);if(arguments.length===2)throw new c("expected",["Function","RegExp"],p);if(t(A)!=="object"||A===null){var V=new f({actual:A,expected:p,message:w,operator:"deepStrictEqual",stackStartFn:k});throw V.operator=k.name,V}var G=Object.keys(p);if(p instanceof Error)G.push("name","message");else if(G.length===0)throw new u("error",p,"may not be an empty object");return _===void 0&&T(),G.forEach(function(ee){typeof A[ee]=="string"&&B(p[ee])&&v(p[ee],A[ee])||le(A,p,ee,w,G,k)}),!0}return p.prototype!==void 0&&A instanceof p?!0:Error.isPrototypeOf(p)?!1:p.call({},A)===!0}function P(A){if(typeof A!="function")throw new c("fn","Function",A);try{A()}catch(p){return p}return F}function Z(A){return O(A)||A!==null&&t(A)==="object"&&typeof A.then=="function"&&typeof A.catch=="function"}function $(A){return Promise.resolve().then(function(){var p;if(typeof A=="function"){if(p=A(),!Z(p))throw new x("instance of Promise","promiseFn",p)}else if(Z(A))p=A;else throw new c("promiseFn",["Function","Promise"],A);return Promise.resolve().then(function(){return p}).then(function(){return F}).catch(function(w){return w})})}function Y(A,p,w,k){if(typeof w=="string"){if(arguments.length===4)throw new c("error",["Object","Error","Function","RegExp"],w);if(t(p)==="object"&&p!==null){if(p.message===w)throw new l("error/message",'The error message "'.concat(p.message,'" is identical to the message.'))}else if(p===w)throw new l("error/message",'The error "'.concat(p,'" is identical to the message.'));k=w,w=void 0}else if(w!=null&&t(w)!=="object"&&typeof w!="function")throw new c("error",["Object","Error","Function","RegExp"],w);if(p===F){var V="";w&&w.name&&(V+=" (".concat(w.name,")")),V+=k?": ".concat(k):".";var G=A.name==="rejects"?"rejection":"exception";R({actual:void 0,expected:w,operator:A.name,message:"Missing expected ".concat(G).concat(V),stackStartFn:A})}if(w&&!S(p,w,k,A))throw p}function ie(A,p,w,k){if(p!==F){if(typeof w=="string"&&(k=w,w=void 0),!w||S(p,w)){var V=k?": ".concat(k):".",G=A.name==="doesNotReject"?"rejection":"exception";R({actual:p,expected:w,operator:A.name,message:"Got unwanted ".concat(G).concat(V,`
`)+'Actual message: "'.concat(p&&p.message,'"'),stackStartFn:A})}throw p}}L.throws=function A(p){for(var w=arguments.length,k=new Array(w>1?w-1:0),V=1;V<w;V++)k[V-1]=arguments[V];Y.apply(void 0,[A,P(p)].concat(k))},L.rejects=function A(p){for(var w=arguments.length,k=new Array(w>1?w-1:0),V=1;V<w;V++)k[V-1]=arguments[V];return $(p).then(function(G){return Y.apply(void 0,[A,G].concat(k))})},L.doesNotThrow=function A(p){for(var w=arguments.length,k=new Array(w>1?w-1:0),V=1;V<w;V++)k[V-1]=arguments[V];ie.apply(void 0,[A,P(p)].concat(k))},L.doesNotReject=function A(p){for(var w=arguments.length,k=new Array(w>1?w-1:0),V=1;V<w;V++)k[V-1]=arguments[V];return $(p).then(function(G){return ie.apply(void 0,[A,G].concat(k))})},L.ifError=function A(p){if(p!=null){var w="ifError got unwanted exception: ";t(p)==="object"&&typeof p.message=="string"?p.message.length===0&&p.constructor?w+=p.constructor.name:w+=p.message:w+=C(p);var k=new f({actual:p,expected:null,operator:"ifError",message:w,stackStartFn:A}),V=p.stack;if(typeof V=="string"){var G=V.split(`
`);G.shift();for(var ee=k.stack.split(`
`),fe=0;fe<G.length;fe++){var we=ee.indexOf(G[fe]);if(we!==-1){ee=ee.slice(0,we);break}}k.stack="".concat(ee.join(`
`),`
`).concat(G.join(`
`))}throw k}};function pe(A,p,w,k,V){if(!B(p))throw new c("regexp","RegExp",p);var G=V==="match";if(typeof A!="string"||v(p,A)!==G){if(w instanceof Error)throw w;var ee=!w;w=w||(typeof A!="string"?'The "string" argument must be of type string. Received type '+"".concat(t(A)," (").concat(C(A),")"):(G?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(C(p),`. Input:

`).concat(C(A),`
`));var fe=new f({actual:A,expected:p,message:w,operator:V,stackStartFn:k});throw fe.generatedMessage=ee,fe}}L.match=function A(p,w,k){pe(p,w,k,A,"match")},L.doesNotMatch=function A(p,w,k){pe(p,w,k,A,"doesNotMatch")};function ce(){for(var A=arguments.length,p=new Array(A),w=0;w<A;w++)p[w]=arguments[w];d.apply(void 0,[ce,p.length].concat(p))}return L.strict=q(ce,L,{equal:L.strictEqual,deepEqual:L.deepStrictEqual,notEqual:L.notStrictEqual,notDeepEqual:L.notDeepStrictEqual}),L.strict.strict=L.strict,ir.exports}var Nr=Dr();function Dl(t,n){return Array.apply(0,new Array(Math.ceil(t.length/n))).map((e,r)=>t.slice(r*n,(r+1)*n))}function Nl(t){return new TextDecoder("utf-8").decode(t)}function Bl(t){return new TextEncoder().encode(t)}function Ao(t){return vt.encode(t)}function Cl(t){return X.Buffer.from(Co(t))}function Za(t){const n=new Map;return t.errors&&t.errors.forEach(e=>{var r;let i=(r=e.msg)!==null&&r!==void 0?r:e.name;n.set(e.code,i)}),n}function Ul(t,...n){if(t.args.length!=n.length)throw new Error("Invalid argument length");const e={};let r=0;return t.args.forEach(i=>{e[i.name]=n[r],r+=1}),e}function ii(t,n={}){t.forEach(e=>{if("accounts"in e)ii(e.accounts,n[e.name]);else if(n[e.name]===void 0)throw new Error(`Invalid arguments: ${e.name} not provided.`)})}function De(t){return t instanceof _e?t:new _e(t)}class jl extends TypeError{constructor(n,e){let r;const{message:i,...o}=n,{path:a}=n,s=a.length===0?i:"At path: "+a.join(".")+" -- "+i;super(s),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>{var l;return(l=r)!=null?l:r=[n,...e()]}}}function Ml(t){return St(t)&&typeof t[Symbol.iterator]=="function"}function St(t){return typeof t=="object"&&t!=null}function it(t){return typeof t=="string"?JSON.stringify(t):""+t}function zl(t){const{done:n,value:e}=t.next();return n?void 0:e}function $l(t,n,e,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:o}=n,{type:a}=e,{refinement:s,message:l="Expected a value of type `"+a+"`"+(s?" with refinement `"+s+"`":"")+", but received: `"+it(r)+"`"}=t;return{value:r,type:a,refinement:s,key:i[i.length-1],path:i,branch:o,...t,message:l}}function*So(t,n,e,r){Ml(t)||(t=[t]);for(const i of t){const o=$l(i,n,e,r);o&&(yield o)}}function*oi(t,n,e){e===void 0&&(e={});const{path:r=[],branch:i=[t],coerce:o=!1,mask:a=!1}=e,s={path:r,branch:i};if(o&&(t=n.coercer(t,s),a&&n.type!=="type"&&St(n.schema)&&St(t)&&!Array.isArray(t)))for(const c in t)n.schema[c]===void 0&&delete t[c];let l=!0;for(const c of n.validator(t,s))l=!1,yield[c,void 0];for(let[c,u,x]of n.entries(t,s)){const h=oi(u,x,{path:c===void 0?r:[...r,c],branch:c===void 0?i:[...i,u],coerce:o,mask:a});for(const f of h)f[0]?(l=!1,yield[f[0],void 0]):o&&(u=f[1],c===void 0?t=u:t instanceof Map?t.set(c,u):t instanceof Set?t.add(u):St(t)&&(t[c]=u))}if(l)for(const c of n.refiner(t,s))l=!1,yield[c,void 0];l&&(yield[void 0,t])}class ot{constructor(n){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:e,schema:r,validator:i,refiner:o,coercer:a=l=>l,entries:s=function*(){}}=n;this.type=e,this.schema=r,this.entries=s,this.coercer=a,i?this.validator=(l,c)=>{const u=i(l,c);return So(u,c,this,l)}:this.validator=()=>[],o?this.refiner=(l,c)=>{const u=o(l,c);return So(u,c,this,l)}:this.refiner=()=>[]}assert(n){return ql(n,this)}create(n){return ai(n,this)}is(n){return Ha(n,this)}mask(n){return Fl(n,this)}validate(n,e){return e===void 0&&(e={}),ln(n,this,e)}}function ql(t,n){const e=ln(t,n);if(e[0])throw e[0]}function ai(t,n){const e=ln(t,n,{coerce:!0});if(e[0])throw e[0];return e[1]}function Fl(t,n){const e=ln(t,n,{coerce:!0,mask:!0});if(e[0])throw e[0];return e[1]}function Ha(t,n){return!ln(t,n)[0]}function ln(t,n,e){e===void 0&&(e={});const r=oi(t,n,e),i=zl(r);return i[0]?[new jl(i[0],function*(){for(const a of r)a[0]&&(yield a[0])}),void 0]:[void 0,i[1]]}function fn(t,n){return new ot({type:t,schema:null,validator:n})}function Vl(){return fn("any",()=>!0)}function yr(t){return new ot({type:"array",schema:t,*entries(n){if(t&&Array.isArray(n))for(const[e,r]of n.entries())yield[e,r,t]},coercer(n){return Array.isArray(n)?n.slice():n},validator(n){return Array.isArray(n)||"Expected an array value, but received: "+it(n)}})}function Zl(){return fn("boolean",t=>typeof t=="boolean")}function xo(t){const n=it(t),e=typeof t;return new ot({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?t:null,validator(r){return r===t||"Expected the literal `"+n+"`, but received: "+it(r)}})}function vn(t){return new ot({...t,validator:(n,e)=>n===null||t.validator(n,e),refiner:(n,e)=>n===null||t.refiner(n,e)})}function xn(){return fn("number",t=>typeof t=="number"&&!isNaN(t)||"Expected a number, but received: "+it(t))}function kn(t){return new ot({...t,validator:(n,e)=>n===void 0||t.validator(n,e),refiner:(n,e)=>n===void 0||t.refiner(n,e)})}function ft(){return fn("string",t=>typeof t=="string"||"Expected a string, but received: "+it(t))}function rt(t){const n=Object.keys(t);return new ot({type:"type",schema:t,*entries(e){if(St(e))for(const r of n)yield[r,e[r],t[r]]},validator(e){return St(e)||"Expected an object, but received: "+it(e)}})}function Ga(t){const n=t.map(e=>e.type).join(" | ");return new ot({type:"union",schema:null,coercer(e,r){return(t.find(o=>{const[a]=o.validate(e,{coerce:!0});return!a})||si()).coercer(e,r)},validator(e,r){const i=[];for(const o of t){const[...a]=oi(e,o,r),[s]=a;if(s[0])for(const[l]of a)l&&i.push(l);else return[]}return["Expected the value to satisfy a union of `"+n+"`, but received: "+it(e),...i]}})}function si(){return fn("unknown",()=>!0)}function Hl(t,n,e){return new ot({...t,coercer:(r,i)=>Ha(r,n)?t.coercer(e(r,i),i):t.coercer(r,i)})}const ko=99;async function Gl(t,n,e){if(n.length<=ko)return await Io(t,n,e);{const r=Dl(n,ko);return(await Promise.all(r.map(o=>Io(t,o,e)))).flat()}}async function Io(t,n,e){const r=e??t.commitment,{value:i,context:o}=await t.getMultipleAccountsInfoAndContext(n,r);return i.map((s,l)=>s===null?null:{publicKey:n[l],account:s,context:o})}async function Kl(t,n,e,r,i){e&&e.length>0&&n.sign(...e);const o=n._compile(),a=o.serialize(),l=n._serialize(a).toString("base64"),c={encoding:"base64",commitment:r??t.commitment};if(i){const f=(Array.isArray(i)?i:o.nonProgramIds()).map(b=>b.toBase58());c.accounts={encoding:"base64",addresses:f}}e&&(c.sigVerify=!0);const u=[l,c],x=await t._rpcRequest("simulateTransaction",u),h=ai(x,Jl);if("error"in h){let f;if("data"in h.error&&(f=h.error.data.logs,f&&Array.isArray(f))){const b=`
    `,C=b+f.join(b);console.error(h.error.message,C)}throw new Er("failed to simulate transaction: "+h.error.message,f)}return h.result}function Wl(t){return Hl(Ka(t),Yl,n=>"error"in n?n:{...n,result:ai(n.result,t)})}const Yl=Ka(si());function Ka(t){return Ga([rt({jsonrpc:xo("2.0"),id:ft(),result:t}),rt({jsonrpc:xo("2.0"),id:ft(),error:rt({code:si(),message:ft(),data:kn(Vl())})})])}function Xl(t){return Wl(rt({context:rt({slot:xn()}),value:t}))}const Jl=Xl(rt({err:vn(Ga([rt({}),ft()])),logs:vn(yr(ft())),accounts:kn(vn(yr(vn(rt({executable:Zl(),owner:ft(),lamports:xn(),data:yr(ft()),rentEpoch:kn(xn())}))))),unitsConsumed:kn(xn())}));class Ql{constructor(n,e,r){this.connection=n,this.wallet=e,this.opts=r,this.publicKey=e==null?void 0:e.publicKey}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(n,e){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(n,e,r){var i;r===void 0&&(r=this.opts),n.feePayer=n.feePayer||this.wallet.publicKey,n.recentBlockhash=(await this.connection.getLatestBlockhash(r.preflightCommitment)).blockhash,n=await this.wallet.signTransaction(n),(e??[]).forEach(a=>{n.partialSign(a)});const o=n.serialize();try{return await Oo(this.connection,o,r)}catch(a){if(a instanceof Br){const s=await this.connection.getTransaction(Ao(n.signature),{commitment:"confirmed"});if(s){const l=(i=s.meta)===null||i===void 0?void 0:i.logMessages;throw l?new Er(a.message,l):a}else throw a}else throw a}}async sendAll(n,e){var r;e===void 0&&(e=this.opts);const i=await this.connection.getLatestBlockhash(e.preflightCommitment);let o=n.map(l=>{var c;let u=l.tx,x=(c=l.signers)!==null&&c!==void 0?c:[];return u.feePayer=u.feePayer||this.wallet.publicKey,u.recentBlockhash=i.blockhash,x.forEach(h=>{u.partialSign(h)}),u});const a=await this.wallet.signAllTransactions(o),s=[];for(let l=0;l<o.length;l+=1){const c=a[l],u=c.serialize();try{s.push(await Oo(this.connection,u,e))}catch(x){if(x instanceof Br){const h=await this.connection.getTransaction(Ao(c.signature),{commitment:"confirmed"});if(h){const f=(r=h.meta)===null||r===void 0?void 0:r.logMessages;throw f?new Er(x.message,f):x}else throw x}else throw x}}return s}async simulate(n,e,r,i){n.feePayer=n.feePayer||this.wallet.publicKey,n.recentBlockhash=(await this.connection.getLatestBlockhash(r??this.connection.commitment)).blockhash,n=await this.wallet.signTransaction(n);const o=await Kl(this.connection,n,e,r,i);if(o.value.err)throw new ef(o.value);return o.value}}class ef extends Error{constructor(n,e){super(e),this.simulationResponse=n}}async function Oo(t,n,e){const r=e&&{skipPreflight:e.skipPreflight,preflightCommitment:e.preflightCommitment||e.commitment},i=await t.sendRawTransaction(n,r),o=(await t.confirmTransaction(i,e&&e.commitment)).value;if(o.err)throw new Br(`Raw transaction ${i} failed (${JSON.stringify(o)})`);return i}class Br extends Error{constructor(n){super(n)}}function xd(t){Cr=t}function Ln(){return Cr===null?Ql.local():Cr}let Cr=null;const tf=new Map;function ci(t){return tf.get(t)!==void 0}class Pn extends Error{constructor(n){super(n),this.name="IdlError"}}class dn{constructor(n){this.stack=n}static parse(n){var e;const r=/^Program (\w*) invoke/,i=/^Program \w* success/,o=[];for(let a=0;a<n.length;a++){if(i.exec(n[a])){o.pop();continue}const s=(e=r.exec(n[a]))===null||e===void 0?void 0:e[1];s&&o.push(new _e(s))}return new dn(o)}}class Ht extends Error{constructor(n,e,r,i,o,a){super(r.join(`
`).replace("Program log: ","")),this.errorLogs=r,this.logs=i,this.error={errorCode:n,errorMessage:e,comparedValues:a,origin:o},this._programErrorStack=dn.parse(i)}static parse(n){if(!n)return null;const e=n.findIndex(h=>h.startsWith("Program log: AnchorError"));if(e===-1)return null;const r=n[e],i=[r];let o;if(e+1<n.length){if(n[e+1]==="Program log: Left:"){const h=/^Program log: (.*)$/,f=h.exec(n[e+2])[1],b=h.exec(n[e+4])[1];o=[new _e(f),new _e(b)],i.push(...n.slice(e+1,e+5))}else if(n[e+1].startsWith("Program log: Left:")){const h=/^Program log: (Left|Right): (.*)$/,f=h.exec(n[e+1])[2],b=h.exec(n[e+2])[2];i.push(...n.slice(e+1,e+3)),o=[f,b]}}const s=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),c=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),x=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r);if(s){const[h,f,b]=s.slice(1,4),C={code:h,number:parseInt(f)};return new Ht(C,b,i,n,void 0,o)}else if(c){const[h,f,b,C,D]=c.slice(1,6),O={code:b,number:parseInt(C)},B={file:h,line:parseInt(f)};return new Ht(O,D,i,n,B,o)}else if(x){const[h,f,b,C]=x.slice(1,5),D=h,O={code:f,number:parseInt(b)};return new Ht(O,C,i,n,D,o)}else return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class Dn extends Error{constructor(n,e,r){super(),this.code=n,this.msg=e,this.logs=r,r&&(this._programErrorStack=dn.parse(r))}static parse(n,e){const r=n.toString();let i;if(r.includes("custom program error:")){let s=r.split("custom program error: ");if(s.length!==2)return null;i=s[1]}else{const s=r.match(/"Custom":([0-9]+)}/g);if(!s||s.length>1)return null;i=s[0].match(/([0-9]+)/g)[0]}let o;try{o=parseInt(i)}catch{return null}let a=e.get(o);return a!==void 0?new Dn(o,a,n.logs):(a=nf.get(o),a!==void 0?new Dn(o,a,n.logs):null)}get program(){var n;return(n=this._programErrorStack)===null||n===void 0?void 0:n.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var n;return(n=this._programErrorStack)===null||n===void 0?void 0:n.stack}toString(){return this.msg}}function Wa(t,n){ci("debug-logs")&&console.log("Translating error:",t);const e=Ht.parse(t.logs);if(e)return e;const r=Dn.parse(t,n);if(r)return r;if(t.logs){const i={get:function(o,a){return a==="programErrorStack"?o.programErrorStack.stack:a==="program"?o.programErrorStack.stack[t.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return t.programErrorStack=dn.parse(t.logs),new Proxy(t,i)}return t}const W={InstructionMissing:100,InstructionFallbackNotFound:101,InstructionDidNotDeserialize:102,InstructionDidNotSerialize:103,IdlInstructionStub:1e3,IdlInstructionInvalidProgram:1001,ConstraintMut:2e3,ConstraintHasOne:2001,ConstraintSigner:2002,ConstraintRaw:2003,ConstraintOwner:2004,ConstraintRentExempt:2005,ConstraintSeeds:2006,ConstraintExecutable:2007,ConstraintState:2008,ConstraintAssociated:2009,ConstraintAssociatedInit:2010,ConstraintClose:2011,ConstraintAddress:2012,ConstraintZero:2013,ConstraintTokenMint:2014,ConstraintTokenOwner:2015,ConstraintMintMintAuthority:2016,ConstraintMintFreezeAuthority:2017,ConstraintMintDecimals:2018,ConstraintSpace:2019,ConstraintAccountIsNone:2020,RequireViolated:2500,RequireEqViolated:2501,RequireKeysEqViolated:2502,RequireNeqViolated:2503,RequireKeysNeqViolated:2504,RequireGtViolated:2505,RequireGteViolated:2506,AccountDiscriminatorAlreadySet:3e3,AccountDiscriminatorNotFound:3001,AccountDiscriminatorMismatch:3002,AccountDidNotDeserialize:3003,AccountDidNotSerialize:3004,AccountNotEnoughKeys:3005,AccountNotMutable:3006,AccountOwnedByWrongProgram:3007,InvalidProgramId:3008,InvalidProgramExecutable:3009,AccountNotSigner:3010,AccountNotSystemOwned:3011,AccountNotInitialized:3012,AccountNotProgramData:3013,AccountNotAssociatedTokenAccount:3014,AccountSysvarMismatch:3015,AccountReallocExceedsLimit:3016,AccountDuplicateReallocs:3017,StateInvalidAddress:4e3,DeclaredProgramIdMismatch:4100,Deprecated:5e3},nf=new Map([[W.InstructionMissing,"8 byte instruction identifier not provided"],[W.InstructionFallbackNotFound,"Fallback functions are not supported"],[W.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[W.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[W.IdlInstructionStub,"The program was compiled without idl instructions"],[W.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[W.ConstraintMut,"A mut constraint was violated"],[W.ConstraintHasOne,"A has one constraint was violated"],[W.ConstraintSigner,"A signer constraint was violated"],[W.ConstraintRaw,"A raw constraint was violated"],[W.ConstraintOwner,"An owner constraint was violated"],[W.ConstraintRentExempt,"A rent exemption constraint was violated"],[W.ConstraintSeeds,"A seeds constraint was violated"],[W.ConstraintExecutable,"An executable constraint was violated"],[W.ConstraintState,"A state constraint was violated"],[W.ConstraintAssociated,"An associated constraint was violated"],[W.ConstraintAssociatedInit,"An associated init constraint was violated"],[W.ConstraintClose,"A close constraint was violated"],[W.ConstraintAddress,"An address constraint was violated"],[W.ConstraintZero,"Expected zero account discriminant"],[W.ConstraintTokenMint,"A token mint constraint was violated"],[W.ConstraintTokenOwner,"A token owner constraint was violated"],[W.ConstraintMintMintAuthority,"A mint mint authority constraint was violated"],[W.ConstraintMintFreezeAuthority,"A mint freeze authority constraint was violated"],[W.ConstraintMintDecimals,"A mint decimals constraint was violated"],[W.ConstraintSpace,"A space constraint was violated"],[W.ConstraintAccountIsNone,"A required account for the constraint is None"],[W.RequireViolated,"A require expression was violated"],[W.RequireEqViolated,"A require_eq expression was violated"],[W.RequireKeysEqViolated,"A require_keys_eq expression was violated"],[W.RequireNeqViolated,"A require_neq expression was violated"],[W.RequireKeysNeqViolated,"A require_keys_neq expression was violated"],[W.RequireGtViolated,"A require_gt expression was violated"],[W.RequireGteViolated,"A require_gte expression was violated"],[W.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[W.AccountDiscriminatorNotFound,"No 8 byte discriminator was found on the account"],[W.AccountDiscriminatorMismatch,"8 byte discriminator did not match what was expected"],[W.AccountDidNotDeserialize,"Failed to deserialize the account"],[W.AccountDidNotSerialize,"Failed to serialize the account"],[W.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[W.AccountNotMutable,"The given account is not mutable"],[W.AccountOwnedByWrongProgram,"The given account is owned by a different program than expected"],[W.InvalidProgramId,"Program ID was not as expected"],[W.InvalidProgramExecutable,"Program account is not executable"],[W.AccountNotSigner,"The given account did not sign"],[W.AccountNotSystemOwned,"The given account is not owned by the system program"],[W.AccountNotInitialized,"The program expected this account to be already initialized"],[W.AccountNotProgramData,"The given account is not a program data account"],[W.AccountNotAssociatedTokenAccount,"The given account is not the associated token account"],[W.AccountSysvarMismatch,"The given public key does not match the required sysvar"],[W.AccountReallocExceedsLimit,"The account reallocation exceeds the MAX_PERMITTED_DATA_INCREASE limit"],[W.AccountDuplicateReallocs,"The account was duplicated for more than one reallocation"],[W.StateInvalidAddress,"The given state account does not have the correct address"],[W.DeclaredProgramIdMismatch,"The declared program id does not match the actual program id"],[W.Deprecated,"The API being used is deprecated and should no longer be used"]]);var Ur=function(){return Ur=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Ur.apply(this,arguments)},jr=function(){return jr=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},jr.apply(this,arguments)};function rf(t){return t.toLowerCase()}var of=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],af=/[^A-Z0-9]+/gi;function sf(t,n){n===void 0&&(n={});for(var e=n.splitRegexp,r=e===void 0?of:e,i=n.stripRegexp,o=i===void 0?af:i,a=n.transform,s=a===void 0?rf:a,l=n.delimiter,c=l===void 0?" ":l,u=To(To(t,r,"$1\0$2"),o,"\0"),x=0,h=u.length;u.charAt(x)==="\0";)x++;for(;u.charAt(h-1)==="\0";)h--;return u.slice(x,h).split("\0").map(s).join(c)}function To(t,n,e){return n instanceof RegExp?t.replace(n,e):n.reduce(function(r,i){return r.replace(i,e)},t)}function cf(t,n){return n===void 0&&(n={}),sf(t,jr({delimiter:"."},n))}function uf(t,n){return n===void 0&&(n={}),cf(t,Ur({delimiter:"_"},n))}class Ee{static fieldLayout(n,e){const r=n.name!==void 0?he(n.name):void 0;switch(n.type){case"bool":return J.bool(r);case"u8":return J.u8(r);case"i8":return J.i8(r);case"u16":return J.u16(r);case"i16":return J.i16(r);case"u32":return J.u32(r);case"i32":return J.i32(r);case"f32":return J.f32(r);case"u64":return J.u64(r);case"i64":return J.i64(r);case"f64":return J.f64(r);case"u128":return J.u128(r);case"i128":return J.i128(r);case"u256":return J.u256(r);case"i256":return J.i256(r);case"bytes":return J.vecU8(r);case"string":return J.str(r);case"publicKey":return J.publicKey(r);default:{if("vec"in n.type)return J.vec(Ee.fieldLayout({name:void 0,type:n.type.vec},e),r);if("option"in n.type)return J.option(Ee.fieldLayout({name:void 0,type:n.type.option},e),r);if("defined"in n.type){const i=n.type.defined;if(e===void 0)throw new Pn("User defined types not provided");const o=e.filter(a=>a.name===i);if(o.length!==1)throw new Pn(`Type not found: ${JSON.stringify(n)}`);return Ee.typeDefLayout(o[0],e,r)}else if("array"in n.type){let i=n.type.array[0],o=n.type.array[1],a=Ee.fieldLayout({name:void 0,type:i},e);return J.array(a,o,r)}else throw new Error(`Not yet implemented: ${n}`)}}}static typeDefLayout(n,e=[],r){if(n.type.kind==="struct"){const i=n.type.fields.map(o=>Ee.fieldLayout(o,e));return J.struct(i,r)}else if(n.type.kind==="enum"){let i=n.type.variants.map(o=>{const a=he(o.name);if(o.fields===void 0)return J.struct([],a);const s=o.fields.map((l,c)=>l.hasOwnProperty("name")?Ee.fieldLayout(l,e):Ee.fieldLayout({type:l,name:c.toString()},e));return J.struct(s,a)});return r!==void 0?J.rustEnum(i).replicate(r):J.rustEnum(i,r)}else throw new Error(`Unknown type kint: ${n}`)}}const Ro="state",Lo="global";class ui{constructor(n){this.idl=n,this.ixLayout=ui.parseIxLayout(n);const e=new Map;n.instructions.forEach(r=>{const i=_r(Lo,r.name);e.set(vt.encode(i),{layout:this.ixLayout.get(r.name),name:r.name})}),n.state&&n.state.methods.map(r=>{const i=_r(Ro,r.name);e.set(vt.encode(i),{layout:this.ixLayout.get(r.name),name:r.name})}),this.sighashLayouts=e}encode(n,e){return this._encode(Lo,n,e)}encodeState(n,e){return this._encode(Ro,n,e)}_encode(n,e,r){const i=X.Buffer.alloc(1e3),o=he(e),a=this.ixLayout.get(o);if(!a)throw new Error(`Unknown method: ${o}`);const s=a.encode(r,i),l=i.slice(0,s);return X.Buffer.concat([_r(n,e),l])}static parseIxLayout(n){const r=(n.state?n.state.methods:[]).map(i=>{let o=i.args.map(s=>{var l,c;return Ee.fieldLayout(s,Array.from([...(l=n.accounts)!==null&&l!==void 0?l:[],...(c=n.types)!==null&&c!==void 0?c:[]]))});const a=he(i.name);return[a,J.struct(o,a)]}).concat(n.instructions.map(i=>{let o=i.args.map(s=>{var l,c;return Ee.fieldLayout(s,Array.from([...(l=n.accounts)!==null&&l!==void 0?l:[],...(c=n.types)!==null&&c!==void 0?c:[]]))});const a=he(i.name);return[a,J.struct(o,a)]}));return new Map(r)}decode(n,e="hex"){typeof n=="string"&&(n=e==="hex"?X.Buffer.from(n,"hex"):vt.decode(n));let r=vt.encode(n.slice(0,8)),i=n.slice(8);const o=this.sighashLayouts.get(r);return o?{data:o.layout.decode(i),name:o.name}:null}format(n,e){return He.format(n,e,this.idl)}}class He{static format(n,e,r){const i=r.instructions.filter(l=>n.name===l.name)[0];if(i===void 0)return console.error("Invalid instruction given"),null;const o=i.args.map(l=>({name:l.name,type:He.formatIdlType(l.type),data:He.formatIdlData(l,n.data[l.name],r.types)})),a=He.flattenIdlAccounts(i.accounts),s=e.map((l,c)=>c<a.length?{name:a[c].name,...l}:{name:void 0,...l});return{args:o,accounts:s}}static formatIdlType(n){if(typeof n=="string")return n;if("vec"in n)return`Vec<${this.formatIdlType(n.vec)}>`;if("option"in n)return`Option<${this.formatIdlType(n.option)}>`;if("defined"in n)return n.defined;if("array"in n)return`Array<${n.array[0]}; ${n.array[1]}>`;throw new Error(`Unknown IDL type: ${n}`)}static formatIdlData(n,e,r){if(typeof n.type=="string")return e.toString();if(n.type.hasOwnProperty("vec"))return"["+e.map(i=>this.formatIdlData({name:"",type:n.type.vec},i)).join(", ")+"]";if(n.type.hasOwnProperty("option"))return e===null?"null":this.formatIdlData({name:"",type:n.type.option},e,r);if(n.type.hasOwnProperty("defined")){if(r===void 0)throw new Error("User defined types not provided");const i=r.filter(o=>o.name===n.type.defined);if(i.length!==1)throw new Error(`Type not found: ${n.type.defined}`);return He.formatIdlDataDefined(i[0],e,r)}return"unknown"}static formatIdlDataDefined(n,e,r){if(n.type.kind==="struct"){const i=n.type;return"{ "+Object.keys(e).map(a=>{const s=i.fields.filter(l=>l.name===a)[0];if(s===void 0)throw new Error("Unable to find type");return a+": "+He.formatIdlData(s,e[a],r)}).join(", ")+" }"}else{if(n.type.variants.length===0)return"{}";if(n.type.variants[0].name){const i=n.type.variants,o=Object.keys(e)[0],a=e[o],s=Object.keys(a).map(c=>{var u;const x=a[c],h=(u=i[o])===null||u===void 0?void 0:u.filter(f=>f.name===c)[0];if(h===void 0)throw new Error("Unable to find variant");return c+": "+He.formatIdlData(h,x,r)}).join(", "),l=he(o,{pascalCase:!0});return s.length===0?l:`${l} { ${s} }`}else return"Tuple formatting not yet implemented"}}static flattenIdlAccounts(n,e){return n.map(r=>{const i=lf(r.name);if(r.hasOwnProperty("accounts")){const o=e?`${e} > ${i}`:i;return He.flattenIdlAccounts(r.accounts,o)}else return{...r,name:e?`${e} > ${i}`:i}}).flat()}}function lf(t){const n=t.replace(/([A-Z])/g," $1");return n.charAt(0).toUpperCase()+n.slice(1)}function _r(t,n){let e=uf(n),r=`${t}:${e}`;return X.Buffer.from(Tt.sha256.digest(r)).slice(0,8)}function Ya(t,n){if(n.type.kind==="enum"){let e=n.type.variants.map(r=>r.fields===void 0?0:r.fields.map(i=>{if(!(typeof i=="object"&&"name"in i))throw new Error("Tuple enum variants not yet implemented.");return Gt(t,i.type)}).reduce((i,o)=>i+o));return Math.max(...e)+1}return n.type.fields===void 0?0:n.type.fields.map(e=>Gt(t,e.type)).reduce((e,r)=>e+r,0)}function Gt(t,n){var e,r;switch(n){case"bool":return 1;case"u8":return 1;case"i8":return 1;case"i16":return 2;case"u16":return 2;case"u32":return 4;case"i32":return 4;case"f32":return 4;case"u64":return 8;case"i64":return 8;case"f64":return 8;case"u128":return 16;case"i128":return 16;case"u256":return 32;case"i256":return 32;case"bytes":return 1;case"string":return 1;case"publicKey":return 32;default:if("vec"in n)return 1;if("option"in n)return 1+Gt(t,n.option);if("coption"in n)return 4+Gt(t,n.coption);if("defined"in n){const i=(r=(e=t.types)===null||e===void 0?void 0:e.filter(a=>a.name===n.defined))!==null&&r!==void 0?r:[];if(i.length!==1)throw new Pn(`Type not found: ${JSON.stringify(n)}`);let o=i[0];return Ya(t,o)}if("array"in n){let i=n.array[0],o=n.array[1];return Gt(t,i)*o}throw new Error(`Invalid type ${JSON.stringify(n)}`)}}const mr=8;class Et{constructor(n){if(n.accounts===void 0){this.accountLayouts=new Map;return}const e=n.accounts.map(r=>[r.name,Ee.typeDefLayout(r,n.types)]);this.accountLayouts=new Map(e),this.idl=n}async encode(n,e){const r=X.Buffer.alloc(1e3),i=this.accountLayouts.get(n);if(!i)throw new Error(`Unknown account: ${n}`);const o=i.encode(e,r);let a=r.slice(0,o),s=Et.accountDiscriminator(n);return X.Buffer.concat([s,a])}decode(n,e){if(Et.accountDiscriminator(n).compare(e.slice(0,8)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(n,e)}decodeAny(n){const e=n.slice(0,8),r=Array.from(this.accountLayouts.keys()).find(i=>Et.accountDiscriminator(i).equals(e));if(!r)throw new Error("Account descriminator not found");return this.decodeUnchecked(r,n)}decodeUnchecked(n,e){const r=e.slice(mr),i=this.accountLayouts.get(n);if(!i)throw new Error(`Unknown account: ${n}`);return i.decode(r)}memcmp(n,e){const r=Et.accountDiscriminator(n);return{offset:0,bytes:vt.encode(e?X.Buffer.concat([r,e]):r)}}size(n){var e;return mr+((e=Ya(this.idl,n))!==null&&e!==void 0?e:0)}static accountDiscriminator(n){return X.Buffer.from(Tt.sha256.digest(`account:${he(n,{pascalCase:!0,preserveConsecutiveUppercase:!0})}`)).slice(0,mr)}}class ff{constructor(n){if(n.events===void 0){this.layouts=new Map;return}const e=n.events.map(r=>{let i={name:r.name,type:{kind:"struct",fields:r.fields.map(o=>({name:o.name,type:o.type}))}};return[r.name,Ee.typeDefLayout(i,n.types)]});this.layouts=new Map(e),this.discriminators=new Map(n.events===void 0?[]:n.events.map(r=>[hi(df(r.name)),r.name]))}decode(n){let e;try{e=X.Buffer.from(Co(n))}catch{return null}const r=hi(e.slice(0,8)),i=this.discriminators.get(r);if(i===void 0)return null;const o=this.layouts.get(i);if(!o)throw new Error(`Unknown event: ${i}`);return{data:o.decode(e.slice(8)),name:i}}}function df(t){return X.Buffer.from(Tt.sha256.digest(`event:${t}`)).slice(0,8)}class hf{constructor(n){if(n.state===void 0)throw new Error("Idl state not defined.");this.layout=Ee.typeDefLayout(n.state.struct,n.types)}async encode(n,e){const r=X.Buffer.alloc(1e3),i=this.layout.encode(e,r),o=await Xa(n),a=r.slice(0,i);return X.Buffer.concat([o,a])}decode(n){const e=n.slice(8);return this.layout.decode(e)}}async function Xa(t){let n=ci("anchor-deprecated-state")?"account":"state";return X.Buffer.from(Tt.sha256.digest(`${n}:${t}`)).slice(0,8)}class pf{constructor(n){if(n.types===void 0){this.typeLayouts=new Map;return}const e=n.types.map(r=>[r.name,Ee.typeDefLayout(r,n.types)]);this.typeLayouts=new Map(e),this.idl=n}encode(n,e){const r=X.Buffer.alloc(1e3),i=this.typeLayouts.get(n);if(!i)throw new Error(`Unknown type: ${n}`);const o=i.encode(e,r);return r.slice(0,o)}decode(n,e){const r=this.typeLayouts.get(n);if(!r)throw new Error(`Unknown type: ${n}`);return r.decode(e)}}class li{constructor(n){this.instruction=new ui(n),this.accounts=new Et(n),this.events=new ff(n),n.state&&(this.state=new hf(n)),this.types=new pf(n)}}var gf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof pi<"u"?pi:typeof self<"u"?self:{};class ke{constructor(n,e){if(!Number.isInteger(n))throw new TypeError("span must be an integer");this.span=n,this.property=e}makeDestinationObject(){return{}}decode(n,e){throw new Error("Layout is abstract")}encode(n,e,r){throw new Error("Layout is abstract")}getSpan(n,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(n){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=n,e}fromArray(n){}}var zn=ke;function wf(t,n){return n.property?t+"["+n.property+"]":t}class dt extends ke{isCount(){throw new Error("ExternalLayout is abstract")}}class Ja extends dt{constructor(n,e,r){if(!(n instanceof ke))throw new TypeError("layout must be a Layout");if(e===void 0)e=0;else if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(n.span,r||n.property),this.layout=n,this.offset=e}isCount(){return this.layout instanceof $n||this.layout instanceof Qa}decode(n,e){return e===void 0&&(e=0),this.layout.decode(n,e+this.offset)}encode(n,e,r){return r===void 0&&(r=0),this.layout.encode(n,e,r+this.offset)}}class $n extends ke{constructor(n,e){if(super(n,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(n,e){return e===void 0&&(e=0),n.readUIntLE(e,this.span)}encode(n,e,r){return r===void 0&&(r=0),e.writeUIntLE(n,r,this.span),this.span}}class Qa extends ke{constructor(n,e){if(super(n,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(n,e){return e===void 0&&(e=0),n.readUIntBE(e,this.span)}encode(n,e,r){return r===void 0&&(r=0),e.writeUIntBE(n,r,this.span),this.span}}const Mr=Math.pow(2,32);function es(t){const n=Math.floor(t/Mr),e=t-n*Mr;return{hi32:n,lo32:e}}function ts(t,n){return t*Mr+n}class yf extends ke{constructor(n){super(8,n)}decode(n,e){e===void 0&&(e=0);const r=n.readUInt32LE(e),i=n.readUInt32LE(e+4);return ts(i,r)}encode(n,e,r){r===void 0&&(r=0);const i=es(n);return e.writeUInt32LE(i.lo32,r),e.writeUInt32LE(i.hi32,r+4),8}}class _f extends ke{constructor(n){super(8,n)}decode(n,e){e===void 0&&(e=0);const r=n.readUInt32LE(e),i=n.readInt32LE(e+4);return ts(i,r)}encode(n,e,r){r===void 0&&(r=0);const i=es(n);return e.writeUInt32LE(i.lo32,r),e.writeInt32LE(i.hi32,r+4),8}}class mf extends ke{constructor(n,e,r){if(!(Array.isArray(n)&&n.reduce((o,a)=>o&&a instanceof ke,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const o of n)if(0>o.span&&o.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=n.reduce((o,a)=>o+a.getSpan(),0)}catch{}super(i,e),this.fields=n,this.decodePrefixes=!!r}getSpan(n,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0;try{r=this.fields.reduce((i,o)=>{const a=o.getSpan(n,e);return e+=a,i+a},0)}catch{throw new RangeError("indeterminate span")}return r}decode(n,e){e===void 0&&(e=0);const r=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(r[i.property]=i.decode(n,e)),e+=i.getSpan(n,e),this.decodePrefixes&&n.length===e)break;return r}encode(n,e,r){r===void 0&&(r=0);const i=r;let o=0,a=0;for(const s of this.fields){let l=s.span;if(a=0<l?l:0,s.property!==void 0){const c=n[s.property];c!==void 0&&(a=s.encode(c,e,r),0>l&&(l=s.getSpan(e,r)))}o=r,r+=l}return o+a-i}fromArray(n){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<n.length&&(e[r.property]=n.shift());return e}layoutFor(n){if(typeof n!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===n)return e}offsetOf(n){if(typeof n!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===n)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}class ns{constructor(n){this.property=n}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class Po extends ns{constructor(n,e){if(!(n instanceof dt&&n.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||n.property||"variant"),this.layout=n}decode(n,e){return this.layout.decode(n,e)}encode(n,e,r){return this.layout.encode(n,e,r)}}class rs extends ke{constructor(n,e,r){const i=n instanceof $n||n instanceof Qa;if(i)n=new Po(new Ja(n));else if(n instanceof dt&&n.isCount())n=new Po(n);else if(!(n instanceof ns))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof ke))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let o=-1;e&&(o=e.span,0<=o&&i&&(o+=n.layout.span)),super(o,r),this.discriminator=n,this.usesPrefixDiscriminator=i,this.defaultLayout=e,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(s){return a(s)},this.configGetSourceVariant=function(s){a=s.bind(this)}}getSpan(n,e){if(0<=this.span)return this.span;e===void 0&&(e=0);const r=this.getVariant(n,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(n,e)}defaultGetSourceVariant(n){if(n.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&n.hasOwnProperty(this.defaultLayout.property))return;const e=this.registry[n[this.discriminator.property]];if(e&&(!e.layout||n.hasOwnProperty(e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(n.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}decode(n,e){e===void 0&&(e=0);let r;const i=this.discriminator,o=i.decode(n,e);let a=this.registry[o];if(a===void 0){let s=0;a=this.defaultLayout,this.usesPrefixDiscriminator&&(s=i.layout.span),r=this.makeDestinationObject(),r[i.property]=o,r[a.property]=this.defaultLayout.decode(n,e+s)}else r=a.decode(n,e);return r}encode(n,e,r){r===void 0&&(r=0);const i=this.getSourceVariant(n);if(i===void 0){const o=this.discriminator,a=this.defaultLayout;let s=0;return this.usesPrefixDiscriminator&&(s=o.layout.span),o.encode(n[o.property],e,r),s+a.encode(n[a.property],e,r+s)}return i.encode(n,e,r)}addVariant(n,e,r){const i=new bf(this,n,e,r);return this.registry[n]=i,i}getVariant(n,e){let r=n;return X.Buffer.isBuffer(n)&&(e===void 0&&(e=0),r=this.discriminator.decode(n,e)),this.registry[r]}}class bf extends ke{constructor(n,e,r,i){if(!(n instanceof rs))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&i===void 0&&(i=r,r=null),r){if(!(r instanceof ke))throw new TypeError("layout must be a Layout");if(n.defaultLayout!==null&&0<=r.span&&r.span>n.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let o=n.span;0>n.span&&(o=r?r.span:0,0<=o&&n.usesPrefixDiscriminator&&(o+=n.discriminator.layout.span)),super(o,i),this.union=n,this.variant=e,this.layout=r||null}getSpan(n,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),r+this.layout.getSpan(n,e+r)}decode(n,e){const r=this.makeDestinationObject();if(e===void 0&&(e=0),this!==this.union.getVariant(n,e))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(n,e+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(n,e,r){r===void 0&&(r=0);let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!n.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let o=i;if(this.layout&&(this.layout.encode(n[this.property],e,r+i),o+=this.layout.getSpan(e,r+i),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(n){if(this.layout)return this.layout.fromArray(n)}}class vf extends ke{constructor(n,e){if(!(n instanceof dt&&n.isCount()||Number.isInteger(n)&&0<=n))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;n instanceof dt||(r=n),super(r,e),this.length=n}getSpan(n,e){let r=this.span;return 0>r&&(r=this.length.decode(n,e)),r}decode(n,e){e===void 0&&(e=0);let r=this.span;return 0>r&&(r=this.length.decode(n,e)),n.slice(e,e+r)}encode(n,e,r){let i=this.length;if(this.length instanceof dt&&(i=n.length),!(X.Buffer.isBuffer(n)&&i===n.length))throw new TypeError(wf("Blob.encode",this)+" requires (length "+i+") Buffer as src");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return e.write(n.toString("hex"),r,i,"hex"),this.length instanceof dt&&this.length.encode(i,e,r),i}}var Ef=(t,n,e)=>new Ja(t,n,e),Af=t=>new $n(1,t),We=t=>new $n(4,t),Sf=t=>new yf(t),Ye=t=>new _f(t),ge=(t,n,e)=>new mf(t,n,e),is=(t,n,e)=>new rs(t,n,e),hn=(t,n)=>new vf(t,n);class xf extends zn{constructor(n){super(-1,n),this.property=n,this.layout=ge([We("length"),We("lengthPadding"),hn(Ef(We(),-8),"chars")],this.property)}encode(n,e,r=0){if(n==null)return this.layout.span;const i={chars:X.Buffer.from(n,"utf8")};return this.layout.encode(i,e,r)}decode(n,e=0){return this.layout.decode(n,e).chars.toString()}getSpan(n,e=0){return We().span+We().span+new qr(new Uint8Array(n).slice(e,e+4),10,"le").toNumber()}}function qn(t){return new xf(t)}function Be(t){return hn(32,t)}const Re=is(We("instruction"));Re.addVariant(0,ge([Ye("lamports"),Ye("space"),Be("owner")]),"createAccount");Re.addVariant(1,ge([Be("owner")]),"assign");Re.addVariant(2,ge([Ye("lamports")]),"transfer");Re.addVariant(3,ge([Be("base"),qn("seed"),Ye("lamports"),Ye("space"),Be("owner")]),"createAccountWithSeed");Re.addVariant(4,ge([Be("authorized")]),"advanceNonceAccount");Re.addVariant(5,ge([Ye("lamports")]),"withdrawNonceAccount");Re.addVariant(6,ge([Be("authorized")]),"initializeNonceAccount");Re.addVariant(7,ge([Be("authorized")]),"authorizeNonceAccount");Re.addVariant(8,ge([Ye("space")]),"allocate");Re.addVariant(9,ge([Be("base"),qn("seed"),Ye("space"),Be("owner")]),"allocateWithSeed");Re.addVariant(10,ge([Be("base"),qn("seed"),Be("owner")]),"assignWithSeed");Re.addVariant(11,ge([Ye("lamports"),qn("seed"),Be("owner")]),"transferWithSeed");Math.max(...Object.values(Re.registry).map(t=>t.span));class kf extends zn{constructor(n,e,r,i){super(n.span,i),this.layout=n,this.decoder=e,this.encoder=r}decode(n,e){return this.decoder(this.layout.decode(n,e))}encode(n,e,r){return this.layout.encode(this.encoder(n),e,r)}getSpan(n,e){return this.layout.getSpan(n,e)}}function Do(t){return new kf(hn(32),n=>new _e(n),n=>n.toBuffer(),t)}ge([We("version"),We("state"),Do("authorizedPubkey"),Do("nonce"),ge([Sf("lamportsPerSignature")],"feeCalculator")]);function If(t,n,e){const r=X.Buffer.concat([t.toBuffer(),X.Buffer.from(n),e.toBuffer()]),i=Tt.sha256.digest(r);return new _e(X.Buffer.from(i))}function Of(t,n){let r=X.Buffer.alloc(0);t.forEach(function(a){if(a.length>32)throw new TypeError("Max seed length exceeded");r=X.Buffer.concat([r,Tf(a)])}),r=X.Buffer.concat([r,n.toBuffer(),X.Buffer.from("ProgramDerivedAddress")]);let i=Tt.sha256(new Uint8Array(r)),o=new qr(i,16).toArray(void 0,32);if(_e.isOnCurve(new Uint8Array(o)))throw new Error("Invalid seeds, address must fall off the curve");return new _e(o)}function os(t,n){let e=255,r;for(;e!=0;){try{const i=t.concat(X.Buffer.from([e]));r=Of(i,n)}catch(i){if(i instanceof TypeError)throw i;e--;continue}return[r,e]}throw new Error("Unable to find a viable program address nonce")}const Tf=t=>t instanceof X.Buffer?t:t instanceof Uint8Array?X.Buffer.from(t.buffer,t.byteOffset,t.byteLength):X.Buffer.from(t);async function Rf(t,...n){let e=[X.Buffer.from([97,110,99,104,111,114])];n.forEach(i=>{e.push(i instanceof X.Buffer?i:De(i).toBuffer())});const[r]=await _e.findProgramAddress(e,De(t));return r}const Lf=new _e("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),Pf=new _e("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var No={exports:{}};(function(t,n){var e=typeof self<"u"?self:gf,r=function(){function o(){this.fetch=!1,this.DOMException=e.DOMException}return o.prototype=e,new o}();(function(o){(function(a){var s={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function l(d){return d&&DataView.prototype.isPrototypeOf(d)}if(s.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(d){return d&&c.indexOf(Object.prototype.toString.call(d))>-1};function x(d){if(typeof d!="string"&&(d=String(d)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(d))throw new TypeError("Invalid character in header field name");return d.toLowerCase()}function h(d){return typeof d!="string"&&(d=String(d)),d}function f(d){var m={next:function(){var j=d.shift();return{done:j===void 0,value:j}}};return s.iterable&&(m[Symbol.iterator]=function(){return m}),m}function b(d){this.map={},d instanceof b?d.forEach(function(m,j){this.append(j,m)},this):Array.isArray(d)?d.forEach(function(m){this.append(m[0],m[1])},this):d&&Object.getOwnPropertyNames(d).forEach(function(m){this.append(m,d[m])},this)}b.prototype.append=function(d,m){d=x(d),m=h(m);var j=this.map[d];this.map[d]=j?j+", "+m:m},b.prototype.delete=function(d){delete this.map[x(d)]},b.prototype.get=function(d){return d=x(d),this.has(d)?this.map[d]:null},b.prototype.has=function(d){return this.map.hasOwnProperty(x(d))},b.prototype.set=function(d,m){this.map[x(d)]=h(m)},b.prototype.forEach=function(d,m){for(var j in this.map)this.map.hasOwnProperty(j)&&d.call(m,this.map[j],j,this)},b.prototype.keys=function(){var d=[];return this.forEach(function(m,j){d.push(j)}),f(d)},b.prototype.values=function(){var d=[];return this.forEach(function(m){d.push(m)}),f(d)},b.prototype.entries=function(){var d=[];return this.forEach(function(m,j){d.push([j,m])}),f(d)},s.iterable&&(b.prototype[Symbol.iterator]=b.prototype.entries);function C(d){if(d.bodyUsed)return Promise.reject(new TypeError("Already read"));d.bodyUsed=!0}function D(d){return new Promise(function(m,j){d.onload=function(){m(d.result)},d.onerror=function(){j(d.error)}})}function O(d){var m=new FileReader,j=D(m);return m.readAsArrayBuffer(d),j}function B(d){var m=new FileReader,j=D(m);return m.readAsText(d),j}function q(d){for(var m=new Uint8Array(d),j=new Array(m.length),ne=0;ne<m.length;ne++)j[ne]=String.fromCharCode(m[ne]);return j.join("")}function I(d){if(d.slice)return d.slice(0);var m=new Uint8Array(d.byteLength);return m.set(new Uint8Array(d)),m.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(d){this._bodyInit=d,d?typeof d=="string"?this._bodyText=d:s.blob&&Blob.prototype.isPrototypeOf(d)?this._bodyBlob=d:s.formData&&FormData.prototype.isPrototypeOf(d)?this._bodyFormData=d:s.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)?this._bodyText=d.toString():s.arrayBuffer&&s.blob&&l(d)?(this._bodyArrayBuffer=I(d.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(d)||u(d))?this._bodyArrayBuffer=I(d):this._bodyText=d=Object.prototype.toString.call(d):this._bodyText="",this.headers.get("content-type")||(typeof d=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):s.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s.blob&&(this.blob=function(){var d=C(this);if(d)return d;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?C(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(O)}),this.text=function(){var d=C(this);if(d)return d;if(this._bodyBlob)return B(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(q(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s.formData&&(this.formData=function(){return this.text().then(M)}),this.json=function(){return this.text().then(JSON.parse)},this}var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function E(d){var m=d.toUpperCase();return _.indexOf(m)>-1?m:d}function T(d,m){m=m||{};var j=m.body;if(d instanceof T){if(d.bodyUsed)throw new TypeError("Already read");this.url=d.url,this.credentials=d.credentials,m.headers||(this.headers=new b(d.headers)),this.method=d.method,this.mode=d.mode,this.signal=d.signal,!j&&d._bodyInit!=null&&(j=d._bodyInit,d.bodyUsed=!0)}else this.url=String(d);if(this.credentials=m.credentials||this.credentials||"same-origin",(m.headers||!this.headers)&&(this.headers=new b(m.headers)),this.method=E(m.method||this.method||"GET"),this.mode=m.mode||this.mode||null,this.signal=m.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&j)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(j)}T.prototype.clone=function(){return new T(this,{body:this._bodyInit})};function M(d){var m=new FormData;return d.trim().split("&").forEach(function(j){if(j){var ne=j.split("="),le=ne.shift().replace(/\+/g," "),S=ne.join("=").replace(/\+/g," ");m.append(decodeURIComponent(le),decodeURIComponent(S))}}),m}function L(d){var m=new b,j=d.replace(/\r?\n[\t ]+/g," ");return j.split(/\r?\n/).forEach(function(ne){var le=ne.split(":"),S=le.shift().trim();if(S){var P=le.join(":").trim();m.append(S,P)}}),m}v.call(T.prototype);function F(d,m){m||(m={}),this.type="default",this.status=m.status===void 0?200:m.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in m?m.statusText:"OK",this.headers=new b(m.headers),this.url=m.url||"",this._initBody(d)}v.call(F.prototype),F.prototype.clone=function(){return new F(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},F.error=function(){var d=new F(null,{status:0,statusText:""});return d.type="error",d};var R=[301,302,303,307,308];F.redirect=function(d,m){if(R.indexOf(m)===-1)throw new RangeError("Invalid status code");return new F(null,{status:m,headers:{location:d}})},a.DOMException=o.DOMException;try{new a.DOMException}catch{a.DOMException=function(m,j){this.message=m,this.name=j;var ne=Error(m);this.stack=ne.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function N(d,m){return new Promise(function(j,ne){var le=new T(d,m);if(le.signal&&le.signal.aborted)return ne(new a.DOMException("Aborted","AbortError"));var S=new XMLHttpRequest;function P(){S.abort()}S.onload=function(){var Z={status:S.status,statusText:S.statusText,headers:L(S.getAllResponseHeaders()||"")};Z.url="responseURL"in S?S.responseURL:Z.headers.get("X-Request-URL");var $="response"in S?S.response:S.responseText;j(new F($,Z))},S.onerror=function(){ne(new TypeError("Network request failed"))},S.ontimeout=function(){ne(new TypeError("Network request failed"))},S.onabort=function(){ne(new a.DOMException("Aborted","AbortError"))},S.open(le.method,le.url,!0),le.credentials==="include"?S.withCredentials=!0:le.credentials==="omit"&&(S.withCredentials=!1),"responseType"in S&&s.blob&&(S.responseType="blob"),le.headers.forEach(function(Z,$){S.setRequestHeader($,Z)}),le.signal&&(le.signal.addEventListener("abort",P),S.onreadystatechange=function(){S.readyState===4&&le.signal.removeEventListener("abort",P)}),S.send(typeof le._bodyInit>"u"?null:le._bodyInit)})}return N.polyfill=!0,o.fetch||(o.fetch=N,o.Headers=b,o.Request=T,o.Response=F),a.Headers=b,a.Request=T,a.Response=F,a.fetch=N,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;n=i.fetch,n.default=i.fetch,n.fetch=i.fetch,n.Headers=i.Headers,n.Request=i.Request,n.Response=i.Response,t.exports=n})(No,No.exports);J.rustEnum([J.struct([],"uninitialized"),J.struct([J.option(J.publicKey(),"authorityAddress")],"buffer"),J.struct([J.publicKey("programdataAddress")],"program"),J.struct([J.u64("slot"),J.option(J.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,J.u32());function Df(t){return"accounts"in t}async function Nf(t){const n=(await _e.findProgramAddress([],t))[0];return await _e.createWithSeed(n,Bf(),t)}function Bf(){return"anchor:idl"}const Cf=J.struct([J.publicKey("authority"),J.vecU8("data")]);function Uf(t){return Cf.decode(t)}function Fn(t,n){var e,r;let i={};const o=t.args?t.args.length:0;if(n.length>o){if(n.length!==o+1)throw new Error(`provided too many arguments ${n} to instruction ${t==null?void 0:t.name} expecting: ${(r=(e=t.args)===null||e===void 0?void 0:e.map(a=>a.name))!==null&&r!==void 0?r:[]}`);i=n.pop()}return[n,i]}class Ot{static build(n,e,r){if(n.name==="_inner")throw new Pn("the _inner name is reserved");const i=(...o)=>{const[a,s]=Fn(n,[...o]);ii(n.accounts,s.accounts),jf(n,...o);const l=i.accounts(s.accounts);return s.remainingAccounts!==void 0&&l.push(...s.remainingAccounts),ci("debug-logs")&&console.log("Outgoing account metas:",l),new ms({keys:l,programId:r,data:e(n.name,Ul(n,...a))})};return i.accounts=o=>Ot.accountsArray(o,n.accounts,r,n.name),i}static accountsArray(n,e,r,i){return n?e.map(o=>{if(("accounts"in o?o.accounts:void 0)!==void 0){const s=n[o.name];return Ot.accountsArray(s,o.accounts,r,i).flat()}else{const s=o;let l;try{l=De(n[o.name])}catch{throw new Error(`Wrong input type for account "${o.name}" in the instruction accounts object${i!==void 0?' for instruction "'+i+'"':""}. Expected PublicKey or string.`)}const c=s.isOptional&&l.equals(r),u=s.isMut&&!c,x=s.isSigner&&!c;return{pubkey:l,isWritable:u,isSigner:x}}}).flat():[]}}function jf(t,...n){}class as{static build(n,e,r,i){return async(...a)=>{var s;const l=e(...a),[,c]=Fn(n,[...a]);if(i.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await i.sendAndConfirm(l,(s=c.signers)!==null&&s!==void 0?s:[],c.options)}catch(u){throw Wa(u,r)}}}}class ss{static build(n,e){return(...i)=>{var o,a,s;const[,l]=Fn(n,[...i]),c=new bs;if(l.preInstructions&&l.instructions)throw new Error("instructions is deprecated, use preInstructions");return(o=l.preInstructions)===null||o===void 0||o.forEach(u=>c.add(u)),(a=l.instructions)===null||a===void 0||a.forEach(u=>c.add(u)),c.add(e(...i)),(s=l.postInstructions)===null||s===void 0||s.forEach(u=>c.add(u)),c}}}class Mf{static build(n,e,r,i){if(n.state!==void 0)return new zf(n,r,i,e)}}class zf{get programId(){return this._programId}constructor(n,e,r=Ln(),i=new li(n)){this.provider=r,this.coder=i,this._idl=n,this._programId=e,this._address=zr(e),this._sub=null;const[o,a,s]=(()=>{var l;let c={},u={},x={};return(l=n.state)===null||l===void 0||l.methods.forEach(h=>{const f=Ot.build(h,(O,B)=>i.instruction.encodeState(O,B),e);f.accounts=O=>$f(e,r,h,O).concat(Ot.accountsArray(O,h.accounts,e,h.name));const b=ss.build(h,f),C=as.build(h,b,Za(n),r),D=he(h.name);c[D]=f,u[D]=b,x[D]=C}),[c,u,x]})();this.instruction=o,this.transaction=a,this.rpc=s}async fetch(){const n=this.address(),e=await this.provider.connection.getAccountInfo(n);if(e===null)throw new Error(`Account does not exist ${n.toString()}`);const r=this._idl.state;if(!r)throw new Error("State is not specified in IDL.");if((await Xa(r.struct.name)).compare(e.data.slice(0,8)))throw new Error("Invalid account discriminator");return this.coder.state.decode(e.data)}address(){return this._address}subscribe(n){if(this._sub!==null)return this._sub.ee;const e=new Uo,r=this.provider.connection.onAccountChange(this.address(),i=>{const o=this.coder.state.decode(i.data);e.emit("change",o)},n);return this._sub={ee:e,listener:r},e}unsubscribe(){this._sub!==null&&this.provider.connection.removeAccountChangeListener(this._sub.listener).then(async()=>{this._sub=null}).catch(console.error)}}function zr(t){let[n]=os([],t);return If(n,"unversioned",t)}function $f(t,n,e,r){if(e.name==="new"){const[i]=os([],t);if(n.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");return[{pubkey:n.wallet.publicKey,isWritable:!1,isSigner:!0},{pubkey:zr(t),isWritable:!0,isSigner:!1},{pubkey:i,isWritable:!1,isSigner:!1},{pubkey:Fr.programId,isWritable:!1,isSigner:!1},{pubkey:t,isWritable:!1,isSigner:!1}]}else return ii(e.accounts,r),[{pubkey:zr(t),isWritable:!0,isSigner:!1}]}class qf{static build(n,e,r,i){var o;const a={};return(o=n.accounts)===null||o===void 0||o.forEach(s=>{const l=he(s.name);a[l]=new Ff(n,s,r,i,e)}),a}}class Ff{get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}constructor(n,e,r,i,o){this._idlAccount=e,this._programId=r,this._provider=i??Ln(),this._coder=o??new li(n),this._size=this._coder.accounts.size(e)}async fetchNullable(n,e){const{data:r}=await this.fetchNullableAndContext(n,e);return r}async fetchNullableAndContext(n,e){const r=await this.getAccountInfoAndContext(n,e),{value:i,context:o}=r;return{data:i&&i.data.length!==0?this._coder.accounts.decode(this._idlAccount.name,i.data):null,context:o}}async fetch(n,e){const{data:r}=await this.fetchNullableAndContext(n,e);if(r===null)throw new Error(`Account does not exist or has no data ${n.toString()}`);return r}async fetchAndContext(n,e){const{data:r,context:i}=await this.fetchNullableAndContext(n,e);if(r===null)throw new Error(`Account does not exist ${n.toString()}`);return{data:r,context:i}}async fetchMultiple(n,e){return(await this.fetchMultipleAndContext(n,e)).map(i=>i?i.data:null)}async fetchMultipleAndContext(n,e){return(await Gl(this._provider.connection,n.map(i=>De(i)),e)).map(i=>{if(i==null)return null;const{account:o,context:a}=i;return{data:this._coder.accounts.decode(this._idlAccount.name,o.data),context:a}})}async all(n){const e=this.coder.accounts.memcmp(this._idlAccount.name,n instanceof X.Buffer?n:void 0),r=[];return(e==null?void 0:e.offset)!=null&&(e==null?void 0:e.bytes)!=null&&r.push({memcmp:{offset:e.offset,bytes:e.bytes}}),(e==null?void 0:e.dataSize)!=null&&r.push({dataSize:e.dataSize}),(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[...r,...Array.isArray(n)?n:[]]})).map(({pubkey:o,account:a})=>({publicKey:o,account:this._coder.accounts.decode(this._idlAccount.name,a.data)}))}subscribe(n,e){const r=Mt.get(n.toString());if(r)return r.ee;const i=new Uo;n=De(n);const o=this._provider.connection.onAccountChange(n,a=>{const s=this._coder.accounts.decode(this._idlAccount.name,a.data);i.emit("change",s)},e);return Mt.set(n.toString(),{ee:i,listener:o}),i}async unsubscribe(n){let e=Mt.get(n.toString());if(!e){console.warn("Address is not subscribed");return}Mt&&await this._provider.connection.removeAccountChangeListener(e.listener).then(()=>{Mt.delete(n.toString())}).catch(console.error)}async createInstruction(n,e){const r=this.size;if(this._provider.publicKey===void 0)throw new Error("This function requires the Provider interface implementor to have a 'publicKey' field.");return Fr.createAccount({fromPubkey:this._provider.publicKey,newAccountPubkey:n.publicKey,space:e??r,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(e??r),programId:this._programId})}async associated(...n){const e=await this.associatedAddress(...n);return await this.fetch(e)}async associatedAddress(...n){return await Rf(this._programId,...n)}async getAccountInfo(n,e){return await this._provider.connection.getAccountInfo(De(n),e)}async getAccountInfoAndContext(n,e){return await this._provider.connection.getAccountInfoAndContext(De(n),e)}}const Mt=new Map,$r="Program log: ",cs="Program data: ",Vf=$r.length,Zf=cs.length;class Hf{constructor(n,e,r){this._programId=n,this._provider=e,this._eventParser=new us(n,r),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(n,e){var r;let i=this._listenerIdCount;return this._listenerIdCount+=1,this._eventListeners.has(n)||this._eventListeners.set(n,[]),this._eventListeners.set(n,((r=this._eventListeners.get(n))!==null&&r!==void 0?r:[]).concat(i)),this._eventCallbacks.set(i,[n,e]),this._onLogsSubscriptionId!==void 0||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,(o,a)=>{if(!o.err)for(const s of this._eventParser.parseLogs(o.logs)){const l=this._eventListeners.get(s.name);l&&l.forEach(c=>{const u=this._eventCallbacks.get(c);if(u){const[,x]=u;x(s.data,a.slot,o.signature)}})}})),i}async removeEventListener(n){const e=this._eventCallbacks.get(n);if(!e)throw new Error(`Event listener ${n} doesn't exist!`);const[r]=e;let i=this._eventListeners.get(r);if(!i)throw new Error(`Event listeners don't exist for ${r}!`);this._eventCallbacks.delete(n),i=i.filter(o=>o!==n),this._eventListeners.set(r,i),i.length===0&&this._eventListeners.delete(r),this._eventCallbacks.size==0&&(Nr.ok(this._eventListeners.size===0),this._onLogsSubscriptionId!==void 0&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0))}}class us{constructor(n,e){this.coder=e,this.programId=n}*parseLogs(n,e=!1){const r=new Kf(n),i=new Gf;let o=r.next();for(;o!==null;){let[a,s,l]=this.handleLog(i,o,e);a&&(yield a),s&&i.push(s),l&&i.pop(),o=r.next()}}handleLog(n,e,r){return n.stack.length>0&&n.program()===this.programId.toString()?this.handleProgramLog(e,r):[null,...this.handleSystemLog(e)]}handleProgramLog(n,e){if(n.startsWith($r)||n.startsWith(cs)){const r=n.startsWith($r)?n.slice(Vf):n.slice(Zf),i=this.coder.events.decode(r);if(e&&i===null)throw new Error(`Unable to decode event ${r}`);return[i,null,!1]}else return[null,...this.handleSystemLog(n)]}handleSystemLog(n){const e=n.split(":")[0];return e.match(/^Program (.*) success/g)!==null?[null,!0]:e.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:e.includes("invoke")?["cpi",!1]:[null,!1]}}class Gf{constructor(){this.stack=[]}program(){return Nr.ok(this.stack.length>0),this.stack[this.stack.length-1]}push(n){this.stack.push(n)}pop(){Nr.ok(this.stack.length>0),this.stack.pop()}}class Kf{constructor(n){this.logs=n}next(){if(this.logs.length===0)return null;let n=this.logs[0];return this.logs=this.logs.slice(1),n}}class Wf{static build(n,e,r,i,o,a,s){return async(...c)=>{var u;const x=e(...c),[,h]=Fn(n,[...c]);let f;if(i.simulate===void 0)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{f=await i.simulate(x,h.signers,(u=h.options)===null||u===void 0?void 0:u.commitment)}catch(D){throw Wa(D,r)}if(f===void 0)throw new Error("Unable to simulate transaction");const b=f.logs;if(!b)throw new Error("Simulated logs not found");const C=[];if(s.events){let D=new us(a,o);for(const O of D.parseLogs(b))C.push(O)}return{events:C,raw:b}}}}function br(t){return new ls(hn(8),n=>fi.fromBuffer(n),n=>n.toBuffer(),t)}function En(t){return new ls(hn(32),n=>new _e(n),n=>n.toBuffer(),t)}function vr(t,n){return new Yf(t,n)}class ls extends zn{constructor(n,e,r,i){super(n.span,i),this.layout=n,this.decoder=e,this.encoder=r}decode(n,e){return this.decoder(this.layout.decode(n,e))}encode(n,e,r){return this.layout.encode(this.encoder(n),e,r)}getSpan(n,e){return this.layout.getSpan(n,e)}}class Yf extends zn{constructor(n,e){super(-1,e),this.layout=n,this.discriminator=We()}encode(n,e,r=0){return n==null?this.layout.span+this.discriminator.encode(0,e,r):(this.discriminator.encode(1,e,r),this.layout.encode(n,e,r+4)+4)}decode(n,e=0){const r=this.discriminator.decode(n,e);if(r===0)return null;if(r===1)return this.layout.decode(n,e+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(n,e=0){return this.layout.getSpan(n,e+4)+4}}class fi extends qr{toBuffer(){const n=super.toArray().reverse(),e=X.Buffer.from(n);if(e.length===8)return e;if(e.length>=8)throw new Error("u64 too large");const r=X.Buffer.alloc(8);return e.copy(r),r}static fromBuffer(n){if(n.length!==8)throw new Error(`Invalid buffer length: ${n.length}`);return new fi([...n].reverse().map(e=>`00${e.toString(16)}`.slice(-2)).join(""),16)}}const Xf=ge([En("mint"),En("owner"),br("amount"),vr(En(),"delegate"),(t=>{const n=is(Af("discriminator"),null,t);return n.addVariant(0,ge([]),"uninitialized"),n.addVariant(1,ge([]),"initialized"),n.addVariant(2,ge([]),"frozen"),n})("state"),vr(br(),"isNative"),br("delegatedAmount"),vr(En(),"closeAuthority")]);function Jf(t){return Xf.decode(t)}class rn{constructor(n,e,r,i,o,a,s,l){this._accounts=e,this._provider=r,this._programId=i,this._idlIx=o,this._idlTypes=s,this._customResolver=l,this._args=n,this._accountStore=new Qf(r,a,this._programId)}args(n){this._args=n}async resolve(){for(await this.resolveConst(this._idlIx.accounts);await this.resolvePdas(this._idlIx.accounts)+await this.resolveRelations(this._idlIx.accounts)+await this.resolveCustom()>0;);}async resolveCustom(){if(this._customResolver){const{accounts:n,resolved:e}=await this._customResolver({args:this._args,accounts:this._accounts,provider:this._provider,programId:this._programId,idlIx:this._idlIx});return this._accounts=n,e}return 0}resolveOptionalsHelper(n,e){const r={};for(const i of e){const o=i.name,a=n[o];a!==void 0&&(fs(a)?Df(i)?r[o]=this.resolveOptionalsHelper(a,i.accounts):r[o]=ds(a,!0):a!==null?r[o]=De(a):i.isOptional&&(r[o]=this._programId))}return r}resolveOptionals(n){Object.assign(this._accounts,this.resolveOptionalsHelper(n,this._idlIx.accounts))}get(n){const e=n.reduce((r,i)=>r&&r[i],this._accounts);if(e&&e.toBase58)return e}set(n,e){let r=this._accounts;n.forEach((i,o)=>{o==n.length-1&&(r[i]=e),r[i]=r[i]||{},r=r[i]})}async resolveConst(n,e=[]){for(let r=0;r<n.length;r+=1){const i=n[r],o=i.accounts;o&&await this.resolveConst(o,[...e,he(i.name)]);const a=i,s=he(i.name);if(a.isSigner&&!this.get([...e,s])){if(this._provider.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");this.set([...e,s],this._provider.wallet.publicKey)}Reflect.has(rn.CONST_ACCOUNTS,s)&&!this.get([...e,s])&&this.set([...e,s],rn.CONST_ACCOUNTS[s])}}async resolvePdas(n,e=[]){let r=0;for(let i=0;i<n.length;i+=1){const o=n[i],a=o.accounts;a&&(r+=await this.resolvePdas(a,[...e,he(o.name)]));const s=o,l=he(o.name);s.pda&&s.pda.seeds.length>0&&!this.get([...e,l])&&await this.autoPopulatePda(s,e)&&(r+=1)}return r}async resolveRelations(n,e=[]){let r=0;for(let i=0;i<n.length;i+=1){const o=n[i],a=o.accounts;a&&(r+=await this.resolveRelations(a,[...e,he(o.name)]));const s=o.relations||[],l=he(o.name),c=[...e,l],u=this.get(c);if(u){const x=s.filter(h=>!this.get([...e,he(h)]));if(r+=x.length,x.length>0){const h=await this._accountStore.fetchAccount({publicKey:u});await Promise.all(x.map(async f=>{const b=he(f);return this.set([...e,b],h[b]),h[b]}))}}}return r}async autoPopulatePda(n,e=[]){if(!n.pda||!n.pda.seeds)throw new Error("Must have seeds");const r=await Promise.all(n.pda.seeds.map(a=>this.toBuffer(a,e)));if(r.some(a=>typeof a>"u"))return;const i=await this.parseProgramId(n,e);if(!i)return;const[o]=await _e.findProgramAddress(r,i);this.set([...e,he(n.name)],o)}async parseProgramId(n,e=[]){var r;if(!(!((r=n.pda)===null||r===void 0)&&r.programId))return this._programId;switch(n.pda.programId.kind){case"const":return new _e(this.toBufferConst(n.pda.programId.value));case"arg":return this.argValue(n.pda.programId);case"account":return await this.accountValue(n.pda.programId,e);default:throw new Error(`Unexpected program seed kind: ${n.pda.programId.kind}`)}}async toBuffer(n,e=[]){switch(n.kind){case"const":return this.toBufferConst(n);case"arg":return await this.toBufferArg(n);case"account":return await this.toBufferAccount(n,e);default:throw new Error(`Unexpected seed kind: ${n.kind}`)}}getType(n,e=[]){if(e.length>0&&n.defined){const r=this._idlTypes.find(a=>a.name===n.defined);if(!r)throw new Error(`Cannot find type ${n.defined}`);const o=r.type.fields.find(a=>a.name===e[0]);return this.getType(o.type,e.slice(1))}return n}toBufferConst(n){return this.toBufferValue(this.getType(n.type,(n.path||"").split(".").slice(1)),n.value)}async toBufferArg(n){const e=this.argValue(n);if(!(typeof e>"u"))return this.toBufferValue(this.getType(n.type,(n.path||"").split(".").slice(1)),e)}argValue(n){const e=n.path.split("."),r=he(e[0]),i=this._idlIx.args.findIndex(o=>o.name===r);if(i===-1)throw new Error(`Unable to find argument for seed: ${r}`);return e.slice(1).reduce((o,a)=>(o||{})[a],this._args[i])}async toBufferAccount(n,e=[]){const r=await this.accountValue(n,e);if(r)return this.toBufferValue(n.type,r)}async accountValue(n,e=[]){const r=n.path.split("."),i=r[0],o=this.get([...e,he(i)]);if(o===null)throw new Error("fieldPubkey is null");if(r.length===1)return o;const a=await this._accountStore.fetchAccount({publicKey:o,name:n.account});return this.parseAccountValue(a,r.slice(1))}parseAccountValue(n,e){let r;for(;e.length>0;)r=n[he(e[0])],e=e.slice(1);return r}toBufferValue(n,e){switch(n){case"u8":return X.Buffer.from([e]);case"u16":let r=X.Buffer.alloc(2);return r.writeUInt16LE(e),r;case"u32":let i=X.Buffer.alloc(4);return i.writeUInt32LE(e),i;case"u64":let o=X.Buffer.alloc(8);return o.writeBigUInt64LE(BigInt(e)),o;case"string":return X.Buffer.from(Bl(e));case"publicKey":return e.toBuffer();default:if(n.array)return X.Buffer.from(e);throw new Error(`Unexpected seed type: ${n}`)}}}rn.CONST_ACCOUNTS={associatedTokenProgram:Pf,rent:ys,systemProgram:Fr.programId,tokenProgram:Lf,clock:_s};class Qf{constructor(n,e,r){this._provider=n,this._programId=r,this._cache=new Map,this._idls={},this._idls[r.toBase58()]=e}async ensureIdl(n){if(!this._idls[n.toBase58()]){const e=await on.fetchIdl(n,this._provider);if(e){const r=new on(e,n,this._provider);this._idls[n.toBase58()]=r.account}}return this._idls[n.toBase58()]}async fetchAccount({publicKey:n,name:e,programId:r=this._programId}){const i=n.toString();if(!this._cache.has(i))if(e==="TokenAccount"){const o=await this._provider.connection.getAccountInfo(n);if(o===null)throw new Error(`invalid account info for ${i}`);const a=Jf(o.data);this._cache.set(i,a)}else if(e){const o=await this.ensureIdl(r);if(o){const a=o[he(e)];if(a){const s=await a.fetch(n);this._cache.set(i,s)}}}else{const o=await this._provider.connection.getAccountInfo(n);if(o===null)throw new Error(`invalid account info for ${i}`);const a=o.data,s=await this.ensureIdl(o.owner);if(s){const l=Object.values(s)[0];if(!l)throw new Error("No accounts for this program");const c=l.coder.accounts.decodeAny(a);this._cache.set(i,c)}}return this._cache.get(i)}}class ed{static build(n,e,r,i,o,a,s,l,c,u,x){return(...h)=>new td(h,i,o,a,s,l,n,e,r,c,u,x)}}function fs(t){return typeof t=="object"&&t!==null&&!("_bn"in t)}function ds(t,n){const e={};for(const r in t){const i=t[r];if(i===null){if(n)throw new Error("Failed to resolve optionals due to IDL type mismatch with input accounts!");continue}e[r]=fs(i)?ds(i,!0):De(i)}return e}class td{constructor(n,e,r,i,o,a,s,l,c,u,x,h){this._ixFn=e,this._txFn=r,this._rpcFn=i,this._simulateFn=o,this._viewFn=a,this._programId=l,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._autoResolveAccounts=!0,this._args=n,this._accountsResolver=new rn(n,this._accounts,s,l,c,u,x,h)}args(n){this._args=n,this._accountsResolver.args(n)}async pubkeys(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._accounts}accounts(n){return this._autoResolveAccounts=!0,this._accountsResolver.resolveOptionals(n),this}accountsStrict(n){return this._autoResolveAccounts=!1,this._accountsResolver.resolveOptionals(n),this}signers(n){return this._signers=this._signers.concat(n),this}remainingAccounts(n){return this._remainingAccounts=this._remainingAccounts.concat(n),this}preInstructions(n){return this._preInstructions=this._preInstructions.concat(n),this}postInstructions(n){return this._postInstructions=this._postInstructions.concat(n),this}async rpc(n){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:n})}async rpcAndKeys(n){return{pubkeys:await this.pubkeys(),signature:await this.rpc(n)}}async view(n){if(this._autoResolveAccounts&&await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:n})}async simulate(n){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:n})}async instruction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async prepare(){return{instruction:await this.instruction(),pubkeys:await this.pubkeys(),signers:await this._signers}}async transaction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}}class nd{static build(n,e,r,i){const o=e.accounts.find(l=>l.isMut),a=!!e.returns;return o||!a?void 0:async(...l)=>{var c,u;let x=await r(...l);const h=`Program return: ${n} `;let f=x.raw.find(O=>O.startsWith(h));if(!f)throw new Error("View expected return log");let b=Cl(f.slice(h.length)),C=e.returns;if(!C)throw new Error("View expected return type");return Ee.fieldLayout({type:C},Array.from([...(c=i.accounts)!==null&&c!==void 0?c:[],...(u=i.types)!==null&&u!==void 0?u:[]])).decode(b)}}}class rd{static build(n,e,r,i,o){const a={},s={},l={},c={},u={},x={},h=Za(n),f=n.accounts?qf.build(n,e,r,i):{},b=Mf.build(n,e,r,i);return n.instructions.forEach(C=>{const D=Ot.build(C,(E,T)=>e.instruction.encode(E,T),r),O=ss.build(C,D),B=as.build(C,O,h,i),q=Wf.build(C,O,h,i,e,r,n),I=nd.build(r,C,q,n),v=ed.build(i,r,C,D,O,B,q,I,f,n.types||[],o&&o(C)),_=he(C.name);s[_]=D,l[_]=O,a[_]=B,c[_]=q,u[_]=v,I&&(x[_]=I)}),[a,s,l,f,c,u,b,x]}}class on{get programId(){return this._programId}get idl(){return this._idl}get coder(){return this._coder}get provider(){return this._provider}constructor(n,e,r,i,o){e=De(e),r||(r=Ln()),this._idl=n,this._provider=r,this._programId=e,this._coder=i??new li(n),this._events=new Hf(this._programId,r,this._coder);const[a,s,l,c,u,x,h,f]=rd.build(n,this._coder,e,r,o??(()=>{}));this.rpc=a,this.instruction=s,this.transaction=l,this.account=c,this.simulate=u,this.methods=x,this.state=h,this.views=f}static async at(n,e){const r=De(n),i=await on.fetchIdl(r,e);if(!i)throw new Error(`IDL not found for program: ${n.toString()}`);return new on(i,r,e)}static async fetchIdl(n,e){e=e??Ln();const r=De(n),i=await Nf(r),o=await e.connection.getAccountInfo(i);if(!o)return null;let a=Uf(o.data.slice(8));const s=gl(a.data);return JSON.parse(Nl(s))}addEventListener(n,e){return this._events.addEventListener(n,e)}async removeEventListener(n){return await this._events.removeEventListener(n)}}new _e("11111111111111111111111111111111");export{Ql as A,on as P,$s as r,xd as s};
