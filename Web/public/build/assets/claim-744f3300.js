import{T as h}from"./TransactionBlock-3fb0dd4a.js";import{b,g as f}from"./index-aaeb3140.js";import{A as g,P as y}from"./index-7c63b2ea.js";import{P as l,C as k,c as _}from"./index.browser.esm-cc417bbe.js";import{i as j}from"./abi-75b191bb.js";import"./bn-a0a0c8e1.js";import{a as r}from"./axios-654eef56.js";import{E as v}from"./keypair-becfe882.js";import{S as A,g as x}from"./client-144d5df2.js";import"./legacy-registry-4fcefa09.js";import"./index-ea9ea726.js";import"./blake2b-0b963f07.js";import"./_md-5eb5ac83.js";import"./sha256-a86b6b42.js";import"./util-fc318f65.js";import"./sha512-d6693c92.js";import"./secp256k1-a06cb75b.js";import"./encoding-e26e765b.js";import"./nacl-fast-855db264.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./index-54e210ce.js";import"./hash-046412e8.js";const C=$("#mnemonic_client").val();$("#package_id").val();const I=$("#collection_id").val(),c=v.deriveKeypair(C),a=new A({url:x("testnet")}),P="https://api.devnet.solana.com";new b("pk_live_F223EA517482BAF8",{extensions:{solana:new f({rpcUrl:P})}});const K=new window.SolanaConnect;new l("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");const R=new k(_("devnet")),T=new l("D5GK8Kye78gjuDMMjRnkWH5a6KfNEXzex5mekXL3HLR2");let z=new g(R,K.getWallet(),{commitment:"confirmed"});new y(j,T,z);$(".claim-btn").click(async function(){const s=$("#email").val();if(!s)alert("Please input to email !!!");else{$("#myModal").modal("hide"),$(".loading").show();const o=$("#nft_id").val();try{const e={nft_id:o,email:s};console.log(e);const i=await r.post("/update_nft_status",e);alert("Claim NFT is success. Please see on https://suiscan.xyz/"),$(".loading").hide(),$(".claim-success").show(),$(".sol-link").show(),$(".btn-claim-id").hide(),$(".claim-btn").hide(),$(".showModal").hide()}catch(e){alert(e.message)}}});$(".btn-claim-id").click(async function(){$(".loading").show();let s=c.getPublicKey().toSuiAddress();const o=new h;let e=I,i=localStorage.getItem("zkLoginUserAddress");const n=await a.getOwnedObjects({owner:s,options:{showType:!0,showDisplay:!0,showContent:!0}}),d=((n==null?void 0:n.data)||[]).filter(t=>t.data.objectId==e).map(t=>t.data.objectId),m=(await a.multiGetObjects({ids:d,options:{showContent:!0,showDisplay:!0,showType:!0}})).filter(t=>t.data).map(t=>({objectId:t.data.objectId,data:t.data.content.fields})).map(t=>t.data.tickets);console.log(m);let p=$("#ticket_id").val();o.transferObjects([o.object(p)],i);const w=$("#nft_id").val();try{console.log(i);const t=await a.signAndExecuteTransactionBlock({signer:c,transactionBlock:o}),u={nft_id:w},M=await r.post("/update_nft_status",u);alert("Claim NFT is success. Please see on https://suiscan.xyz/"),$(".loading").hide(),$(".claim-success").css("display","block"),$(".sol-link").show(),$(".btn-claim-id").hide(),$(".claim-btn").hide(),$(".showModal").hide()}catch(t){alert(t.message)}});
